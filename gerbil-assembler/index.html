
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Gerbil Assembler</title>

    <!-- Bootstrap core CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="cover.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="container">

      <div class="page-header">
        <h1 class="cover-heading">Gerbil Assembler</h1>
        <p class="lead">This page helps You assemble The Gerbil data collector script and lets You test it on this page.</p>
        <h4>Gerbil URL</h4>
        <textarea name="gerbilurl" value="sdfasdf" style="width: 100%" onclick="this.focus();this.select()" readonly="readonly"></textarea>
      </div>

      <div class="row">
        <div class="col-md-3">
          <h2 class="cover-heading">Gerbil Version</h2>
          <select name="version">
            <option value="2.0.1">v2.0.1 (Latest)</option>
          </select>
          <hr>
          <p>
            <button id="update">Update</button>
          </p>
        </div>
        <div class="col-md-9">
            <h2 class="cover-heading">Gerbil Macros</h2>
            <p>Fields in bold are mandatory</p>
            <table id="gerbil-vars" class="table table-striped">
              <thead>
                <tr>
                  <th style="width: 20%">Gerbil variable</th>
                  <th style="width: 30%">Macro</th>
                  <th style="width: 50%">Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><b>WSID</b></td>
                  <td><input class="param" name="wsid" type="text" /></td>
                  <td>Client ID</td>
                </tr>
                <tr>
                  <td>BANH</td>
                  <td><input class="param" name="banh" type="text" value="0"/></td>
                  <td>Banner height</td>
                </tr>
                <tr>
                  <td>BANW</td>
                  <td><input class="param" name="banw" type="text" value="0"/></td>
                  <td>Banner width</td>
                </tr>
                <tr>
                  <td>SID</td>
                  <td><input class="param" name="sid" type="text" /></td>
                  <td>Session ID</td>
                </tr>
                <tr>
                  <td>IID</td>
                  <td><input class="param" name="iid" type="text" /></td>
                  <td>Impression ID</td>
                </tr>
                <tr>
                  <td>PID</td>
                  <td><input class="param" name="pid" type="text" /></td>
                  <td>Partner ID</td>
                </tr>
                <tr>
                  <td>PURL</td>
                  <td><input class="param" name="purl" type="text" /></td>
                  <td>Partner URL</td>
                </tr>
                <tr>
                  <td>AID</td>
                  <td><input class="param" name="aid" type="text" /></td>
                  <td>Advertiser ID</td>
                </tr>
                <tr>
                  <td>ADID</td>
                  <td><input class="param" name="adid" type="text" /></td>
                  <td>Ad ID</td>
                </tr>
                <tr>
                  <td>ZID</td>
                  <td><input class="param" name="zid" type="text" /></td>
                  <td>Zone ID</td>
                </tr>
                <tr>
                  <td>CID</td>
                  <td><input class="param" name="cid" type="text" /></td>
                  <td>Channel ID</td>
                </tr>
                <tr>
                  <td>CURL</td>
                  <td><input class="param" name="curl" type="text" /></td>
                  <td>Channel URL</td>
                </tr>
              </tbody>
            </table>
        </div>
      </div>
    </div>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.8.1/bootstrap-table-all.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="http://getbootstrap.com/assets/js/ie10-viewport-bug-workaround.js"></script>
    <script type="text/javascript">
      $(document).ready(function(){
        function assemble(){
          console.log($("input[name=wsid]").val());
          if ($("input[name=wsid]").val() != "") {
            var RACKCDN_URL = "https://df3a34acb7eb1321d99f-2366b89f86f9049a8d564854bcebe54e.ssl.cf5.rackcdn.com/gerbil-";
            var gerbil_version = $("select[name=version]").val();
            var gerbil_url = RACKCDN_URL + gerbil_version + ".js?";
            var query_string = [];
            $(".param").each(function(index){
              console.log($(this).attr('name'), $(this).val());
              if ($(this).val()) {
                query_string.push($(this).attr('name') + '=' + $(this).val());
              }
            });
            query_string = query_string.join("&");
            $("textarea[name=gerbilurl]").val(gerbil_url + query_string);
          }
          else {
            $("textarea[name=gerbilurl]").val("Fill mandatory fields");
          }
        }
        $("#update").click(function(){
          assemble();
        });
      });
    </script>
  </body>
</html>
