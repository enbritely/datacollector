/*flowplayer.js The Flowplayer API */
!function(){function h(p){console.log("$f.fireEvent",[].slice.call(p))}function l(r){if(!r||typeof r!="object"){return r}var p=new r.constructor();for(var q in r){if(r.hasOwnProperty(q)){p[q]=l(r[q])}}return p}function n(u,r){if(!u){return}var p,q=0,s=u.length;if(s===undefined){for(p in u){if(r.call(u[p],p,u[p])===false){break}}}else{for(var t=u[0];q<s&&r.call(t,q,t)!==false;t=u[++q]){}}return u}function c(p){return document.getElementById(p)}function j(r,q,p){if(typeof q!="object"){return r}if(r&&q){n(q,function(s,t){if(!p||typeof t!="function"){r[s]=t}})}return r}function o(t){var r=t.indexOf(".");if(r!=-1){var q=t.slice(0,r)||"*";var p=t.slice(r+1,t.length);var s=[];n(document.getElementsByTagName(q),function(){if(this.className&&this.className.indexOf(p)!=-1){s.push(this)}});return s}}function g(p){p=p||window.event;if(p.preventDefault){p.stopPropagation();p.preventDefault()}else{p.returnValue=false;p.cancelBubble=true}return false}function k(r,p,q){r[p]=r[p]||[];r[p].push(q)}function e(p){return p.replace(/&amp;/g,"%26").replace(/&/g,"%26").replace(/=/g,"%3D")}function f(){return"_"+(""+Math.random()).slice(2,10)}var i=function(u,s,t){var r=this,q={},v={};r.index=s;if(typeof u=="string"){u={url:u}}j(this,u,true);n(("Begin*,Start,Pause*,Resume*,Seek*,Stop*,Finish*,LastSecond,Update,BufferFull,BufferEmpty,BufferStop").split(","),function(){var w="on"+this;if(w.indexOf("*")!=-1){w=w.slice(0,w.length-1);var x="onBefore"+w.slice(2);r[x]=function(y){k(v,x,y);return r}}r[w]=function(y){k(v,w,y);return r};if(s==-1){if(r[x]){t[x]=r[x]}if(r[w]){t[w]=r[w]}}});j(this,{onCuepoint:function(y,x){if(arguments.length==1){q.embedded=[null,y];return r}if(typeof y=="number"){y=[y]}var w=f();q[w]=[y,x];if(t.isLoaded()){t._api().fp_addCuepoints(y,s,w)}return r},update:function(x){j(r,x);if(t.isLoaded()){t._api().fp_updateClip(x,s)}var w=t.getConfig();var y=(s==-1)?w.clip:w.playlist[s];j(y,x,true)},_fireEvent:function(w,z,x,B){if(w=="onLoad"){n(q,function(C,D){if(D[0]){t._api().fp_addCuepoints(D[0],s,C)}});return false}B=B||r;if(w=="onCuepoint"){var A=q[z];if(A){return A[1].call(t,B,x)}}if(z&&"onBeforeBegin,onMetaData,onMetaDataChange,onStart,onUpdate,onResume".indexOf(w)!=-1){j(B,z);if(z.metaData){if(!B.duration){B.duration=z.metaData.duration}else{B.fullDuration=z.metaData.duration}}}var y=true;n(v[w],function(){y=this.call(t,B,z,x)});return y}});if(u.onCuepoint){var p=u.onCuepoint;r.onCuepoint.apply(r,typeof p=="function"?[p]:p);delete u.onCuepoint}n(u,function(w,x){if(typeof x=="function"){k(v,w,x);delete u[w]}});if(s==-1){t.onCuepoint=this.onCuepoint}};var m=function(q,s,r,u){var p=this,t={},v=false;if(u){j(t,u)}n(s,function(w,x){if(typeof x=="function"){t[w]=x;delete s[w]}});j(this,{animate:function(z,A,y){if(!z){return p}if(typeof A=="function"){y=A;A=500}if(typeof z=="string"){var x=z;z={};z[x]=A;A=500}if(y){var w=f();t[w]=y}if(A===undefined){A=500}s=r._api().fp_animate(q,z,A,w);return p},css:function(x,y){if(y!==undefined){var w={};w[x]=y;x=w}s=r._api().fp_css(q,x);j(p,s);return p},show:function(){this.display="block";r._api().fp_showPlugin(q);return p},hide:function(){this.display="none";r._api().fp_hidePlugin(q);return p},toggle:function(){this.display=r._api().fp_togglePlugin(q);return p},fadeTo:function(z,y,x){if(typeof y=="function"){x=y;y=500}if(x){var w=f();t[w]=x}this.display=r._api().fp_fadeTo(q,z,y,w);this.opacity=z;return p},fadeIn:function(x,w){return p.fadeTo(1,x,w)},fadeOut:function(x,w){return p.fadeTo(0,x,w)},getName:function(){return q},getPlayer:function(){return r},_fireEvent:function(x,w,y){if(x=="onUpdate"){var A=r._api().fp_getPlugin(q);if(!A){return}j(p,A);delete p.methods;if(!v){n(A.methods,function(){var C=""+this;p[C]=function(){var D=[].slice.call(arguments);var E=r._api().fp_invoke(q,C,D);return E==="undefined"||E===undefined?p:E}});v=true}}var B=t[x];if(B){var z=B.apply(p,w);if(x.slice(0,1)=="_"){delete t[x]}return z}return p}})};function b(r,H,u){var x=this,w=null,E=false,v,t,G=[],z={},y={},F,s,q,D,p,B;j(x,{id:function(){return F},isLoaded:function(){return(w!==null&&w.fp_play!==undefined&&!E)},getParent:function(){return r},hide:function(I){if(I){r.style.height="0px"}if(x.isLoaded()){w.style.height="0px"}return x},show:function(){r.style.height=B+"px";if(x.isLoaded()){w.style.height=p+"px"}return x},isHidden:function(){return x.isLoaded()&&parseInt(w.style.height,10)===0},load:function(K){if(!x.isLoaded()&&x._fireEvent("onBeforeLoad")!==false){var I=function(){if(v&&!flashembed.isSupported(H.version)){r.innerHTML=""}if(K){K.cached=true;k(y,"onLoad",K)}flashembed(r,H,{config:u})};var J=0;n(a,function(){this.unload(function(L){if(++J==a.length){I()}})})}return x},unload:function(K){if(v.replace(/\s/g,"")!==""){if(x._fireEvent("onBeforeUnload")===false){if(K){K(false)}return x}E=true;try{if(w){if(w.fp_isFullscreen()){w.fp_toggleFullscreen()}w.fp_close();x._fireEvent("onUnload")}}catch(I){}var J=function(){w=null;r.innerHTML=v;E=false;if(K){K(true)}};if(/WebKit/i.test(navigator.userAgent)&&!/Chrome/i.test(navigator.userAgent)){setTimeout(J,0)}else{J()}}else{if(K){K(false)}}return x},getClip:function(I){if(I===undefined){I=D}return G[I]},getCommonClip:function(){return t},getPlaylist:function(){return G},getPlugin:function(I){var K=z[I];if(!K&&x.isLoaded()){var J=x._api().fp_getPlugin(I);if(J){K=new m(I,J,x);z[I]=K}}return K},getScreen:function(){return x.getPlugin("screen")},getControls:function(){return x.getPlugin("controls")._fireEvent("onUpdate")},getLogo:function(){try{return x.getPlugin("logo")._fireEvent("onUpdate")}catch(I){}},getPlay:function(){return x.getPlugin("play")._fireEvent("onUpdate")},getConfig:function(I){return I?l(u):u},getFlashParams:function(){return H},loadPlugin:function(L,K,N,M){if(typeof N=="function"){M=N;N={}}var J=M?f():"_";x._api().fp_loadPlugin(L,K,N,J);var I={};I[J]=M;var O=new m(L,null,x,I);z[L]=O;return O},getState:function(){return x.isLoaded()?w.fp_getState():-1},play:function(J,I){var K=function(){if(J!==undefined){x._api().fp_play(J,I)}else{x._api().fp_play()}};if(x.isLoaded()){K()}else{if(E){setTimeout(function(){x.play(J,I)},50)}else{x.load(function(){K()})}}return x},getVersion:function(){var J="flowplayer.js @VERSION";if(x.isLoaded()){var I=w.fp_getVersion();I.push(J);return I}return J},_api:function(){if(!x.isLoaded()){throw"Flowplayer "+x.id()+" not loaded when calling an API method"}return w},setClip:function(I){n(I,function(J,K){if(typeof K=="function"){k(y,J,K);delete I[J]}else{if(J=="onCuepoint"){$f(r).getCommonClip().onCuepoint(I[J][0],I[J][1])}}});x.setPlaylist([I]);return x},getIndex:function(){return q},bufferAnimate:function(I){w.fp_bufferAnimate(I===undefined||I);return x},_swfHeight:function(){return w.clientHeight}});n(("Click*,Load*,Unload*,Keypress*,Volume*,Mute*,Unmute*,PlaylistReplace,ClipAdd,Fullscreen*,FullscreenExit,Error,MouseOver,MouseOut").split(","),function(){var I="on"+this;if(I.indexOf("*")!=-1){I=I.slice(0,I.length-1);var J="onBefore"+I.slice(2);x[J]=function(K){k(y,J,K);return x}}x[I]=function(K){k(y,I,K);return x}});n(("pause,resume,mute,unmute,stop,toggle,seek,getStatus,getVolume,setVolume,getTime,isPaused,isPlaying,startBuffering,stopBuffering,isFullscreen,toggleFullscreen,reset,close,setPlaylist,addClip,playFeed,setKeyboardShortcutsEnabled,isKeyboardShortcutsEnabled").split(","),function(){var I=this;x[I]=function(K,J){if(!x.isLoaded()){return x}var L=null;if(K!==undefined&&J!==undefined){L=w["fp_"+I](K,J)}else{L=(K===undefined)?w["fp_"+I]():w["fp_"+I](K)}return L==="undefined"||L===undefined?x:L}});x._fireEvent=function(R){if(typeof R=="string"){R=[R]}var S=R[0],P=R[1],N=R[2],M=R[3],L=0;if(u.debug){h(R)}if(!x.isLoaded()&&S=="onLoad"&&P=="player"){w=w||c(s);p=x._swfHeight();n(G,function(){this._fireEvent("onLoad")});n(z,function(T,U){U._fireEvent("onUpdate")});t._fireEvent("onLoad")}if(S=="onLoad"&&P!="player"){return}if(S=="onError"){if(typeof P=="string"||(typeof P=="number"&&typeof N=="number")){P=N;N=M}}if(S=="onContextMenu"){n(u.contextMenu[P],function(T,U){U.call(x)});return}if(S=="onPluginEvent"||S=="onBeforePluginEvent"){var I=P.name||P;var J=z[I];if(J){J._fireEvent("onUpdate",P);return J._fireEvent(N,R.slice(3))}return}if(S=="onPlaylistReplace"){G=[];var O=0;n(P,function(){G.push(new i(this,O++,x))})}if(S=="onClipAdd"){if(P.isInStream){return}P=new i(P,N,x);G.splice(N,0,P);for(L=N+1;L<G.length;L++){G[L].index++}}var Q=true;if(typeof P=="number"&&P<G.length){D=P;var K=G[P];if(K){Q=K._fireEvent(S,N,M)}if(!K||Q!==false){Q=t._fireEvent(S,N,M,K)}}n(y[S],function(){Q=this.call(x,P,N);if(this.cached){y[S].splice(L,1)}if(Q===false){return false}L++});return Q};function C(){if($f(r)){$f(r).getParent().innerHTML="";q=$f(r).getIndex();a[q]=x}else{a.push(x);q=a.length-1}B=parseInt(r.style.height,10)||r.clientHeight;F=r.id||"fp"+f();s=H.id||F+"_api";H.id=s;v=r.innerHTML;if(typeof u=="string"){u={clip:{url:u}}}u.playerId=F;u.clip=u.clip||{};if(r.getAttribute("href",2)&&!u.clip.url){u.clip.url=r.getAttribute("href",2)}if(u.clip.url){u.clip.url=e(u.clip.url)}t=new i(u.clip,-1,x);u.playlist=u.playlist||[u.clip];var J=0;n(u.playlist,function(){var M=this;if(typeof M=="object"&&M.length){M={url:""+M}}if(M.url){M.url=e(M.url)}n(u.clip,function(N,O){if(O!==undefined&&M[N]===undefined&&typeof O!="function"){M[N]=O}});u.playlist[J]=M;M=new i(M,J,x);G.push(M);J++});n(u,function(M,N){if(typeof N=="function"){if(t[M]){t[M](N)}else{k(y,M,N)}delete u[M]}});n(u.plugins,function(M,N){if(N){z[M]=new m(M,N,x)}});if(!u.plugins||u.plugins.controls===undefined){z.controls=new m("controls",null,x)}z.canvas=new m("canvas",null,x);v=r.innerHTML;function L(M){if(/iPad|iPhone|iPod/i.test(navigator.userAgent)&&!/.flv$/i.test(G[0].url)&&!K()){return true}if(!x.isLoaded()&&x._fireEvent("onBeforeClick")!==false){x.load()}return g(M)}function K(){return x.hasiPadSupport&&x.hasiPadSupport()}function I(){if(v.replace(/\s/g,"")!==""){if(r.addEventListener){r.addEventListener("click",L,false)}else{if(r.attachEvent){r.attachEvent("onclick",L)}}}else{if(r.addEventListener&&!K()){r.addEventListener("click",g,false)}x.load()}}setTimeout(I,0)}if(typeof r=="string"){var A=c(r);if(!A){throw"Flowplayer cannot access element: "+r}r=A;C()}else{C()}}var a=[];function d(p){this.length=p.length;this.each=function(r){n(p,r)};this.size=function(){return p.length};var q=this;for(name in b.prototype){q[name]=function(){var r=arguments;q.each(function(){this[name].apply(this,r)})}}}window.flowplayer=window.$f=function(){var q=null;var p=arguments[0];if(!arguments.length){n(a,function(){if(this.isLoaded()){q=this;return false}});return q||a[0]}if(arguments.length==1){if(typeof p=="number"){return a[p]}else{if(p=="*"){return new d(a)}n(a,function(){if(this.id()==p.id||this.id()==p||this.getParent()==p){q=this;return false}});return q}}if(arguments.length>1){var u=arguments[1],r=(arguments.length==3)?arguments[2]:{};if(typeof u=="string"){u={src:u}}u=j({bgcolor:"#000000",version:[10,1],expressInstall:"http://releases.flowplayer.org/swf/expressinstall.swf",cachebusting:false},u);if(typeof p=="string"){if(p.indexOf(".")!=-1){var t=[];n(o(p),function(){t.push(new b(this,l(u),l(r)))});return new d(t)}else{var s=c(p);return new b(s!==null?s:l(p),l(u),l(r))}}else{if(p){return new b(p,l(u),l(r))}}}return null};j(window.$f,{fireEvent:function(){var q=[].slice.call(arguments);var r=$f(q[0]);return r?r._fireEvent(q.slice(1)):null},addPlugin:function(p,q){b.prototype[p]=q;return $f},each:n,extend:j});if(typeof jQuery=="function"){jQuery.fn.flowplayer=function(r,q){if(!arguments.length||typeof arguments[0]=="number"){var p=[];this.each(function(){var s=$f(this);if(s){p.push(s)}});return arguments.length?p[arguments[0]]:new d(p)}return this.each(function(){$f(this,l(r),q?l(q):{})})}}}();!function(){var h=document.all,j="http://get.adobe.com/flashplayer",c=typeof jQuery=="function",e=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,b={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowfullscreen:true,allowscriptaccess:"always",quality:"high",version:[3,0],onFail:null,expressInstall:null,w3c:false,cachebusting:false};if(window.attachEvent){window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){}})}function i(m,l){if(l){for(var f in l){if(l.hasOwnProperty(f)){m[f]=l[f]}}}return m}function a(f,n){var m=[];for(var l in f){if(f.hasOwnProperty(l)){m[l]=n(f[l])}}return m}window.flashembed=function(f,m,l){if(typeof f=="string"){f=document.getElementById(f.replace("#",""))}if(!f){return}if(typeof m=="string"){m={src:m}}return new d(f,i(i({},b),m),l)};var g=i(window.flashembed,{conf:b,getVersion:function(){var m,f,o;try{o=navigator.plugins["Shockwave Flash"];if(o[0].enabledPlugin!=null){f=o.description.slice(16)}}catch(p){try{m=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");f=m&&m.GetVariable("$version")}catch(n){try{m=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");f=m&&m.GetVariable("$version")}catch(l){}}}f=e.exec(f);return f?[1*f[1],1*f[(f[1]*1>9?2:3)]*1]:[0,0]},asString:function(l){if(l===null||l===undefined){return null}var f=typeof l;if(f=="object"&&l.push){f="array"}switch(f){case"string":l=l.replace(new RegExp('(["\\\\])',"g"),"\\$1");l=l.replace(/^\s?(\d+\.?\d*)%/,"$1pct");return'"'+l+'"';case"array":return"["+a(l,function(o){return g.asString(o)}).join(",")+"]";case"function":return'"function()"';case"object":var m=[];for(var n in l){if(l.hasOwnProperty(n)){m.push('"'+n+'":'+g.asString(l[n]))}}return"{"+m.join(",")+"}"}return String(l).replace(/\s/g," ").replace(/\'/g,'"')},getHTML:function(o,l){o=i({},o);var n='<object width="'+o.width+'" height="'+o.height+'" id="'+o.id+'" name="'+o.id+'"';if(o.cachebusting){o.src+=((o.src.indexOf("?")!=-1?"&":"?")+Math.random())}if(o.w3c||!h){n+=' data="'+o.src+'" type="application/x-shockwave-flash"'}else{n+=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'}n+=">";if(o.w3c||h){n+='<param name="movie" value="'+o.src+'" />'}o.width=o.height=o.id=o.w3c=o.src=null;o.onFail=o.version=o.expressInstall=null;for(var m in o){if(o[m]){n+='<param name="'+m+'" value="'+o[m]+'" />'}}var p="";if(l){for(var f in l){if(l[f]){var q=l[f];p+=f+"="+(/function|object/.test(typeof q)?g.asString(q):q)+"&"}}p=p.slice(0,-1);n+='<param name="flashvars" value=\''+p+"' />"}n+="</object>";return n},isSupported:function(f){return k[0]>f[0]||k[0]==f[0]&&k[1]>=f[1]}});var k=g.getVersion();function d(f,n,m){if(g.isSupported(n.version)){f.innerHTML=g.getHTML(n,m)}else{if(n.expressInstall&&g.isSupported([6,65])){f.innerHTML=g.getHTML(i(n,{src:n.expressInstall}),{MMredirectURL:encodeURIComponent(location.href),MMplayerType:"PlugIn",MMdoctitle:document.title})}else{if(!f.innerHTML.replace(/\s/g,"")){f.innerHTML="<h2>Flash version "+n.version+" or greater is required</h2><h3>"+(k[0]>0?"Your version is "+k:"You have no flash plugin installed")+"</h3>"+(f.tagName=="A"?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+j+"'>here</a></p>");if(f.tagName=="A"||f.tagName=="DIV"){f.onclick=function(){location.href=j}}}if(n.onFail){var l=n.onFail.call(this);if(typeof l=="string"){f.innerHTML=l}}}}if(h){window[n.id]=document.getElementById(n.id)}i(this,{getRoot:function(){return f},getOptions:function(){return n},getConf:function(){return m},getApi:function(){return f.firstChild}})}if(c){jQuery.tools=jQuery.tools||{version:"@VERSION"};jQuery.tools.flashembed={conf:b};jQuery.fn.flashembed=function(l,f){return this.each(function(){$(this).data("flashembed",flashembed(this,l,f))})}}}();



/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 *
 * Requires: 1.2.2+
 */
(function(a){function d(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=!0,g=0,h=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),h=e,c.axis!==undefined&&c.axis===c.HORIZONTAL_AXIS&&(h=0,g=-1*e),c.wheelDeltaY!==undefined&&(h=c.wheelDeltaY/120),c.wheelDeltaX!==undefined&&(g=-1*c.wheelDeltaX/120),d.unshift(b,e,g,h),(a.event.dispatch||a.event.handle).apply(this,d)}var b=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var c=b.length;c;)a.event.fixHooks[b[--c]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=b.length;a;)this.addEventListener(b[--a],d,!1);else this.onmousewheel=d},teardown:function(){if(this.removeEventListener)for(var a=b.length;a;)this.removeEventListener(b[--a],d,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);

/* history.js */
(function($){typeof JSON!="object"&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){"use strict";var n=e.History=e.History||{},r=e.jQuery;if(typeof n.Adapter!="undefined")throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){r(e).bind(t,n)},trigger:function(e,t,n){r(e).trigger(t,n)},extractEventData:function(e,n,r){var i=n&&n.originalEvent&&n.originalEvent[e]||r&&r[e]||t;return i},onDomLoad:function(e){r(e)}},typeof n.init!="undefined"&&n.init()}(window),function(e,t){"use strict";var n=e.document,r=e.setTimeout||r,i=e.clearTimeout||i,s=e.setInterval||s,o=e.History=e.History||{};if(typeof o.initHtml4!="undefined")throw new Error("History.js HTML4 Support has already been loaded...");o.initHtml4=function(){if(typeof o.initHtml4.initialized!="undefined")return!1;o.initHtml4.initialized=!0,o.enabled=!0,o.savedHashes=[],o.isLastHash=function(e){var t=o.getHashByIndex(),n;return n=e===t,n},o.isHashEqual=function(e,t){return e=encodeURIComponent(e).replace(/%25/g,"%"),t=encodeURIComponent(t).replace(/%25/g,"%"),e===t},o.saveHash=function(e){return o.isLastHash(e)?!1:(o.savedHashes.push(e),!0)},o.getHashByIndex=function(e){var t=null;return typeof e=="undefined"?t=o.savedHashes[o.savedHashes.length-1]:e<0?t=o.savedHashes[o.savedHashes.length+e]:t=o.savedHashes[e],t},o.discardedHashes={},o.discardedStates={},o.discardState=function(e,t,n){var r=o.getHashByState(e),i;return i={discardedState:e,backState:n,forwardState:t},o.discardedStates[r]=i,!0},o.discardHash=function(e,t,n){var r={discardedHash:e,backState:n,forwardState:t};return o.discardedHashes[e]=r,!0},o.discardedState=function(e){var t=o.getHashByState(e),n;return n=o.discardedStates[t]||!1,n},o.discardedHash=function(e){var t=o.discardedHashes[e]||!1;return t},o.recycleState=function(e){var t=o.getHashByState(e);return o.discardedState(e)&&delete o.discardedStates[t],!0},o.emulated.hashChange&&(o.hashChangeInit=function(){o.checkerFunction=null;var t="",r,i,u,a,f=Boolean(o.getHash());return o.isInternetExplorer()?(r="historyjs-iframe",i=n.createElement("iframe"),i.setAttribute("id",r),i.setAttribute("src","#"),i.style.display="none",n.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),u="",a=!1,o.checkerFunction=function(){if(a)return!1;a=!0;var n=o.getHash(),r=o.getHash(i.contentWindow.document);return n!==t?(t=n,r!==n&&(u=r=n,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=o.escapeHash(n)),o.Adapter.trigger(e,"hashchange")):r!==u&&(u=r,f&&r===""?o.back():o.setHash(r,!1)),a=!1,!0}):o.checkerFunction=function(){var n=o.getHash()||"";return n!==t&&(t=n,o.Adapter.trigger(e,"hashchange")),!0},o.intervalList.push(s(o.checkerFunction,o.options.hashChangeInterval)),!0},o.Adapter.onDomLoad(o.hashChangeInit)),o.emulated.pushState&&(o.onHashChange=function(t){var n=t&&t.newURL||o.getLocationHref(),r=o.getHashByUrl(n),i=null,s=null,u=null,a;return o.isLastHash(r)?(o.busy(!1),!1):(o.doubleCheckComplete(),o.saveHash(r),r&&o.isTraditionalAnchor(r)?(o.Adapter.trigger(e,"anchorchange"),o.busy(!1),!1):(i=o.extractState(o.getFullUrl(r||o.getLocationHref()),!0),o.isLastSavedState(i)?(o.busy(!1),!1):(s=o.getHashByState(i),a=o.discardedState(i),a?(o.getHashByIndex(-2)===o.getHashByState(a.forwardState)?o.back(!1):o.forward(!1),!1):(o.pushState(i.data,i.title,encodeURI(i.url),!1),!0))))},o.Adapter.bind(e,"hashchange",o.onHashChange),o.pushState=function(t,n,r,i){r=encodeURI(r).replace(/%25/g,"%");if(o.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(i!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:i}),!1;o.busy(!0);var s=o.createStateObject(t,n,r),u=o.getHashByState(s),a=o.getState(!1),f=o.getHashByState(a),l=o.getHash(),c=o.expectedStateId==s.id;return o.storeState(s),o.expectedStateId=s.id,o.recycleState(s),o.setTitle(s),u===f?(o.busy(!1),!1):(o.saveState(s),c||o.Adapter.trigger(e,"statechange"),!o.isHashEqual(u,l)&&!o.isHashEqual(u,o.getShortUrl(o.getLocationHref()))&&o.setHash(u,!1),o.busy(!1),!0)},o.replaceState=function(t,n,r,i){r=encodeURI(r).replace(/%25/g,"%");if(o.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(i!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:i}),!1;o.busy(!0);var s=o.createStateObject(t,n,r),u=o.getHashByState(s),a=o.getState(!1),f=o.getHashByState(a),l=o.getStateByIndex(-2);return o.discardState(a,s,l),u===f?(o.storeState(s),o.expectedStateId=s.id,o.recycleState(s),o.setTitle(s),o.saveState(s),o.Adapter.trigger(e,"statechange"),o.busy(!1)):o.pushState(s.data,s.title,s.url,!1),!0}),o.emulated.pushState&&o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad(function(){o.Adapter.trigger(e,"hashchange")})},typeof o.init!="undefined"&&o.init()}(window),function(e,t){"use strict";var n=e.console||t,r=e.document,i=e.navigator,s=!1,o=e.setTimeout,u=e.clearTimeout,a=e.setInterval,f=e.clearInterval,l=e.JSON,c=e.alert,h=e.History=e.History||{},p=e.history;try{s=e.sessionStorage,s.setItem("TEST","1"),s.removeItem("TEST")}catch(d){s=!1}l.stringify=l.stringify||l.encode,l.parse=l.parse||l.decode;if(typeof h.init!="undefined")throw new Error("History.js Core has already been loaded...");h.init=function(e){return typeof h.Adapter=="undefined"?!1:(typeof h.initCore!="undefined"&&h.initCore(),typeof h.initHtml4!="undefined"&&h.initHtml4(),!0)},h.initCore=function(d){if(typeof h.initCore.initialized!="undefined")return!1;h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||100,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.disableSuid=h.options.disableSuid||!1,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=h.options.debug||!1,h.options.initialTitle=h.options.initialTitle||r.title,h.options.html4Mode=h.options.html4Mode||!1,h.options.delayInit=h.options.delayInit||!1,h.intervalList=[],h.clearAllIntervals=function(){var e,t=h.intervalList;if(typeof t!="undefined"&&t!==null){for(e=0;e<t.length;e++)f(t[e]);h.intervalList=null}},h.debug=function(){(h.options.debug||!1)&&h.log.apply(h,arguments)},h.log=function(){var e=typeof n!="undefined"&&typeof n.log!="undefined"&&typeof n.log.apply!="undefined",t=r.getElementById("log"),i,s,o,u,a;e?(u=Array.prototype.slice.call(arguments),i=u.shift(),typeof n.debug!="undefined"?n.debug.apply(n,[i,u]):n.log.apply(n,[i,u])):i="\n"+arguments[0]+"\n";for(s=1,o=arguments.length;s<o;++s){a=arguments[s];if(typeof a=="object"&&typeof l!="undefined")try{a=l.stringify(a)}catch(f){}i+="\n"+a+"\n"}return t?(t.value+=i+"\n-----\n",t.scrollTop=t.scrollHeight-t.clientHeight):e||c(i),!0},h.getInternetExplorerMajorVersion=function(){var e=h.getInternetExplorerMajorVersion.cached=typeof h.getInternetExplorerMajorVersion.cached!="undefined"?h.getInternetExplorerMajorVersion.cached:function(){var e=3,t=r.createElement("div"),n=t.getElementsByTagName("i");while((t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n[0]);return e>4?e:!1}();return e},h.isInternetExplorer=function(){var e=h.isInternetExplorer.cached=typeof h.isInternetExplorer.cached!="undefined"?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion());return e},h.options.html4Mode?h.emulated={pushState:!0,hashChange:!0}:h.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent)),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in r)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&i.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&i.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},h.cloneObject=function(e){var t,n;return e?(t=l.stringify(e),n=l.parse(t)):n={},n},h.getRootUrl=function(){var e=r.location.protocol+"//"+(r.location.hostname||r.location.host);if(r.location.port||!1)e+=":"+r.location.port;return e+="/",e},h.getBaseHref=function(){var e=r.getElementsByTagName("base"),t=null,n="";return e.length===1&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},h.getBaseUrl=function(){var e=h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl();return e},h.getPageUrl=function(){var e=h.getState(!1,!1),t=(e||{}).url||h.getLocationHref(),n;return n=t.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"}),n},h.getBasePageUrl=function(){var e=h.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e},h.getFullUrl=function(e,t){var n=e,r=e.substring(0,1);return t=typeof t=="undefined"?!0:t,/[a-z]+\:\/\//.test(e)||(r==="/"?n=h.getRootUrl()+e.replace(/^\/+/,""):r==="#"?n=h.getPageUrl().replace(/#.*/,"")+e:r==="?"?n=h.getPageUrl().replace(/[\?#].*/,"")+e:t?n=h.getBaseUrl()+e.replace(/^(\.\/)+/,""):n=h.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},h.getShortUrl=function(e){var t=e,n=h.getBaseUrl(),r=h.getRootUrl();return h.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(r,"/"),h.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),t},h.getLocationHref=function(e){return e=e||r,e.URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:e.URL.indexOf("#")==-1&&e.location.href.indexOf("#")!=-1?e.location.href:e.URL||e.location.href},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(e,t){typeof e=="undefined"&&(e=!0),typeof t=="undefined"&&(t=!0);var n=h.getLastSavedState();return!n&&t&&(n=h.createStateObject()),e&&(n=h.cloneObject(n),n.url=n.cleanUrl||n.url),n},h.getIdByState=function(e){var t=h.extractId(e.url),n;if(!t){n=h.getStateString(e);if(typeof h.stateToId[n]!="undefined")t=h.stateToId[n];else if(typeof h.store.stateToId[n]!="undefined")t=h.store.stateToId[n];else{for(;;){t=(new Date).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof h.idToState[t]=="undefined"&&typeof h.store.idToState[t]=="undefined")break}h.stateToId[n]=t,h.idToState[t]=e}}return t},h.normalizeState=function(e){var t,n;if(!e||typeof e!="object")e={};if(typeof e.normalized!="undefined")return e;if(!e.data||typeof e.data!="object")e.data={};return t={},t.normalized=!0,t.title=e.title||"",t.url=h.getFullUrl(e.url?e.url:h.getLocationHref()),t.hash=h.getShortUrl(t.url),t.data=h.cloneObject(e.data),t.id=h.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!h.isEmptyObject(t.data),(t.title||n)&&h.options.disableSuid!==!0&&(t.hash=h.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=h.getFullUrl(t.hash),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t},h.createStateObject=function(e,t,n){var r={data:e,title:t,url:n};return r=h.normalizeState(r),r},h.getStateById=function(e){e=String(e);var n=h.idToState[e]||h.store.idToState[e]||t;return n},h.getStateString=function(e){var t,n,r;return t=h.normalizeState(e),n={data:t.data,title:e.title,url:e.url},r=l.stringify(n),r},h.getStateId=function(e){var t,n;return t=h.normalizeState(e),n=t.id,n},h.getHashByState=function(e){var t,n;return t=h.normalizeState(e),n=t.hash,n},h.extractId=function(e){var t,n,r,i;return e.indexOf("#")!=-1?i=e.split("#")[0]:i=e,n=/(.*)\&_suid=([0-9]+)$/.exec(i),r=n?n[1]||e:e,t=n?String(n[2]||""):"",t||!1},h.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},h.extractState=function(e,t){var n=null,r,i;return t=t||!1,r=h.extractId(e),r&&(n=h.getStateById(r)),n||(i=h.getFullUrl(e),r=h.getIdByUrl(i)||!1,r&&(n=h.getStateById(r)),!n&&t&&!h.isTraditionalAnchor(e)&&(n=h.createStateObject(null,null,i))),n},h.getIdByUrl=function(e){var n=h.urlToId[e]||h.store.urlToId[e]||t;return n},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||t},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||t},h.hasUrlDuplicate=function(e){var t=!1,n;return n=h.extractState(e.url),t=n&&n.id!==e.id,t},h.storeState=function(e){return h.urlToId[e.url]=e.id,h.storedStates.push(h.cloneObject(e)),e},h.isLastSavedState=function(e){var t=!1,n,r,i;return h.savedStates.length&&(n=e.id,r=h.getLastSavedState(),i=r.id,t=n===i),t},h.saveState=function(e){return h.isLastSavedState(e)?!1:(h.savedStates.push(h.cloneObject(e)),!0)},h.getStateByIndex=function(e){var t=null;return typeof e=="undefined"?t=h.savedStates[h.savedStates.length-1]:e<0?t=h.savedStates[h.savedStates.length+e]:t=h.savedStates[e],t},h.getCurrentIndex=function(){var e=null;return h.savedStates.length<1?e=0:e=h.savedStates.length-1,e},h.getHash=function(e){var t=h.getLocationHref(e),n;return n=h.getHashByUrl(t),n},h.unescapeHash=function(e){var t=h.normalizeHash(e);return t=decodeURIComponent(t),t},h.normalizeHash=function(e){var t=e.replace(/[^#]*#/,"").replace(/#.*/,"");return t},h.setHash=function(e,t){var n,i;return t!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:t}),!1):(h.busy(!0),n=h.extractState(e,!0),n&&!h.emulated.pushState?h.pushState(n.data,n.title,n.url,!1):h.getHash()!==e&&(h.bugs.setHash?(i=h.getPageUrl(),h.pushState(null,null,i+"#"+e,!1)):r.location.hash=e),h)},h.escapeHash=function(t){var n=h.normalizeHash(t);return n=e.encodeURIComponent(n),h.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},h.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=h.unescapeHash(t),t},h.setTitle=function(e){var t=e.title,n;t||(n=h.getStateByIndex(0),n&&n.url===e.url&&(t=n.title||h.options.initialTitle));try{r.getElementsByTagName("title")[0].innerHTML=t.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(i){}return r.title=t,h},h.queues=[],h.busy=function(e){typeof e!="undefined"?h.busy.flag=e:typeof h.busy.flag=="undefined"&&(h.busy.flag=!1);if(!h.busy.flag){u(h.busy.timeout);var t=function(){var e,n,r;if(h.busy.flag)return;for(e=h.queues.length-1;e>=0;--e){n=h.queues[e];if(n.length===0)continue;r=n.shift(),h.fireQueueItem(r),h.busy.timeout=o(t,h.options.busyDelay)}};h.busy.timeout=o(t,h.options.busyDelay)}return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(e){return e.callback.apply(e.scope||h,e.args||[])},h.pushQueue=function(e){return h.queues[e.queue||0]=h.queues[e.queue||0]||[],h.queues[e.queue||0].push(e),h},h.queue=function(e,t){return typeof e=="function"&&(e={callback:e}),typeof t!="undefined"&&(e.queue=t),h.busy()?h.pushQueue(e):h.fireQueueItem(e),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(u(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(e){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=o(function(){return h.doubleCheckClear(),h.stateChanged||e(),!0},h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var t=h.extractState(h.getLocationHref()),n;if(!h.isLastSavedState(t))return n=t,n||(n=h.createStateObject()),h.Adapter.trigger(e,"popstate"),h;return},h.back=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.back(!1)}),p.go(-1),!0)},h.forward=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.forward(!1)}),p.go(1),!0)},h.go=function(e,t){var n;if(e>0)for(n=1;n<=e;++n)h.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)h.back(t)}return h};if(h.emulated.pushState){var v=function(){};h.pushState=h.pushState||v,h.replaceState=h.replaceState||v}else h.onPopState=function(t,n){var r=!1,i=!1,s,o;return h.doubleCheckComplete(),s=h.getHash(),s?(o=h.extractState(s||h.getLocationHref(),!0),o?h.replaceState(o.data,o.title,o.url,!1):(h.Adapter.trigger(e,"anchorchange"),h.busy(!1)),h.expectedStateId=!1,!1):(r=h.Adapter.extractEventData("state",t,n)||!1,r?i=h.getStateById(r):h.expectedStateId?i=h.getStateById(h.expectedStateId):i=h.extractState(h.getLocationHref()),i||(i=h.createStateObject(null,null,h.getLocationHref())),h.expectedStateId=!1,h.isLastSavedState(i)?(h.busy(!1),!1):(h.storeState(i),h.saveState(i),h.setTitle(i),h.Adapter.trigger(e,"statechange"),h.busy(!1),!0))},h.Adapter.bind(e,"popstate",h.onPopState),h.pushState=function(t,n,r,i){if(h.getHashByUrl(r)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(i!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:i}),!1;h.busy(!0);var s=h.createStateObject(t,n,r);return h.isLastSavedState(s)?h.busy(!1):(h.storeState(s),h.expectedStateId=s.id,p.pushState(s.id,s.title,s.url),h.Adapter.trigger(e,"popstate")),!0},h.replaceState=function(t,n,r,i){if(h.getHashByUrl(r)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(i!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:i}),!1;h.busy(!0);var s=h.createStateObject(t,n,r);return h.isLastSavedState(s)?h.busy(!1):(h.storeState(s),h.expectedStateId=s.id,p.replaceState(s.id,s.title,s.url),h.Adapter.trigger(e,"popstate")),!0};if(s){try{h.store=l.parse(s.getItem("History.store"))||{}}catch(m){h.store={}}h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(e,"unload",h.clearAllIntervals),h.saveState(h.storeState(h.extractState(h.getLocationHref(),!0))),s&&(h.onUnload=function(){var e,t,n;try{e=l.parse(s.getItem("History.store"))||{}}catch(r){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in h.idToState){if(!h.idToState.hasOwnProperty(t))continue;e.idToState[t]=h.idToState[t]}for(t in h.urlToId){if(!h.urlToId.hasOwnProperty(t))continue;e.urlToId[t]=h.urlToId[t]}for(t in h.stateToId){if(!h.stateToId.hasOwnProperty(t))continue;e.stateToId[t]=h.stateToId[t]}h.store=e,h.normalizeStore(),n=l.stringify(e);try{s.setItem("History.store",n)}catch(i){if(i.code!==DOMException.QUOTA_EXCEEDED_ERR)throw i;s.length&&(s.removeItem("History.store"),s.setItem("History.store",n))}},h.intervalList.push(a(h.onUnload,h.options.storeInterval)),h.Adapter.bind(e,"beforeunload",h.onUnload),h.Adapter.bind(e,"unload",h.onUnload));if(!h.emulated.pushState){h.bugs.safariPoll&&h.intervalList.push(a(h.safariStatePoll,h.options.safariPollInterval));if(i.vendor==="Apple Computer, Inc."||(i.appCodeName||"")==="Mozilla")h.Adapter.bind(e,"hashchange",function(){h.Adapter.trigger(e,"popstate")}),h.getHash()&&h.Adapter.onDomLoad(function(){h.Adapter.trigger(e,"hashchange")})}},(!h.options||!h.options.delayInit)&&h.init()}(window)})(jQuery);/* mCustomScrollbar.js */

(function(c){var b={init:function(e){var f={set_width:false,set_height:false,horizontalScroll:false,scrollInertia:950,mouseWheel:true,mouseWheelPixels:"auto",autoDraggerLength:true,autoHideScrollbar:false,snapAmount:null,snapOffset:0,scrollButtons:{enable:false,scrollType:"continuous",scrollSpeed:"auto",scrollAmount:40},advanced:{updateOnBrowserResize:true,updateOnContentResize:false,autoExpandHorizontalScroll:false,autoScrollOnFocus:true,normalizeMouseWheelDelta:false},contentTouchScroll:true,callbacks:{onScrollStart:function(){},onScroll:function(){},onTotalScroll:function(){},onTotalScrollBack:function(){},onTotalScrollOffset:0,onTotalScrollBackOffset:0,whileScrolling:function(){}},theme:"light"},e=c.extend(true,f,e);return this.each(function(){var m=c(this);if(e.set_width){m.css("width",e.set_width)}if(e.set_height){m.css("height",e.set_height)}if(!c(document).data("mCustomScrollbar-index")){c(document).data("mCustomScrollbar-index","1")}else{var t=parseInt(c(document).data("mCustomScrollbar-index"));c(document).data("mCustomScrollbar-index",t+1)}m.wrapInner("<div class='mCustomScrollBox mCS-"+e.theme+"' id='mCSB_"+c(document).data("mCustomScrollbar-index")+"' style='position:relative; height:100%; overflow:hidden; max-width:100%;' />").addClass("mCustomScrollbar _mCS_"+c(document).data("mCustomScrollbar-index"));var g=m.children(".mCustomScrollBox");if(e.horizontalScroll){g.addClass("mCSB_horizontal").wrapInner("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />");var k=g.children(".mCSB_h_wrapper");k.wrapInner("<div class='mCSB_container' style='position:absolute; left:0;' />").children(".mCSB_container").css({width:k.children().outerWidth(),position:"relative"}).unwrap()}else{g.wrapInner("<div class='mCSB_container' style='position:relative; top:0;' />")}var o=g.children(".mCSB_container");if(c.support.touch){o.addClass("mCS_touch")}o.after("<div class='mCSB_scrollTools' style='position:absolute;'><div class='mCSB_draggerContainer'><div class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' style='position:relative;'></div></div><div class='mCSB_draggerRail'></div></div></div>");var l=g.children(".mCSB_scrollTools"),h=l.children(".mCSB_draggerContainer"),q=h.children(".mCSB_dragger");if(e.horizontalScroll){q.data("minDraggerWidth",q.width())}else{q.data("minDraggerHeight",q.height())}if(e.scrollButtons.enable){if(e.horizontalScroll){l.prepend("<a class='mCSB_buttonLeft' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonRight' oncontextmenu='return false;'></a>")}else{l.prepend("<a class='mCSB_buttonUp' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonDown' oncontextmenu='return false;'></a>")}}g.bind("scroll",function(){if(!m.is(".mCS_disabled")){g.scrollTop(0).scrollLeft(0)}});m.data({mCS_Init:true,mCustomScrollbarIndex:c(document).data("mCustomScrollbar-index"),horizontalScroll:e.horizontalScroll,scrollInertia:e.scrollInertia,scrollEasing:"mcsEaseOut",mouseWheel:e.mouseWheel,mouseWheelPixels:e.mouseWheelPixels,autoDraggerLength:e.autoDraggerLength,autoHideScrollbar:e.autoHideScrollbar,snapAmount:e.snapAmount,snapOffset:e.snapOffset,scrollButtons_enable:e.scrollButtons.enable,scrollButtons_scrollType:e.scrollButtons.scrollType,scrollButtons_scrollSpeed:e.scrollButtons.scrollSpeed,scrollButtons_scrollAmount:e.scrollButtons.scrollAmount,autoExpandHorizontalScroll:e.advanced.autoExpandHorizontalScroll,autoScrollOnFocus:e.advanced.autoScrollOnFocus,normalizeMouseWheelDelta:e.advanced.normalizeMouseWheelDelta,contentTouchScroll:e.contentTouchScroll,onScrollStart_Callback:e.callbacks.onScrollStart,onScroll_Callback:e.callbacks.onScroll,onTotalScroll_Callback:e.callbacks.onTotalScroll,onTotalScrollBack_Callback:e.callbacks.onTotalScrollBack,onTotalScroll_Offset:e.callbacks.onTotalScrollOffset,onTotalScrollBack_Offset:e.callbacks.onTotalScrollBackOffset,whileScrolling_Callback:e.callbacks.whileScrolling,bindEvent_scrollbar_drag:false,bindEvent_content_touch:false,bindEvent_scrollbar_click:false,bindEvent_mousewheel:false,bindEvent_buttonsContinuous_y:false,bindEvent_buttonsContinuous_x:false,bindEvent_buttonsPixels_y:false,bindEvent_buttonsPixels_x:false,bindEvent_focusin:false,bindEvent_autoHideScrollbar:false,mCSB_buttonScrollRight:false,mCSB_buttonScrollLeft:false,mCSB_buttonScrollDown:false,mCSB_buttonScrollUp:false});if(e.horizontalScroll){if(m.css("max-width")!=="none"){if(!e.advanced.updateOnContentResize){e.advanced.updateOnContentResize=true}}}else{if(m.css("max-height")!=="none"){var s=false,r=parseInt(m.css("max-height"));if(m.css("max-height").indexOf("%")>=0){s=r,r=m.parent().height()*s/100}m.css("overflow","hidden");g.css("max-height",r)}}m.mCustomScrollbar("update");if(e.advanced.updateOnBrowserResize){var i,j=c(window).width(),u=c(window).height();c(window).bind("resize."+m.data("mCustomScrollbarIndex"),function(){if(i){clearTimeout(i)}i=setTimeout(function(){if(!m.is(".mCS_disabled")&&!m.is(".mCS_destroyed")){var w=c(window).width(),v=c(window).height();if(j!==w||u!==v){if(m.css("max-height")!=="none"&&s){g.css("max-height",m.parent().height()*s/100)}m.mCustomScrollbar("update");j=w;u=v}}},150)})}if(e.advanced.updateOnContentResize){var p;if(e.horizontalScroll){var n=o.outerWidth()}else{var n=o.outerHeight()}p=setInterval(function(){if(e.horizontalScroll){if(e.advanced.autoExpandHorizontalScroll){o.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:o.outerWidth(),position:"relative"}).unwrap()}var v=o.outerWidth()}else{var v=o.outerHeight()}if(v!=n){m.mCustomScrollbar("update");n=v}},300)}})},update:function(){var n=c(this),k=n.children(".mCustomScrollBox"),q=k.children(".mCSB_container");q.removeClass("mCS_no_scrollbar");n.removeClass("mCS_disabled mCS_destroyed");k.scrollTop(0).scrollLeft(0);var y=k.children(".mCSB_scrollTools"),o=y.children(".mCSB_draggerContainer"),m=o.children(".mCSB_dragger");if(n.data("horizontalScroll")){var A=y.children(".mCSB_buttonLeft"),t=y.children(".mCSB_buttonRight"),f=k.width();if(n.data("autoExpandHorizontalScroll")){q.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:q.outerWidth(),position:"relative"}).unwrap()}var z=q.outerWidth()}else{var w=y.children(".mCSB_buttonUp"),g=y.children(".mCSB_buttonDown"),r=k.height(),i=q.outerHeight()}if(i>r&&!n.data("horizontalScroll")){y.css("display","block");var s=o.height();if(n.data("autoDraggerLength")){var u=Math.round(r/i*s),l=m.data("minDraggerHeight");if(u<=l){m.css({height:l})}else{if(u>=s-10){var p=s-10;m.css({height:p})}else{m.css({height:u})}}m.children(".mCSB_dragger_bar").css({"line-height":m.height()+"px"})}var B=m.height(),x=(i-r)/(s-B);n.data("scrollAmount",x).mCustomScrollbar("scrolling",k,q,o,m,w,g,A,t);var D=Math.abs(q.position().top);n.mCustomScrollbar("scrollTo",D,{scrollInertia:0,trigger:"internal"})}else{if(z>f&&n.data("horizontalScroll")){y.css("display","block");var h=o.width();if(n.data("autoDraggerLength")){var j=Math.round(f/z*h),C=m.data("minDraggerWidth");if(j<=C){m.css({width:C})}else{if(j>=h-10){var e=h-10;m.css({width:e})}else{m.css({width:j})}}}var v=m.width(),x=(z-f)/(h-v);n.data("scrollAmount",x).mCustomScrollbar("scrolling",k,q,o,m,w,g,A,t);var D=Math.abs(q.position().left);n.mCustomScrollbar("scrollTo",D,{scrollInertia:0,trigger:"internal"})}else{k.unbind("mousewheel focusin");if(n.data("horizontalScroll")){m.add(q).css("left",0)}else{m.add(q).css("top",0)}y.css("display","none");q.addClass("mCS_no_scrollbar");n.data({bindEvent_mousewheel:false,bindEvent_focusin:false})}}},scrolling:function(h,p,m,j,w,e,A,v){var k=c(this);if(!k.data("bindEvent_scrollbar_drag")){var n,o;if(c.support.msPointer){j.bind("MSPointerDown",function(H){H.preventDefault();k.data({on_drag:true});j.addClass("mCSB_dragger_onDrag");var G=c(this),J=G.offset(),F=H.originalEvent.pageX-J.left,I=H.originalEvent.pageY-J.top;if(F<G.width()&&F>0&&I<G.height()&&I>0){n=I;o=F}});c(document).bind("MSPointerMove."+k.data("mCustomScrollbarIndex"),function(H){H.preventDefault();if(k.data("on_drag")){var G=j,J=G.offset(),F=H.originalEvent.pageX-J.left,I=H.originalEvent.pageY-J.top;D(n,o,I,F)}}).bind("MSPointerUp."+k.data("mCustomScrollbarIndex"),function(x){k.data({on_drag:false});j.removeClass("mCSB_dragger_onDrag")})}else{j.bind("mousedown touchstart",function(H){H.preventDefault();H.stopImmediatePropagation();var G=c(this),K=G.offset(),F,J;if(H.type==="touchstart"){var I=H.originalEvent.touches[0]||H.originalEvent.changedTouches[0];F=I.pageX-K.left;J=I.pageY-K.top}else{k.data({on_drag:true});j.addClass("mCSB_dragger_onDrag");F=H.pageX-K.left;J=H.pageY-K.top}if(F<G.width()&&F>0&&J<G.height()&&J>0){n=J;o=F}}).bind("touchmove",function(H){H.preventDefault();H.stopImmediatePropagation();var K=H.originalEvent.touches[0]||H.originalEvent.changedTouches[0],G=c(this),J=G.offset(),F=K.pageX-J.left,I=K.pageY-J.top;D(n,o,I,F)});c(document).bind("mousemove."+k.data("mCustomScrollbarIndex"),function(H){if(k.data("on_drag")){var G=j,J=G.offset(),F=H.pageX-J.left,I=H.pageY-J.top;D(n,o,I,F)}}).bind("mouseup."+k.data("mCustomScrollbarIndex"),function(x){k.data({on_drag:false});j.removeClass("mCSB_dragger_onDrag")})}k.data({bindEvent_scrollbar_drag:true})}function D(G,H,I,F){if(k.data("horizontalScroll")){k.mCustomScrollbar("scrollTo",(j.position().left-(H))+F,{moveDragger:true,trigger:"internal"})}else{k.mCustomScrollbar("scrollTo",(j.position().top-(G))+I,{moveDragger:true,trigger:"internal"})}}if(c.support.touch&&k.data("contentTouchScroll")){if(!k.data("bindEvent_content_touch")){var l,B,r,s,u,C,E;p.bind("touchstart",function(x){x.stopImmediatePropagation();l=x.originalEvent.touches[0]||x.originalEvent.changedTouches[0];B=c(this);r=B.offset();u=l.pageX-r.left;s=l.pageY-r.top;C=s;E=u});p.bind("touchmove",function(x){x.preventDefault();x.stopImmediatePropagation();l=x.originalEvent.touches[0]||x.originalEvent.changedTouches[0];B=c(this).parent();r=B.offset();u=l.pageX-r.left;s=l.pageY-r.top;if(k.data("horizontalScroll")){k.mCustomScrollbar("scrollTo",E-u,{trigger:"internal"})}else{k.mCustomScrollbar("scrollTo",C-s,{trigger:"internal"})}})}}if(!k.data("bindEvent_scrollbar_click")){m.bind("click",function(F){var x=(F.pageY-m.offset().top)*k.data("scrollAmount"),y=c(F.target);if(k.data("horizontalScroll")){x=(F.pageX-m.offset().left)*k.data("scrollAmount")}if(y.hasClass("mCSB_draggerContainer")||y.hasClass("mCSB_draggerRail")){k.mCustomScrollbar("scrollTo",x,{trigger:"internal",scrollEasing:"draggerRailEase"})}});k.data({bindEvent_scrollbar_click:true})}if(k.data("mouseWheel")){if(!k.data("bindEvent_mousewheel")){h.bind("mousewheel",function(H,J){var G,F=k.data("mouseWheelPixels"),x=Math.abs(p.position().top),I=j.position().top,y=m.height()-j.height();if(k.data("normalizeMouseWheelDelta")){if(J<0){J=-1}else{J=1}}if(F==="auto"){F=100+Math.round(k.data("scrollAmount")/2)}if(k.data("horizontalScroll")){I=j.position().left;y=m.width()-j.width();x=Math.abs(p.position().left)}if((J>0&&I!==0)||(J<0&&I!==y)){H.preventDefault();H.stopImmediatePropagation()}G=x-(J*F);k.mCustomScrollbar("scrollTo",G,{trigger:"internal"})});k.data({bindEvent_mousewheel:true})}}if(k.data("scrollButtons_enable")){if(k.data("scrollButtons_scrollType")==="pixels"){if(k.data("horizontalScroll")){v.add(A).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend",i,g);k.data({bindEvent_buttonsContinuous_x:false});if(!k.data("bindEvent_buttonsPixels_x")){v.bind("click",function(x){x.preventDefault();q(Math.abs(p.position().left)+k.data("scrollButtons_scrollAmount"))});A.bind("click",function(x){x.preventDefault();q(Math.abs(p.position().left)-k.data("scrollButtons_scrollAmount"))});k.data({bindEvent_buttonsPixels_x:true})}}else{e.add(w).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend",i,g);k.data({bindEvent_buttonsContinuous_y:false});if(!k.data("bindEvent_buttonsPixels_y")){e.bind("click",function(x){x.preventDefault();q(Math.abs(p.position().top)+k.data("scrollButtons_scrollAmount"))});w.bind("click",function(x){x.preventDefault();q(Math.abs(p.position().top)-k.data("scrollButtons_scrollAmount"))});k.data({bindEvent_buttonsPixels_y:true})}}function q(x){if(!j.data("preventAction")){j.data("preventAction",true);k.mCustomScrollbar("scrollTo",x,{trigger:"internal"})}}}else{if(k.data("horizontalScroll")){v.add(A).unbind("click");k.data({bindEvent_buttonsPixels_x:false});if(!k.data("bindEvent_buttonsContinuous_x")){v.bind("mousedown touchstart MSPointerDown",function(y){y.preventDefault();var x=z();k.data({mCSB_buttonScrollRight:setInterval(function(){k.mCustomScrollbar("scrollTo",Math.abs(p.position().left)+x,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var i=function(x){x.preventDefault();clearInterval(k.data("mCSB_buttonScrollRight"))};v.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",i);A.bind("mousedown touchstart MSPointerDown",function(y){y.preventDefault();var x=z();k.data({mCSB_buttonScrollLeft:setInterval(function(){k.mCustomScrollbar("scrollTo",Math.abs(p.position().left)-x,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var g=function(x){x.preventDefault();clearInterval(k.data("mCSB_buttonScrollLeft"))};A.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",g);k.data({bindEvent_buttonsContinuous_x:true})}}else{e.add(w).unbind("click");k.data({bindEvent_buttonsPixels_y:false});if(!k.data("bindEvent_buttonsContinuous_y")){e.bind("mousedown touchstart MSPointerDown",function(y){y.preventDefault();var x=z();k.data({mCSB_buttonScrollDown:setInterval(function(){k.mCustomScrollbar("scrollTo",Math.abs(p.position().top)+x,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var t=function(x){x.preventDefault();clearInterval(k.data("mCSB_buttonScrollDown"))};e.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",t);w.bind("mousedown touchstart MSPointerDown",function(y){y.preventDefault();var x=z();k.data({mCSB_buttonScrollUp:setInterval(function(){k.mCustomScrollbar("scrollTo",Math.abs(p.position().top)-x,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var f=function(x){x.preventDefault();clearInterval(k.data("mCSB_buttonScrollUp"))};w.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",f);k.data({bindEvent_buttonsContinuous_y:true})}}function z(){var x=k.data("scrollButtons_scrollSpeed");if(k.data("scrollButtons_scrollSpeed")==="auto"){x=Math.round((k.data("scrollInertia")+100)/40)}return x}}}if(k.data("autoScrollOnFocus")){if(!k.data("bindEvent_focusin")){h.bind("focusin",function(){h.scrollTop(0).scrollLeft(0);var x=c(document.activeElement);if(x.is("input,textarea,select,button,a[tabindex],area,object")){var G=p.position().top,y=x.position().top,F=h.height()-x.outerHeight();if(k.data("horizontalScroll")){G=p.position().left;y=x.position().left;F=h.width()-x.outerWidth()}if(G+y<0||G+y>F){k.mCustomScrollbar("scrollTo",y,{trigger:"internal"})}}});k.data({bindEvent_focusin:true})}}if(k.data("autoHideScrollbar")){if(!k.data("bindEvent_autoHideScrollbar")){h.bind("mouseenter",function(x){h.addClass("mCS-mouse-over");d.showScrollbar.call(h.children(".mCSB_scrollTools"))}).bind("mouseleave touchend",function(x){h.removeClass("mCS-mouse-over");if(x.type==="mouseleave"){d.hideScrollbar.call(h.children(".mCSB_scrollTools"))}});k.data({bindEvent_autoHideScrollbar:true})}}},scrollTo:function(e,f){var i=c(this),o={moveDragger:false,trigger:"external",callbacks:true,scrollInertia:i.data("scrollInertia"),scrollEasing:i.data("scrollEasing")},f=c.extend(o,f),p,g=i.children(".mCustomScrollBox"),k=g.children(".mCSB_container"),r=g.children(".mCSB_scrollTools"),j=r.children(".mCSB_draggerContainer"),h=j.children(".mCSB_dragger"),t=draggerSpeed=f.scrollInertia,q,s,m,l;if(!k.hasClass("mCS_no_scrollbar")){i.data({mCS_trigger:f.trigger});if(i.data("mCS_Init")){f.callbacks=false}if(e||e===0){if(typeof(e)==="number"){if(f.moveDragger){p=e;if(i.data("horizontalScroll")){e=h.position().left*i.data("scrollAmount")}else{e=h.position().top*i.data("scrollAmount")}draggerSpeed=0}else{p=e/i.data("scrollAmount")}}else{if(typeof(e)==="string"){var v;if(e==="top"){v=0}else{if(e==="bottom"&&!i.data("horizontalScroll")){v=k.outerHeight()-g.height()}else{if(e==="left"){v=0}else{if(e==="right"&&i.data("horizontalScroll")){v=k.outerWidth()-g.width()}else{if(e==="first"){v=i.find(".mCSB_container").find(":first")}else{if(e==="last"){v=i.find(".mCSB_container").find(":last")}else{v=i.find(e)}}}}}}if(v.length===1){if(i.data("horizontalScroll")){e=v.position().left}else{e=v.position().top}p=e/i.data("scrollAmount")}else{p=e=v}}}if(i.data("horizontalScroll")){if(i.data("onTotalScrollBack_Offset")){s=-i.data("onTotalScrollBack_Offset")}if(i.data("onTotalScroll_Offset")){l=g.width()-k.outerWidth()+i.data("onTotalScroll_Offset")}if(p<0){p=e=0;clearInterval(i.data("mCSB_buttonScrollLeft"));if(!s){q=true}}else{if(p>=j.width()-h.width()){p=j.width()-h.width();e=g.width()-k.outerWidth();clearInterval(i.data("mCSB_buttonScrollRight"));if(!l){m=true}}else{e=-e}}var n=i.data("snapAmount");if(n){e=Math.round(e/n)*n-i.data("snapOffset")}d.mTweenAxis.call(this,h[0],"left",Math.round(p),draggerSpeed,f.scrollEasing);d.mTweenAxis.call(this,k[0],"left",Math.round(e),t,f.scrollEasing,{onStart:function(){if(f.callbacks&&!i.data("mCS_tweenRunning")){u("onScrollStart")}if(i.data("autoHideScrollbar")){d.showScrollbar.call(r)}},onUpdate:function(){if(f.callbacks){u("whileScrolling")}},onComplete:function(){if(f.callbacks){u("onScroll");if(q||(s&&k.position().left>=s)){u("onTotalScrollBack")}if(m||(l&&k.position().left<=l)){u("onTotalScroll")}}h.data("preventAction",false);i.data("mCS_tweenRunning",false);if(i.data("autoHideScrollbar")){if(!g.hasClass("mCS-mouse-over")){d.hideScrollbar.call(r)}}}})}else{if(i.data("onTotalScrollBack_Offset")){s=-i.data("onTotalScrollBack_Offset")}if(i.data("onTotalScroll_Offset")){l=g.height()-k.outerHeight()+i.data("onTotalScroll_Offset")}if(p<0){p=e=0;clearInterval(i.data("mCSB_buttonScrollUp"));if(!s){q=true}}else{if(p>=j.height()-h.height()){p=j.height()-h.height();e=g.height()-k.outerHeight();clearInterval(i.data("mCSB_buttonScrollDown"));if(!l){m=true}}else{e=-e}}var n=i.data("snapAmount");if(n){e=Math.round(e/n)*n-i.data("snapOffset")}d.mTweenAxis.call(this,h[0],"top",Math.round(p),draggerSpeed,f.scrollEasing);d.mTweenAxis.call(this,k[0],"top",Math.round(e),t,f.scrollEasing,{onStart:function(){if(f.callbacks&&!i.data("mCS_tweenRunning")){u("onScrollStart")}if(i.data("autoHideScrollbar")){d.showScrollbar.call(r)}},onUpdate:function(){if(f.callbacks){u("whileScrolling")}},onComplete:function(){if(f.callbacks){u("onScroll");if(q||(s&&k.position().top>=s)){u("onTotalScrollBack")}if(m||(l&&k.position().top<=l)){u("onTotalScroll")}}h.data("preventAction",false);i.data("mCS_tweenRunning",false);if(i.data("autoHideScrollbar")){if(!g.hasClass("mCS-mouse-over")){d.hideScrollbar.call(r)}}}})}if(i.data("mCS_Init")){i.data({mCS_Init:false})}}}function u(w){this.mcs={top:k.position().top,left:k.position().left,draggerTop:h.position().top,draggerLeft:h.position().left,topPct:Math.round((100*Math.abs(k.position().top))/Math.abs(k.outerHeight()-g.height())),leftPct:Math.round((100*Math.abs(k.position().left))/Math.abs(k.outerWidth()-g.width()))};switch(w){case"onScrollStart":i.data("mCS_tweenRunning",true).data("onScrollStart_Callback").call(i,this.mcs);break;case"whileScrolling":i.data("whileScrolling_Callback").call(i,this.mcs);break;case"onScroll":i.data("onScroll_Callback").call(i,this.mcs);break;case"onTotalScrollBack":i.data("onTotalScrollBack_Callback").call(i,this.mcs);break;case"onTotalScroll":i.data("onTotalScroll_Callback").call(i,this.mcs);break}}},stop:function(){var g=c(this),e=g.children().children(".mCSB_container"),f=g.children().children().children().children(".mCSB_dragger");d.mTweenAxisStop.call(this,e[0]);d.mTweenAxisStop.call(this,f[0])},disable:function(e){var j=c(this),f=j.children(".mCustomScrollBox"),h=f.children(".mCSB_container"),g=f.children(".mCSB_scrollTools"),i=g.children().children(".mCSB_dragger");f.unbind("mousewheel focusin mouseenter mouseleave touchend");h.unbind("touchstart touchmove");if(e){if(j.data("horizontalScroll")){i.add(h).css("left",0)}else{i.add(h).css("top",0)}}g.css("display","none");h.addClass("mCS_no_scrollbar");j.data({bindEvent_mousewheel:false,bindEvent_focusin:false,bindEvent_content_touch:false,bindEvent_autoHideScrollbar:false}).addClass("mCS_disabled")},destroy:function(){var e=c(this);e.removeClass("mCustomScrollbar _mCS_"+e.data("mCustomScrollbarIndex")).addClass("mCS_destroyed").children().children(".mCSB_container").unwrap().children().unwrap().siblings(".mCSB_scrollTools").remove();c(document).unbind("mousemove."+e.data("mCustomScrollbarIndex")+" mouseup."+e.data("mCustomScrollbarIndex")+" MSPointerMove."+e.data("mCustomScrollbarIndex")+" MSPointerUp."+e.data("mCustomScrollbarIndex"));c(window).unbind("resize."+e.data("mCustomScrollbarIndex"))}},d={showScrollbar:function(){this.stop().animate({opacity:1},"fast")},hideScrollbar:function(){this.stop().animate({opacity:0},"fast")},mTweenAxis:function(g,i,h,f,o,y){var y=y||{},v=y.onStart||function(){},p=y.onUpdate||function(){},w=y.onComplete||function(){};var n=t(),l,j=0,r=g.offsetTop,s=g.style;if(i==="left"){r=g.offsetLeft}var m=h-r;q();e();function t(){if(window.performance&&window.performance.now){return window.performance.now()}else{if(window.performance&&window.performance.webkitNow){return window.performance.webkitNow()}else{if(Date.now){return Date.now()}else{return new Date().getTime()}}}}function x(){if(!j){v.call()}j=t()-n;u();if(j>=g._time){g._time=(j>g._time)?j+l-(j-g._time):j+l-1;if(g._time<j+1){g._time=j+1}}if(g._time<f){g._id=_request(x)}else{w.call()}}function u(){if(f>0){g.currVal=k(g._time,r,m,f,o);s[i]=Math.round(g.currVal)+"px"}else{s[i]=h+"px"}p.call()}function e(){l=1000/60;g._time=j+l;_request=(!window.requestAnimationFrame)?function(z){u();return setTimeout(z,0.01)}:window.requestAnimationFrame;g._id=_request(x)}function q(){if(g._id==null){return}if(!window.requestAnimationFrame){clearTimeout(g._id)}else{window.cancelAnimationFrame(g._id)}g._id=null}function k(B,A,F,E,C){switch(C){case"linear":return F*B/E+A;break;case"easeOutQuad":B/=E;return -F*B*(B-2)+A;break;case"easeInOutQuad":B/=E/2;if(B<1){return F/2*B*B+A}B--;return -F/2*(B*(B-2)-1)+A;break;case"easeOutCubic":B/=E;B--;return F*(B*B*B+1)+A;break;case"easeOutQuart":B/=E;B--;return -F*(B*B*B*B-1)+A;break;case"easeOutQuint":B/=E;B--;return F*(B*B*B*B*B+1)+A;break;case"easeOutCirc":B/=E;B--;return F*Math.sqrt(1-B*B)+A;break;case"easeOutSine":return F*Math.sin(B/E*(Math.PI/2))+A;break;case"easeOutExpo":return F*(-Math.pow(2,-10*B/E)+1)+A;break;case"mcsEaseOut":var D=(B/=E)*B,z=D*B;return A+F*(0.499999999999997*z*D+-2.5*D*D+5.5*z+-6.5*D+4*B);break;case"draggerRailEase":B/=E/2;if(B<1){return F/2*B*B*B+A}B-=2;return F/2*(B*B*B+2)+A;break}}},mTweenAxisStop:function(e){if(e._id==null){return}if(!window.requestAnimationFrame){clearTimeout(e._id)}else{window.cancelAnimationFrame(e._id)}e._id=null},rafPolyfill:function(){var f=["ms","moz","webkit","o"],e=f.length;while(--e>-1&&!window.requestAnimationFrame){window.requestAnimationFrame=window[f[e]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[f[e]+"CancelAnimationFrame"]||window[f[e]+"CancelRequestAnimationFrame"]}}};d.rafPolyfill.call();c.support.touch=!!("ontouchstart" in window);c.support.msPointer=window.navigator.msPointerEnabled;var a=("https:"==document.location.protocol)?"https:":"http:";c.event.special.mousewheel||document.write('<script src="'+a+'//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.0.6/jquery.mousewheel.min.js"><\/script>');c.fn.mCustomScrollbar=function(e){if(b[e]){return b[e].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof e==="object"||!e){return b.init.apply(this,arguments)}else{c.error("Method "+e+" does not exist")}}}})(jQuery);

/* jquery tooltip */
/*!
 * jQuery Tools v1.2.7 - The missing UI library for the Web
 *
 * tooltip/tooltip.js
 * tooltip/tooltip.dynamic.js
 * tooltip/tooltip.slide.js
 *
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 *
 * http://flowplayer.org/tools/
 *
 */

jQuery.browser = {};
(function () {
    jQuery.browser.msie = false;
    jQuery.browser.version = 0;
    if (navigator.userAgent.match(/MSIE ([0-9]+)\./)) {
        jQuery.browser.msie = true;
        jQuery.browser.version = RegExp.$1;
    }
})();

(function(a){a.tools=a.tools||{version:"v1.2.7"},a.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,fadeIE:!1,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(a,c,d){b[a]=[c,d]}};var b={toggle:[function(a){var b=this.getConf(),c=this.getTip(),d=b.opacity;d<1&&c.css({opacity:d}),c.show(),a.call()},function(a){this.getTip().hide(),a.call()}],fade:[function(b){var c=this.getConf();!a.browser.msie||c.fadeIE?this.getTip().fadeTo(c.fadeInSpeed,c.opacity,b):(this.getTip().show(),b())},function(b){var c=this.getConf();!a.browser.msie||c.fadeIE?this.getTip().fadeOut(c.fadeOutSpeed,b):(this.getTip().hide(),b())}]};function c(b,c,d){var e=d.relative?b.position().top:b.offset().top,f=d.relative?b.position().left:b.offset().left,g=d.position[0];e-=c.outerHeight()-d.offset[0],f+=b.outerWidth()+d.offset[1],/iPad/i.test(navigator.userAgent)&&(e-=a(window).scrollTop());var h=c.outerHeight()+b.outerHeight();g=="center"&&(e+=h/2),g=="bottom"&&(e+=h),g=d.position[1];var i=c.outerWidth()+b.outerWidth();g=="center"&&(f-=i/2),g=="left"&&(f-=i);return{top:e,left:f}}function d(d,e){var f=this,g=d.add(f),h,i=0,j=0,k=d.attr("title"),l=d.attr("data-tooltip"),m=b[e.effect],n,o=d.is(":input"),p=o&&d.is(":checkbox, :radio, select, :button, :submit"),q=d.attr("type"),r=e.events[q]||e.events[o?p?"widget":"input":"def"];if(!m)throw"Nonexistent effect \""+e.effect+"\"";r=r.split(/,\s*/);if(r.length!=2)throw"Tooltip: bad events configuration for "+q;d.on(r[0],function(a){clearTimeout(i),e.predelay?j=setTimeout(function(){f.show(a)},e.predelay):f.show(a)}).on(r[1],function(a){clearTimeout(j),e.delay?i=setTimeout(function(){f.hide(a)},e.delay):f.hide(a)}),k&&e.cancelDefault&&(d.removeAttr("title"),d.data("title",k)),a.extend(f,{show:function(b){if(!h){l?h=a(l):e.tip?h=a(e.tip).eq(0):k?h=a(e.layout).addClass(e.tipClass).appendTo(document.body).hide().append(k):(h=d.next(),h.length||(h=d.parent().next()));if(!h.length)throw"Cannot find tooltip for "+d}if(f.isShown())return f;h.stop(!0,!0);var o=c(d,h,e);e.tip&&h.html(d.data("title")),b=a.Event(),b.type="onBeforeShow",g.trigger(b,[o]);if(b.isDefaultPrevented())return f;o=c(d,h,e),h.css({position:"absolute",top:o.top,left:o.left}),n=!0,m[0].call(f,function(){b.type="onShow",n="full",g.trigger(b)});var p=e.events.tooltip.split(/,\s*/);h.data("__set")||(h.off(p[0]).on(p[0],function(){clearTimeout(i),clearTimeout(j)}),p[1]&&!d.is("input:not(:checkbox, :radio), textarea")&&h.off(p[1]).on(p[1],function(a){a.relatedTarget!=d[0]&&d.trigger(r[1].split(" ")[0])}),e.tip||h.data("__set",!0));return f},hide:function(c){if(!h||!f.isShown())return f;c=a.Event(),c.type="onBeforeHide",g.trigger(c);if(!c.isDefaultPrevented()){n=!1,b[e.effect][1].call(f,function(){c.type="onHide",g.trigger(c)});return f}},isShown:function(a){return a?n=="full":n},getConf:function(){return e},getTip:function(){return h},getTrigger:function(){return d}}),a.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(b,c){a.isFunction(e[c])&&a(f).on(c,e[c]),f[c]=function(b){b&&a(f).on(c,b);return f}})}a.fn.tooltip=function(b){var c=this.data("tooltip");if(c)return c;b=a.extend(!0,{},a.tools.tooltip.conf,b),typeof b.position=="string"&&(b.position=b.position.split(/,?\s/)),this.each(function(){c=new d(a(this),b),a(this).data("tooltip",c)});return b.api?c:this}})(jQuery);
(function(a){var b=a.tools.tooltip;b.dynamic={conf:{classNames:"top right bottom left"}};function c(b){var c=a(window),d=c.width()+c.scrollLeft(),e=c.height()+c.scrollTop();return[b.offset().top<=c.scrollTop(),d<=b.offset().left+b.width(),e<=b.offset().top+b.height(),c.scrollLeft()>=b.offset().left]}function d(a){var b=a.length;while(b--)if(a[b])return!1;return!0}a.fn.dynamic=function(e){typeof e=="number"&&(e={speed:e}),e=a.extend({},b.dynamic.conf,e);var f=a.extend(!0,{},e),g=e.classNames.split(/\s/),h;this.each(function(){var b=a(this).tooltip().onBeforeShow(function(b,e){var i=this.getTip(),j=this.getConf();h||(h=[j.position[0],j.position[1],j.offset[0],j.offset[1],a.extend({},j)]),a.extend(j,h[4]),j.position=[h[0],h[1]],j.offset=[h[2],h[3]],i.css({visibility:"hidden",position:"absolute",top:e.top,left:e.left}).show();var k=a.extend(!0,{},f),l=c(i);if(!d(l)){l[2]&&(a.extend(j,k.top),j.position[0]="top",i.addClass(g[0])),l[3]&&(a.extend(j,k.right),j.position[1]="right",i.addClass(g[1])),l[0]&&(a.extend(j,k.bottom),j.position[0]="bottom",i.addClass(g[2])),l[1]&&(a.extend(j,k.left),j.position[1]="left",i.addClass(g[3]));if(l[0]||l[2])j.offset[0]*=-1;if(l[1]||l[3])j.offset[1]*=-1}i.css({visibility:"visible"}).hide()});b.onBeforeShow(function(){var a=this.getConf(),b=this.getTip();setTimeout(function(){a.position=[h[0],h[1]],a.offset=[h[2],h[3]]},0)}),b.onHide(function(){var a=this.getTip();a.removeClass(e.classNames)}),ret=b});return e.api?ret:this}})(jQuery);
(function(a){var b=a.tools.tooltip;a.extend(b.conf,{direction:"up",bounce:!1,slideOffset:10,slideInSpeed:200,slideOutSpeed:200,slideFade:!a.browser.msie});var c={up:["-","top"],down:["+","top"],left:["-","left"],right:["+","left"]};b.addEffect("slide",function(a){var b=this.getConf(),d=this.getTip(),e=b.slideFade?{opacity:b.opacity}:{},f=c[b.direction]||c.up;e[f[1]]=f[0]+"="+b.slideOffset,b.slideFade&&d.css({opacity:0}),d.show().animate(e,b.slideInSpeed,a)},function(b){var d=this.getConf(),e=d.slideOffset,f=d.slideFade?{opacity:0}:{},g=c[d.direction]||c.up,h=""+g[0];d.bounce&&(h=h=="+"?"-":"+"),f[g[1]]=h+"="+e,this.getTip().animate(f,d.slideOutSpeed,function(){a(this).hide(),b.call()})})})(jQuery);

/* jqueryCarouFredSel.js 6.2.1 */
(function($){function sc_setScroll(e,t,n){if(n.transition=="transition"){if(t=="swing"){t="ease"}}return{anims:[],duration:e,orgDuration:e,easing:t,startTime:getTime()}}function sc_startScroll(e,t){for(var n=0,r=e.anims.length;n<r;n++){var i=e.anims[n];if(!i){continue}i[0][t.transition](i[1],e.duration,e.easing,i[2])}}function sc_stopScroll(e,t){if(!is_boolean(t)){t=true}if(is_object(e.pre)){sc_stopScroll(e.pre,t)}for(var n=0,r=e.anims.length;n<r;n++){var i=e.anims[n];i[0].stop(true);if(t){i[0].css(i[1]);if(is_function(i[2])){i[2]()}}}if(is_object(e.post)){sc_stopScroll(e.post,t)}}function sc_afterScroll(e,t,n){if(t){t.remove()}switch(n.fx){case"fade":case"crossfade":case"cover-fade":case"uncover-fade":e.css("opacity",1);e.css("filter","");break}}function sc_fireCallbacks(e,t,n,r,i){if(t[n]){t[n].call(e,r)}if(i[n].length){for(var s=0,o=i[n].length;s<o;s++){i[n][s].call(e,r)}}return[]}function sc_fireQueue(e,t,n){if(t.length){e.trigger(cf_e(t[0][0],n),t[0][1]);t.shift()}return t}function sc_hideHiddenItems(e){e.each(function(){var e=$(this);e.data("_cfs_isHidden",e.is(":hidden")).hide()})}function sc_showHiddenItems(e){if(e){e.each(function(){var e=$(this);if(!e.data("_cfs_isHidden")){e.show()}})}}function sc_clearTimers(e){if(e.auto){clearTimeout(e.auto)}if(e.progress){clearInterval(e.progress)}return e}function sc_mapCallbackArguments(e,t,n,r,i,s,o){return{width:o.width,height:o.height,items:{old:e,skipped:t,visible:n},scroll:{items:r,direction:i,duration:s}}}function sc_getDuration(e,t,n,r){var i=e.duration;if(e.fx=="none"){return 0}if(i=="auto"){i=t.scroll.duration/t.scroll.items*n}else if(i<10){i=r/i}if(i<1){return 0}if(e.fx=="fade"){i=i/2}return Math.round(i)}function nv_showNavi(e,t,n){var r=is_number(e.items.minimum)?e.items.minimum:e.items.visible+1;if(t=="show"||t=="hide"){var i=t}else if(r>t){debug(n,"Not enough items ("+t+" total, "+r+" needed): Hiding navigation.");var i="hide"}else{var i="show"}var s=i=="show"?"removeClass":"addClass",o=cf_c("hidden",n);if(e.auto.button){e.auto.button[i]()[s](o)}if(e.prev.button){e.prev.button[i]()[s](o)}if(e.next.button){e.next.button[i]()[s](o)}if(e.pagination.container){e.pagination.container[i]()[s](o)}}function nv_enableNavi(e,t,n){if(e.circular||e.infinite)return;var r=t=="removeClass"||t=="addClass"?t:false,i=cf_c("disabled",n);if(e.auto.button&&r){e.auto.button[r](i)}if(e.prev.button){var s=r||t==0?"addClass":"removeClass";e.prev.button[s](i)}if(e.next.button){var s=r||t==e.items.visible?"addClass":"removeClass";e.next.button[s](i)}}function go_getObject(e,t){if(is_function(t)){t=t.call(e)}else if(is_undefined(t)){t={}}return t}function go_getItemsObject(e,t){t=go_getObject(e,t);if(is_number(t)){t={visible:t}}else if(t=="variable"){t={visible:t,width:t,height:t}}else if(!is_object(t)){t={}}return t}function go_getScrollObject(e,t){t=go_getObject(e,t);if(is_number(t)){if(t<=50){t={items:t}}else{t={duration:t}}}else if(is_string(t)){t={easing:t}}else if(!is_object(t)){t={}}return t}function go_getNaviObject(e,t){t=go_getObject(e,t);if(is_string(t)){var n=cf_getKeyCode(t);if(n==-1){t=$(t)}else{t=n}}return t}function go_getAutoObject(e,t){t=go_getNaviObject(e,t);if(is_jquery(t)){t={button:t}}else if(is_boolean(t)){t={play:t}}else if(is_number(t)){t={timeoutDuration:t}}if(t.progress){if(is_string(t.progress)||is_jquery(t.progress)){t.progress={bar:t.progress}}}return t}function go_complementAutoObject(e,t){if(is_function(t.button)){t.button=t.button.call(e)}if(is_string(t.button)){t.button=$(t.button)}if(!is_boolean(t.play)){t.play=true}if(!is_number(t.delay)){t.delay=0}if(is_undefined(t.pauseOnEvent)){t.pauseOnEvent=true}if(!is_boolean(t.pauseOnResize)){t.pauseOnResize=true}if(!is_number(t.timeoutDuration)){t.timeoutDuration=t.duration<10?2500:t.duration*5}if(t.progress){if(is_function(t.progress.bar)){t.progress.bar=t.progress.bar.call(e)}if(is_string(t.progress.bar)){t.progress.bar=$(t.progress.bar)}if(t.progress.bar){if(!is_function(t.progress.updater)){t.progress.updater=$.fn.carouFredSel.progressbarUpdater}if(!is_number(t.progress.interval)){t.progress.interval=50}}else{t.progress=false}}return t}function go_getPrevNextObject(e,t){t=go_getNaviObject(e,t);if(is_jquery(t)){t={button:t}}else if(is_number(t)){t={key:t}}return t}function go_complementPrevNextObject(e,t){if(is_function(t.button)){t.button=t.button.call(e)}if(is_string(t.button)){t.button=$(t.button)}if(is_string(t.key)){t.key=cf_getKeyCode(t.key)}return t}function go_getPaginationObject(e,t){t=go_getNaviObject(e,t);if(is_jquery(t)){t={container:t}}else if(is_boolean(t)){t={keys:t}}return t}function go_complementPaginationObject(e,t){if(is_function(t.container)){t.container=t.container.call(e)}if(is_string(t.container)){t.container=$(t.container)}if(!is_number(t.items)){t.items=false}if(!is_boolean(t.keys)){t.keys=false}if(!is_function(t.anchorBuilder)&&!is_false(t.anchorBuilder)){t.anchorBuilder=$.fn.carouFredSel.pageAnchorBuilder}if(!is_number(t.deviation)){t.deviation=0}return t}function go_getSwipeObject(e,t){if(is_function(t)){t=t.call(e)}if(is_undefined(t)){t={onTouch:false}}if(is_true(t)){t={onTouch:t}}else if(is_number(t)){t={items:t}}return t}function go_complementSwipeObject(e,t){if(!is_boolean(t.onTouch)){t.onTouch=true}if(!is_boolean(t.onMouse)){t.onMouse=false}if(!is_object(t.options)){t.options={}}if(!is_boolean(t.options.triggerOnTouchEnd)){t.options.triggerOnTouchEnd=false}return t}function go_getMousewheelObject(e,t){if(is_function(t)){t=t.call(e)}if(is_true(t)){t={}}else if(is_number(t)){t={items:t}}else if(is_undefined(t)){t=false}return t}function go_complementMousewheelObject(e,t){return t}function gn_getItemIndex(e,t,n,r,i){if(is_string(e)){e=$(e,i)}if(is_object(e)){e=$(e,i)}if(is_jquery(e)){e=i.children().index(e);if(!is_boolean(n)){n=false}}else{if(!is_boolean(n)){n=true}}if(!is_number(e)){e=0}if(!is_number(t)){t=0}if(n){e+=r.first}e+=t;if(r.total>0){while(e>=r.total){e-=r.total}while(e<0){e+=r.total}}return e}function gn_getVisibleItemsPrev(e,t,n){var r=0,i=0;for(var s=n;s>=0;s--){var o=e.eq(s);r+=o.is(":visible")?o[t.d["outerWidth"]](true):0;if(r>t.maxDimension){return i}if(s==0){s=e.length}i++}}function gn_getVisibleItemsPrevFilter(e,t,n){return gn_getItemsPrevFilter(e,t.items.filter,t.items.visibleConf.org,n)}function gn_getScrollItemsPrevFilter(e,t,n,r){return gn_getItemsPrevFilter(e,t.items.filter,r,n)}function gn_getItemsPrevFilter(e,t,n,r){var i=0,s=0;for(var o=r,u=e.length;o>=0;o--){s++;if(s==u){return s}var a=e.eq(o);if(a.is(t)){i++;if(i==n){return s}}if(o==0){o=u}}}function gn_getVisibleOrg(e,t){return t.items.visibleConf.org||e.children().slice(0,t.items.visible).filter(t.items.filter).length}function gn_getVisibleItemsNext(e,t,n){var r=0,i=0;for(var s=n,o=e.length-1;s<=o;s++){var u=e.eq(s);r+=u.is(":visible")?u[t.d["outerWidth"]](true):0;if(r>t.maxDimension){return i}i++;if(i==o+1){return i}if(s==o){s=-1}}}function gn_getVisibleItemsNextTestCircular(e,t,n,r){var i=gn_getVisibleItemsNext(e,t,n);if(!t.circular){if(n+i>r){i=r-n}}return i}function gn_getVisibleItemsNextFilter(e,t,n){return gn_getItemsNextFilter(e,t.items.filter,t.items.visibleConf.org,n,t.circular)}function gn_getScrollItemsNextFilter(e,t,n,r){return gn_getItemsNextFilter(e,t.items.filter,r+1,n,t.circular)-1}function gn_getItemsNextFilter(e,t,n,r,i){var s=0,o=0;for(var u=r,a=e.length-1;u<=a;u++){o++;if(o>=a){return o}var f=e.eq(u);if(f.is(t)){s++;if(s==n){return o}}if(u==a){u=-1}}}function gi_getCurrentItems(e,t){return e.slice(0,t.items.visible)}function gi_getOldItemsPrev(e,t,n){return e.slice(n,t.items.visibleConf.old+n)}function gi_getNewItemsPrev(e,t){return e.slice(0,t.items.visible)}function gi_getOldItemsNext(e,t){return e.slice(0,t.items.visibleConf.old)}function gi_getNewItemsNext(e,t,n){return e.slice(n,t.items.visible+n)}function sz_storeMargin(e,t,n){if(t.usePadding){if(!is_string(n)){n="_cfs_origCssMargin"}e.each(function(){var e=$(this),r=parseInt(e.css(t.d["marginRight"]),10);if(!is_number(r)){r=0}e.data(n,r)})}}function sz_resetMargin(e,t,n){if(t.usePadding){var r=is_boolean(n)?n:false;if(!is_number(n)){n=0}sz_storeMargin(e,t,"_cfs_tempCssMargin");e.each(function(){var e=$(this);e.css(t.d["marginRight"],r?e.data("_cfs_tempCssMargin"):n+e.data("_cfs_origCssMargin"))})}}function sz_storeOrigCss(e){e.each(function(){var e=$(this);e.data("_cfs_origCss",e.attr("style")||"")})}function sz_restoreOrigCss(e){e.each(function(){var e=$(this);e.attr("style",e.data("_cfs_origCss")||"")})}function sz_setResponsiveSizes(e,t){var n=e.items.visible,r=e.items[e.d["width"]],i=e[e.d["height"]],s=is_percentage(i);t.each(function(){var t=$(this),n=r-ms_getPaddingBorderMargin(t,e,"Width");t[e.d["width"]](n);if(s){t[e.d["height"]](ms_getPercentage(n,i))}})}function sz_setSizes(e,t){var n=e.parent(),r=e.children(),i=gi_getCurrentItems(r,t),s=cf_mapWrapperSizes(ms_getSizes(i,t,true),t,false);n.css(s);if(t.usePadding){var o=t.padding,u=o[t.d[1]];if(t.align&&u<0){u=0}var a=i.last();a.css(t.d["marginRight"],a.data("_cfs_origCssMargin")+u);e.css(t.d["top"],o[t.d[0]]);e.css(t.d["left"],o[t.d[3]])}e.css(t.d["width"],s[t.d["width"]]+ms_getTotalSize(r,t,"width")*2);e.css(t.d["height"],ms_getLargestSize(r,t,"height"));return s}function ms_getSizes(e,t,n){return[ms_getTotalSize(e,t,"width",n),ms_getLargestSize(e,t,"height",n)]}function ms_getLargestSize(e,t,n,r){if(!is_boolean(r)){r=false}if(is_number(t[t.d[n]])&&r){return t[t.d[n]]}if(is_number(t.items[t.d[n]])){return t.items[t.d[n]]}n=n.toLowerCase().indexOf("width")>-1?"outerWidth":"outerHeight";return ms_getTrueLargestSize(e,t,n)}function ms_getTrueLargestSize(e,t,n){var r=0;for(var i=0,s=e.length;i<s;i++){var o=e.eq(i);var u=o.is(":visible")?o[t.d[n]](true):0;if(r<u){r=u}}return r}function ms_getTotalSize(e,t,n,r){if(!is_boolean(r)){r=false}if(is_number(t[t.d[n]])&&r){return t[t.d[n]]}if(is_number(t.items[t.d[n]])){return t.items[t.d[n]]*e.length}var i=n.toLowerCase().indexOf("width")>-1?"outerWidth":"outerHeight",s=0;for(var o=0,u=e.length;o<u;o++){var a=e.eq(o);s+=a.is(":visible")?a[t.d[i]](true):0}return s}function ms_getParentSize(e,t,n){var r=e.is(":visible");if(r){e.hide()}var i=e.parent()[t.d[n]]();if(r){e.show()}return i}function ms_getMaxDimension(e,t){return is_number(e[e.d["width"]])?e[e.d["width"]]:t}function ms_hasVariableSizes(e,t,n){var r=false,i=false;for(var s=0,o=e.length;s<o;s++){var u=e.eq(s);var a=u.is(":visible")?u[t.d[n]](true):0;if(r===false){r=a}else if(r!=a){i=true}if(r==0){i=true}}return i}function ms_getPaddingBorderMargin(e,t,n){return e[t.d["outer"+n]](true)-e[t.d[n.toLowerCase()]]()}function ms_getPercentage(e,t){if(is_percentage(t)){t=parseInt(t.slice(0,-1),10);if(!is_number(t)){return e}e*=t/100}return e}function cf_e(e,t,n,r,i){if(!is_boolean(n)){n=true}if(!is_boolean(r)){r=true}if(!is_boolean(i)){i=false}if(n){e=t.events.prefix+e}if(r){e=e+"."+t.events.namespace}if(r&&i){e+=t.serialNumber}return e}function cf_c(e,t){return is_string(t.classnames[e])?t.classnames[e]:e}function cf_mapWrapperSizes(e,t,n){if(!is_boolean(n)){n=true}var r=t.usePadding&&n?t.padding:[0,0,0,0];var i={};i[t.d["width"]]=e[0]+r[1]+r[3];i[t.d["height"]]=e[1]+r[0]+r[2];return i}function cf_sortParams(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){for(var s=0,o=t.length;s<o;s++){if(t[s].indexOf(typeof e[r])>-1&&is_undefined(n[s])){n[s]=e[r];break}}}return n}function cf_getPadding(e){if(is_undefined(e)){return[0,0,0,0]}if(is_number(e)){return[e,e,e,e]}if(is_string(e)){e=e.split("px").join("").split("em").join("").split(" ")}if(!is_array(e)){return[0,0,0,0]}for(var t=0;t<4;t++){e[t]=parseInt(e[t],10)}switch(e.length){case 0:return[0,0,0,0];case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];default:return[e[0],e[1],e[2],e[3]]}}function cf_getAlignPadding(e,t){var n=is_number(t[t.d["width"]])?Math.ceil(t[t.d["width"]]-ms_getTotalSize(e,t,"width")):0;switch(t.align){case"left":return[0,n];case"right":return[n,0];case"center":default:return[Math.ceil(n/2),Math.floor(n/2)]}}function cf_getDimensions(e){var t=[["width","innerWidth","outerWidth","height","innerHeight","outerHeight","left","top","marginRight",0,1,2,3],["height","innerHeight","outerHeight","width","innerWidth","outerWidth","top","left","marginBottom",3,2,1,0]];var n=t[0].length,r=e.direction=="right"||e.direction=="left"?0:1;var i={};for(var s=0;s<n;s++){i[t[0][s]]=t[r][s]}return i}function cf_getAdjust(e,t,n,r){var i=e;if(is_function(n)){i=n.call(r,i)}else if(is_string(n)){var s=n.split("+"),o=n.split("-");if(o.length>s.length){var u=true,a=o[0],f=o[1]}else{var u=false,a=s[0],f=s[1]}switch(a){case"even":i=e%2==1?e-1:e;break;case"odd":i=e%2==0?e-1:e;break;default:i=e;break}f=parseInt(f,10);if(is_number(f)){if(u){f=-f}i+=f}}if(!is_number(i)||i<1){i=1}return i}function cf_getItemsAdjust(e,t,n,r){return cf_getItemAdjustMinMax(cf_getAdjust(e,t,n,r),t.items.visibleConf)}function cf_getItemAdjustMinMax(e,t){if(is_number(t.min)&&e<t.min){e=t.min}if(is_number(t.max)&&e>t.max){e=t.max}if(e<1){e=1}return e}function cf_getSynchArr(e){if(!is_array(e)){e=[[e]]}if(!is_array(e[0])){e=[e]}for(var t=0,n=e.length;t<n;t++){if(is_string(e[t][0])){e[t][0]=$(e[t][0])}if(!is_boolean(e[t][1])){e[t][1]=true}if(!is_boolean(e[t][2])){e[t][2]=true}if(!is_number(e[t][3])){e[t][3]=0}}return e}function cf_getKeyCode(e){if(e=="right"){return 39}if(e=="left"){return 37}if(e=="up"){return 38}if(e=="down"){return 40}return-1}function cf_setCookie(e,t,n){if(e){var r=t.triggerHandler(cf_e("currentPosition",n));$.fn.carouFredSel.cookie.set(e,r)}}function cf_getCookie(e){var t=$.fn.carouFredSel.cookie.get(e);return t==""?0:t}function in_mapCss(e,t){var n={};for(var r=0,i=t.length;r<i;r++){n[t[r]]=e.css(t[r])}return n}function in_complementItems(e,t,n,r){if(!is_object(e.visibleConf)){e.visibleConf={}}if(!is_object(e.sizesConf)){e.sizesConf={}}if(e.start==0&&is_number(r)){e.start=r}if(is_object(e.visible)){e.visibleConf.min=e.visible.min;e.visibleConf.max=e.visible.max;e.visible=false}else if(is_string(e.visible)){if(e.visible=="variable"){e.visibleConf.variable=true}else{e.visibleConf.adjust=e.visible}e.visible=false}else if(is_function(e.visible)){e.visibleConf.adjust=e.visible;e.visible=false}if(!is_string(e.filter)){e.filter=n.filter(":hidden").length>0?":visible":"*"}if(!e[t.d["width"]]){if(t.responsive){debug(true,"Set a "+t.d["width"]+" for the items!");e[t.d["width"]]=ms_getTrueLargestSize(n,t,"outerWidth")}else{e[t.d["width"]]=ms_hasVariableSizes(n,t,"outerWidth")?"variable":n[t.d["outerWidth"]](true)}}if(!e[t.d["height"]]){e[t.d["height"]]=ms_hasVariableSizes(n,t,"outerHeight")?"variable":n[t.d["outerHeight"]](true)}e.sizesConf.width=e.width;e.sizesConf.height=e.height;return e}function in_complementVisibleItems(e,t){if(e.items[e.d["width"]]=="variable"){e.items.visibleConf.variable=true}if(!e.items.visibleConf.variable){if(is_number(e[e.d["width"]])){e.items.visible=Math.floor(e[e.d["width"]]/e.items[e.d["width"]])}else{e.items.visible=Math.floor(t/e.items[e.d["width"]]);e[e.d["width"]]=e.items.visible*e.items[e.d["width"]];if(!e.items.visibleConf.adjust){e.align=false}}if(e.items.visible=="Infinity"||e.items.visible<1){debug(true,'Not a valid number of visible items: Set to "variable".');e.items.visibleConf.variable=true}}return e}function in_complementPrimarySize(e,t,n){if(e=="auto"){e=ms_getTrueLargestSize(n,t,"outerWidth")}return e}function in_complementSecondarySize(e,t,n){if(e=="auto"){e=ms_getTrueLargestSize(n,t,"outerHeight")}if(!e){e=t.items[t.d["height"]]}return e}function in_getAlignPadding(e,t){var n=cf_getAlignPadding(gi_getCurrentItems(t,e),e);e.padding[e.d[1]]=n[1];e.padding[e.d[3]]=n[0];return e}function in_getResponsiveValues(e,t,n){var r=cf_getItemAdjustMinMax(Math.ceil(e[e.d["width"]]/e.items[e.d["width"]]),e.items.visibleConf);if(r>t.length){r=t.length}var i=Math.floor(e[e.d["width"]]/r);e.items.visible=r;e.items[e.d["width"]]=i;e[e.d["width"]]=r*i;return e}function bt_pauseOnHoverConfig(e){if(is_string(e)){var t=e.indexOf("immediate")>-1?true:false,n=e.indexOf("resume")>-1?true:false}else{var t=n=false}return[t,n]}function bt_mousesheelNumber(e){return is_number(e)?e:null}function is_null(e){return e===null}function is_undefined(e){return is_null(e)||typeof e=="undefined"||e===""||e==="undefined"}function is_array(e){return e instanceof Array}function is_jquery(e){return e instanceof jQuery}function is_object(e){return(e instanceof Object||typeof e=="object")&&!is_null(e)&&!is_jquery(e)&&!is_array(e)&&!is_function(e)}function is_number(e){return(e instanceof Number||typeof e=="number")&&!isNaN(e)}function is_string(e){return(e instanceof String||typeof e=="string")&&!is_undefined(e)&&!is_true(e)&&!is_false(e)}function is_function(e){return e instanceof Function||typeof e=="function"}function is_boolean(e){return e instanceof Boolean||typeof e=="boolean"||is_true(e)||is_false(e)}function is_true(e){return e===true||e==="true"}function is_false(e){return e===false||e==="false"}function is_percentage(e){return is_string(e)&&e.slice(-1)=="%"}function getTime(){return(new Date).getTime()}function deprecated(e,t){debug(true,e+" is DEPRECATED, support for it will be removed. Use "+t+" instead.")}function debug(e,t){if(!is_undefined(window.console)&&!is_undefined(window.console.log)){if(is_object(e)){var n=" ("+e.selector+")";e=e.debug}else{var n=""}if(!e){return false}if(is_string(t)){t="carouFredSel"+n+": "+t}else{t=["carouFredSel"+n+":",t]}window.console.log(t)}return false}if($.fn.carouFredSel){return}$.fn.caroufredsel=$.fn.carouFredSel=function(options,configs){if(this.length==0){debug(true,'No element found for "'+this.selector+'".');return this}if(this.length>1){return this.each(function(){$(this).carouFredSel(options,configs)})}var $cfs=this,$tt0=this[0],starting_position=false;if($cfs.data("_cfs_isCarousel")){starting_position=$cfs.triggerHandler("_cfs_triggerEvent","currentPosition");$cfs.trigger("_cfs_triggerEvent",["destroy",true])}var FN={};FN._init=function(e,t,n){e=go_getObject($tt0,e);e.items=go_getItemsObject($tt0,e.items);e.scroll=go_getScrollObject($tt0,e.scroll);e.auto=go_getAutoObject($tt0,e.auto);e.prev=go_getPrevNextObject($tt0,e.prev);e.next=go_getPrevNextObject($tt0,e.next);e.pagination=go_getPaginationObject($tt0,e.pagination);e.swipe=go_getSwipeObject($tt0,e.swipe);e.mousewheel=go_getMousewheelObject($tt0,e.mousewheel);if(t){opts_orig=$.extend(true,{},$.fn.carouFredSel.defaults,e)}opts=$.extend(true,{},$.fn.carouFredSel.defaults,e);opts.d=cf_getDimensions(opts);crsl.direction=opts.direction=="up"||opts.direction=="left"?"next":"prev";var r=$cfs.children(),i=ms_getParentSize($wrp,opts,"width");if(is_true(opts.cookie)){opts.cookie="caroufredsel_cookie_"+conf.serialNumber}opts.maxDimension=ms_getMaxDimension(opts,i);opts.items=in_complementItems(opts.items,opts,r,n);opts[opts.d["width"]]=in_complementPrimarySize(opts[opts.d["width"]],opts,r);opts[opts.d["height"]]=in_complementSecondarySize(opts[opts.d["height"]],opts,r);if(opts.responsive){if(!is_percentage(opts[opts.d["width"]])){opts[opts.d["width"]]="100%"}}if(is_percentage(opts[opts.d["width"]])){crsl.upDateOnWindowResize=true;crsl.primarySizePercentage=opts[opts.d["width"]];opts[opts.d["width"]]=ms_getPercentage(i,crsl.primarySizePercentage);if(!opts.items.visible){opts.items.visibleConf.variable=true}}if(opts.responsive){opts.usePadding=false;opts.padding=[0,0,0,0];opts.align=false;opts.items.visibleConf.variable=false}else{if(!opts.items.visible){opts=in_complementVisibleItems(opts,i)}if(!opts[opts.d["width"]]){if(!opts.items.visibleConf.variable&&is_number(opts.items[opts.d["width"]])&&opts.items.filter=="*"){opts[opts.d["width"]]=opts.items.visible*opts.items[opts.d["width"]];opts.align=false}else{opts[opts.d["width"]]="variable"}}if(is_undefined(opts.align)){opts.align=is_number(opts[opts.d["width"]])?"center":false}if(opts.items.visibleConf.variable){opts.items.visible=gn_getVisibleItemsNext(r,opts,0)}}if(opts.items.filter!="*"&&!opts.items.visibleConf.variable){opts.items.visibleConf.org=opts.items.visible;opts.items.visible=gn_getVisibleItemsNextFilter(r,opts,0)}opts.items.visible=cf_getItemsAdjust(opts.items.visible,opts,opts.items.visibleConf.adjust,$tt0);opts.items.visibleConf.old=opts.items.visible;if(opts.responsive){if(!opts.items.visibleConf.min){opts.items.visibleConf.min=opts.items.visible}if(!opts.items.visibleConf.max){opts.items.visibleConf.max=opts.items.visible}opts=in_getResponsiveValues(opts,r,i)}else{opts.padding=cf_getPadding(opts.padding);if(opts.align=="top"){opts.align="left"}else if(opts.align=="bottom"){opts.align="right"}switch(opts.align){case"center":case"left":case"right":if(opts[opts.d["width"]]!="variable"){opts=in_getAlignPadding(opts,r);opts.usePadding=true}break;default:opts.align=false;opts.usePadding=opts.padding[0]==0&&opts.padding[1]==0&&opts.padding[2]==0&&opts.padding[3]==0?false:true;break}}if(!is_number(opts.scroll.duration)){opts.scroll.duration=500}if(is_undefined(opts.scroll.items)){opts.scroll.items=opts.responsive||opts.items.visibleConf.variable||opts.items.filter!="*"?"visible":opts.items.visible}opts.auto=$.extend(true,{},opts.scroll,opts.auto);opts.prev=$.extend(true,{},opts.scroll,opts.prev);opts.next=$.extend(true,{},opts.scroll,opts.next);opts.pagination=$.extend(true,{},opts.scroll,opts.pagination);opts.auto=go_complementAutoObject($tt0,opts.auto);opts.prev=go_complementPrevNextObject($tt0,opts.prev);opts.next=go_complementPrevNextObject($tt0,opts.next);opts.pagination=go_complementPaginationObject($tt0,opts.pagination);opts.swipe=go_complementSwipeObject($tt0,opts.swipe);opts.mousewheel=go_complementMousewheelObject($tt0,opts.mousewheel);if(opts.synchronise){opts.synchronise=cf_getSynchArr(opts.synchronise)}if(opts.auto.onPauseStart){opts.auto.onTimeoutStart=opts.auto.onPauseStart;deprecated("auto.onPauseStart","auto.onTimeoutStart")}if(opts.auto.onPausePause){opts.auto.onTimeoutPause=opts.auto.onPausePause;deprecated("auto.onPausePause","auto.onTimeoutPause")}if(opts.auto.onPauseEnd){opts.auto.onTimeoutEnd=opts.auto.onPauseEnd;deprecated("auto.onPauseEnd","auto.onTimeoutEnd")}if(opts.auto.pauseDuration){opts.auto.timeoutDuration=opts.auto.pauseDuration;deprecated("auto.pauseDuration","auto.timeoutDuration")}};FN._build=function(){$cfs.data("_cfs_isCarousel",true);var e=$cfs.children(),t=in_mapCss($cfs,["textAlign","float","position","top","right","bottom","left","zIndex","width","height","marginTop","marginRight","marginBottom","marginLeft"]),n="relative";switch(t.position){case"absolute":case"fixed":n=t.position;break}if(conf.wrapper=="parent"){sz_storeOrigCss($wrp)}else{$wrp.css(t)}$wrp.css({overflow:"hidden",position:n});sz_storeOrigCss($cfs);$cfs.data("_cfs_origCssZindex",t.zIndex);$cfs.css({textAlign:"left","float":"none",position:"absolute",top:0,right:"auto",bottom:"auto",left:0,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0});sz_storeMargin(e,opts);sz_storeOrigCss(e);if(opts.responsive){sz_setResponsiveSizes(opts,e)}};FN._bind_events=function(){FN._unbind_events();$cfs.bind(cf_e("stop",conf),function(e,t){e.stopPropagation();if(!crsl.isStopped){if(opts.auto.button){opts.auto.button.addClass(cf_c("stopped",conf))}}crsl.isStopped=true;if(opts.auto.play){opts.auto.play=false;$cfs.trigger(cf_e("pause",conf),t)}return true});$cfs.bind(cf_e("finish",conf),function(e){e.stopPropagation();if(crsl.isScrolling){sc_stopScroll(scrl)}return true});$cfs.bind(cf_e("pause",conf),function(e,t,n){e.stopPropagation();tmrs=sc_clearTimers(tmrs);if(t&&crsl.isScrolling){scrl.isStopped=true;var r=getTime()-scrl.startTime;scrl.duration-=r;if(scrl.pre){scrl.pre.duration-=r}if(scrl.post){scrl.post.duration-=r}sc_stopScroll(scrl,false)}if(!crsl.isPaused&&!crsl.isScrolling){if(n){tmrs.timePassed+=getTime()-tmrs.startTime}}if(!crsl.isPaused){if(opts.auto.button){opts.auto.button.addClass(cf_c("paused",conf))}}crsl.isPaused=true;if(opts.auto.onTimeoutPause){var i=opts.auto.timeoutDuration-tmrs.timePassed,s=100-Math.ceil(i*100/opts.auto.timeoutDuration);opts.auto.onTimeoutPause.call($tt0,s,i)}return true});$cfs.bind(cf_e("play",conf),function(e,t,n,r){e.stopPropagation();tmrs=sc_clearTimers(tmrs);var i=[t,n,r],s=["string","number","boolean"],o=cf_sortParams(i,s);t=o[0];n=o[1];r=o[2];if(t!="prev"&&t!="next"){t=crsl.direction}if(!is_number(n)){n=0}if(!is_boolean(r)){r=false}if(r){crsl.isStopped=false;opts.auto.play=true}if(!opts.auto.play){e.stopImmediatePropagation();return debug(conf,"Carousel stopped: Not scrolling.")}if(crsl.isPaused){if(opts.auto.button){opts.auto.button.removeClass(cf_c("stopped",conf));opts.auto.button.removeClass(cf_c("paused",conf))}}crsl.isPaused=false;tmrs.startTime=getTime();var u=opts.auto.timeoutDuration+n;dur2=u-tmrs.timePassed;perc=100-Math.ceil(dur2*100/u);if(opts.auto.progress){tmrs.progress=setInterval(function(){var e=getTime()-tmrs.startTime+tmrs.timePassed,t=Math.ceil(e*100/u);opts.auto.progress.updater.call(opts.auto.progress.bar[0],t)},opts.auto.progress.interval)}tmrs.auto=setTimeout(function(){if(opts.auto.progress){opts.auto.progress.updater.call(opts.auto.progress.bar[0],100)}if(opts.auto.onTimeoutEnd){opts.auto.onTimeoutEnd.call($tt0,perc,dur2)}if(crsl.isScrolling){$cfs.trigger(cf_e("play",conf),t)}else{$cfs.trigger(cf_e(t,conf),opts.auto)}},dur2);if(opts.auto.onTimeoutStart){opts.auto.onTimeoutStart.call($tt0,perc,dur2)}return true});$cfs.bind(cf_e("resume",conf),function(e){e.stopPropagation();if(scrl.isStopped){scrl.isStopped=false;crsl.isPaused=false;crsl.isScrolling=true;scrl.startTime=getTime();sc_startScroll(scrl,conf)}else{$cfs.trigger(cf_e("play",conf))}return true});$cfs.bind(cf_e("prev",conf)+" "+cf_e("next",conf),function(e,t,n,r,i){e.stopPropagation();if(crsl.isStopped||$cfs.is(":hidden")){e.stopImmediatePropagation();return debug(conf,"Carousel stopped or hidden: Not scrolling.")}var s=is_number(opts.items.minimum)?opts.items.minimum:opts.items.visible+1;if(s>itms.total){e.stopImmediatePropagation();return debug(conf,"Not enough items ("+itms.total+" total, "+s+" needed): Not scrolling.")}var o=[t,n,r,i],u=["object","number/string","function","boolean"],a=cf_sortParams(o,u);t=a[0];n=a[1];r=a[2];i=a[3];var f=e.type.slice(conf.events.prefix.length);if(!is_object(t)){t={}}if(is_function(r)){t.onAfter=r}if(is_boolean(i)){t.queue=i}t=$.extend(true,{},opts[f],t);if(t.conditions&&!t.conditions.call($tt0,f)){e.stopImmediatePropagation();return debug(conf,'Callback "conditions" returned false.')}if(!is_number(n)){if(opts.items.filter!="*"){n="visible"}else{var l=[n,t.items,opts[f].items];for(var a=0,c=l.length;a<c;a++){if(is_number(l[a])||l[a]=="page"||l[a]=="visible"){n=l[a];break}}}switch(n){case"page":e.stopImmediatePropagation();return $cfs.triggerHandler(cf_e(f+"Page",conf),[t,r]);break;case"visible":if(!opts.items.visibleConf.variable&&opts.items.filter=="*"){n=opts.items.visible}break}}if(scrl.isStopped){$cfs.trigger(cf_e("resume",conf));$cfs.trigger(cf_e("queue",conf),[f,[t,n,r]]);e.stopImmediatePropagation();return debug(conf,"Carousel resumed scrolling.")}if(t.duration>0){if(crsl.isScrolling){if(t.queue){if(t.queue=="last"){queu=[]}if(t.queue!="first"||queu.length==0){$cfs.trigger(cf_e("queue",conf),[f,[t,n,r]])}}e.stopImmediatePropagation();return debug(conf,"Carousel currently scrolling.")}}tmrs.timePassed=0;$cfs.trigger(cf_e("slide_"+f,conf),[t,n]);if(opts.synchronise){var h=opts.synchronise,p=[t,n];for(var d=0,c=h.length;d<c;d++){var v=f;if(!h[d][2]){v=v=="prev"?"next":"prev"}if(!h[d][1]){p[0]=h[d][0].triggerHandler("_cfs_triggerEvent",["configuration",v])}p[1]=n+h[d][3];h[d][0].trigger("_cfs_triggerEvent",["slide_"+v,p])}}return true});$cfs.bind(cf_e("slide_prev",conf),function(e,t,n){e.stopPropagation();var r=$cfs.children();if(!opts.circular){if(itms.first==0){if(opts.infinite){$cfs.trigger(cf_e("next",conf),itms.total-1)}return e.stopImmediatePropagation()}}sz_resetMargin(r,opts);if(!is_number(n)){if(opts.items.visibleConf.variable){n=gn_getVisibleItemsPrev(r,opts,itms.total-1)}else if(opts.items.filter!="*"){var i=is_number(t.items)?t.items:gn_getVisibleOrg($cfs,opts);n=gn_getScrollItemsPrevFilter(r,opts,itms.total-1,i)}else{n=opts.items.visible}n=cf_getAdjust(n,opts,t.items,$tt0)}if(!opts.circular){if(itms.total-n<itms.first){n=itms.total-itms.first}}opts.items.visibleConf.old=opts.items.visible;if(opts.items.visibleConf.variable){var s=cf_getItemsAdjust(gn_getVisibleItemsNext(r,opts,itms.total-n),opts,opts.items.visibleConf.adjust,$tt0);if(opts.items.visible+n<=s&&n<itms.total){n++;s=cf_getItemsAdjust(gn_getVisibleItemsNext(r,opts,itms.total-n),opts,opts.items.visibleConf.adjust,$tt0)}opts.items.visible=s}else if(opts.items.filter!="*"){var s=gn_getVisibleItemsNextFilter(r,opts,itms.total-n);opts.items.visible=cf_getItemsAdjust(s,opts,opts.items.visibleConf.adjust,$tt0)}sz_resetMargin(r,opts,true);if(n==0){e.stopImmediatePropagation();return debug(conf,"0 items to scroll: Not scrolling.")}debug(conf,"Scrolling "+n+" items backward.");itms.first+=n;while(itms.first>=itms.total){itms.first-=itms.total}if(!opts.circular){if(itms.first==0&&t.onEnd){t.onEnd.call($tt0,"prev")}if(!opts.infinite){nv_enableNavi(opts,itms.first,conf)}}$cfs.children().slice(itms.total-n,itms.total).prependTo($cfs);if(itms.total<opts.items.visible+n){$cfs.children().slice(0,opts.items.visible+n-itms.total).clone(true).appendTo($cfs)}var r=$cfs.children(),o=gi_getOldItemsPrev(r,opts,n),u=gi_getNewItemsPrev(r,opts),a=r.eq(n-1),f=o.last(),l=u.last();sz_resetMargin(r,opts);var c=0,h=0;if(opts.align){var p=cf_getAlignPadding(u,opts);c=p[0];h=p[1]}var d=c<0?opts.padding[opts.d[3]]:0;var v=false,m=$();if(opts.items.visible<n){m=r.slice(opts.items.visibleConf.old,n);if(t.fx=="directscroll"){var g=opts.items[opts.d["width"]];v=m;a=l;sc_hideHiddenItems(v);opts.items[opts.d["width"]]="variable"}}var y=false,b=ms_getTotalSize(r.slice(0,n),opts,"width"),w=cf_mapWrapperSizes(ms_getSizes(u,opts,true),opts,!opts.usePadding),E=0,S={},x={},T={},N={},C={},k={},L={},A=sc_getDuration(t,opts,n,b);switch(t.fx){case"cover":case"cover-fade":E=ms_getTotalSize(r.slice(0,opts.items.visible),opts,"width");break}if(v){opts.items[opts.d["width"]]=g}sz_resetMargin(r,opts,true);if(h>=0){sz_resetMargin(f,opts,opts.padding[opts.d[1]])}if(c>=0){sz_resetMargin(a,opts,opts.padding[opts.d[3]])}if(opts.align){opts.padding[opts.d[1]]=h;opts.padding[opts.d[3]]=c}k[opts.d["left"]]=-(b-d);L[opts.d["left"]]=-(E-d);x[opts.d["left"]]=w[opts.d["width"]];var O=function(){},M=function(){},_=function(){},D=function(){},P=function(){},H=function(){},B=function(){},j=function(){},F=function(){},I=function(){},q=function(){};switch(t.fx){case"crossfade":case"cover":case"cover-fade":case"uncover":case"uncover-fade":y=$cfs.clone(true).appendTo($wrp);break}switch(t.fx){case"crossfade":case"uncover":case"uncover-fade":y.children().slice(0,n).remove();y.children().slice(opts.items.visibleConf.old).remove();break;case"cover":case"cover-fade":y.children().slice(opts.items.visible).remove();y.css(L);break}$cfs.css(k);scrl=sc_setScroll(A,t.easing,conf);S[opts.d["left"]]=opts.usePadding?opts.padding[opts.d[3]]:0;if(opts[opts.d["width"]]=="variable"||opts[opts.d["height"]]=="variable"){O=function(){$wrp.css(w)};M=function(){scrl.anims.push([$wrp,w])}}if(opts.usePadding){if(l.not(a).length){T[opts.d["marginRight"]]=a.data("_cfs_origCssMargin");if(c<0){a.css(T)}else{B=function(){a.css(T)};j=function(){scrl.anims.push([a,T])}}}switch(t.fx){case"cover":case"cover-fade":y.children().eq(n-1).css(T);break}if(l.not(f).length){N[opts.d["marginRight"]]=f.data("_cfs_origCssMargin");_=function(){f.css(N)};D=function(){scrl.anims.push([f,N])}}if(h>=0){C[opts.d["marginRight"]]=l.data("_cfs_origCssMargin")+opts.padding[opts.d[1]];P=function(){l.css(C)};H=function(){scrl.anims.push([l,C])}}}q=function(){$cfs.css(S)};var R=opts.items.visible+n-itms.total;I=function(){if(R>0){$cfs.children().slice(itms.total).remove();o=$($cfs.children().slice(itms.total-(opts.items.visible-R)).get().concat($cfs.children().slice(0,R).get()))}sc_showHiddenItems(v);if(opts.usePadding){var e=$cfs.children().eq(opts.items.visible+n-1);e.css(opts.d["marginRight"],e.data("_cfs_origCssMargin"))}};var U=sc_mapCallbackArguments(o,m,u,n,"prev",A,w);F=function(){sc_afterScroll($cfs,y,t);crsl.isScrolling=false;clbk.onAfter=sc_fireCallbacks($tt0,t,"onAfter",U,clbk);queu=sc_fireQueue($cfs,queu,conf);if(!crsl.isPaused){$cfs.trigger(cf_e("play",conf))}};crsl.isScrolling=true;tmrs=sc_clearTimers(tmrs);clbk.onBefore=sc_fireCallbacks($tt0,t,"onBefore",U,clbk);switch(t.fx){case"none":$cfs.css(S);O();_();P();B();q();I();F();break;case"fade":scrl.anims.push([$cfs,{opacity:0},function(){O();_();P();B();q();I();scrl=sc_setScroll(A,t.easing,conf);scrl.anims.push([$cfs,{opacity:1},F]);sc_startScroll(scrl,conf)}]);break;case"crossfade":$cfs.css({opacity:0});scrl.anims.push([y,{opacity:0}]);scrl.anims.push([$cfs,{opacity:1},F]);M();_();P();B();q();I();break;case"cover":scrl.anims.push([y,S,function(){_();P();B();q();I();F()}]);M();break;case"cover-fade":scrl.anims.push([$cfs,{opacity:0}]);scrl.anims.push([y,S,function(){_();P();B();q();I();F()}]);M();break;case"uncover":scrl.anims.push([y,x,F]);M();_();P();B();q();I();break;case"uncover-fade":$cfs.css({opacity:0});scrl.anims.push([$cfs,{opacity:1}]);scrl.anims.push([y,x,F]);M();_();P();B();q();I();break;default:scrl.anims.push([$cfs,S,function(){I();F()}]);M();D();H();j();break}sc_startScroll(scrl,conf);cf_setCookie(opts.cookie,$cfs,conf);$cfs.trigger(cf_e("updatePageStatus",conf),[false,w]);return true});$cfs.bind(cf_e("slide_next",conf),function(e,t,n){e.stopPropagation();var r=$cfs.children();if(!opts.circular){if(itms.first==opts.items.visible){if(opts.infinite){$cfs.trigger(cf_e("prev",conf),itms.total-1)}return e.stopImmediatePropagation()}}sz_resetMargin(r,opts);if(!is_number(n)){if(opts.items.filter!="*"){var i=is_number(t.items)?t.items:gn_getVisibleOrg($cfs,opts);n=gn_getScrollItemsNextFilter(r,opts,0,i)}else{n=opts.items.visible}n=cf_getAdjust(n,opts,t.items,$tt0)}var s=itms.first==0?itms.total:itms.first;if(!opts.circular){if(opts.items.visibleConf.variable){var o=gn_getVisibleItemsNext(r,opts,n),i=gn_getVisibleItemsPrev(r,opts,s-1)}else{var o=opts.items.visible,i=opts.items.visible}if(n+o>s){n=s-i}}opts.items.visibleConf.old=opts.items.visible;if(opts.items.visibleConf.variable){var o=cf_getItemsAdjust(gn_getVisibleItemsNextTestCircular(r,opts,n,s),opts,opts.items.visibleConf.adjust,$tt0);while(opts.items.visible-n>=o&&n<itms.total){n++;o=cf_getItemsAdjust(gn_getVisibleItemsNextTestCircular(r,opts,n,s),opts,opts.items.visibleConf.adjust,$tt0)}opts.items.visible=o}else if(opts.items.filter!="*"){var o=gn_getVisibleItemsNextFilter(r,opts,n);opts.items.visible=cf_getItemsAdjust(o,opts,opts.items.visibleConf.adjust,$tt0)}sz_resetMargin(r,opts,true);if(n==0){e.stopImmediatePropagation();return debug(conf,"0 items to scroll: Not scrolling.")}debug(conf,"Scrolling "+n+" items forward.");itms.first-=n;while(itms.first<0){itms.first+=itms.total}if(!opts.circular){if(itms.first==opts.items.visible&&t.onEnd){t.onEnd.call($tt0,"next")}if(!opts.infinite){nv_enableNavi(opts,itms.first,conf)}}if(itms.total<opts.items.visible+n){$cfs.children().slice(0,opts.items.visible+n-itms.total).clone(true).appendTo($cfs)}var r=$cfs.children(),u=gi_getOldItemsNext(r,opts),a=gi_getNewItemsNext(r,opts,n),f=r.eq(n-1),l=u.last(),c=a.last();sz_resetMargin(r,opts);var h=0,p=0;if(opts.align){var d=cf_getAlignPadding(a,opts);h=d[0];p=d[1]}var v=false,m=$();if(opts.items.visibleConf.old<n){m=r.slice(opts.items.visibleConf.old,n);if(t.fx=="directscroll"){var g=opts.items[opts.d["width"]];v=m;f=l;sc_hideHiddenItems(v);opts.items[opts.d["width"]]="variable"}}var y=false,b=ms_getTotalSize(r.slice(0,n),opts,"width"),w=cf_mapWrapperSizes(ms_getSizes(a,opts,true),opts,!opts.usePadding),E=0,S={},x={},T={},N={},C={},k=sc_getDuration(t,opts,n,b);switch(t.fx){case"uncover":case"uncover-fade":E=ms_getTotalSize(r.slice(0,opts.items.visibleConf.old),opts,"width");break}if(v){opts.items[opts.d["width"]]=g}if(opts.align){if(opts.padding[opts.d[1]]<0){opts.padding[opts.d[1]]=0}}sz_resetMargin(r,opts,true);sz_resetMargin(l,opts,opts.padding[opts.d[1]]);if(opts.align){opts.padding[opts.d[1]]=p;opts.padding[opts.d[3]]=h}C[opts.d["left"]]=opts.usePadding?opts.padding[opts.d[3]]:0;var L=function(){},A=function(){},O=function(){},M=function(){},_=function(){},D=function(){},P=function(){},H=function(){},B=function(){};switch(t.fx){case"crossfade":case"cover":case"cover-fade":case"uncover":case"uncover-fade":y=$cfs.clone(true).appendTo($wrp);y.children().slice(opts.items.visibleConf.old).remove();break}switch(t.fx){case"crossfade":case"cover":case"cover-fade":$cfs.css("zIndex",1);y.css("zIndex",0);break}scrl=sc_setScroll(k,t.easing,conf);S[opts.d["left"]]=-b;x[opts.d["left"]]=-E;if(h<0){S[opts.d["left"]]+=h}if(opts[opts.d["width"]]=="variable"||opts[opts.d["height"]]=="variable"){L=function(){$wrp.css(w)};A=function(){scrl.anims.push([$wrp,w])}}if(opts.usePadding){var j=c.data("_cfs_origCssMargin");if(p>=0){j+=opts.padding[opts.d[1]]}c.css(opts.d["marginRight"],j);if(f.not(l).length){N[opts.d["marginRight"]]=l.data("_cfs_origCssMargin")}O=function(){l.css(N)};M=function(){scrl.anims.push([l,N])};var F=f.data("_cfs_origCssMargin");if(h>0){F+=opts.padding[opts.d[3]]}T[opts.d["marginRight"]]=F;_=function(){f.css(T)};D=function(){scrl.anims.push([f,T])}}B=function(){$cfs.css(C)};var I=opts.items.visible+n-itms.total;H=function(){if(I>0){$cfs.children().slice(itms.total).remove()}var e=$cfs.children().slice(0,n).appendTo($cfs).last();if(I>0){a=gi_getCurrentItems(r,opts)}sc_showHiddenItems(v);if(opts.usePadding){if(itms.total<opts.items.visible+n){var t=$cfs.children().eq(opts.items.visible-1);t.css(opts.d["marginRight"],t.data("_cfs_origCssMargin")+opts.padding[opts.d[1]])}e.css(opts.d["marginRight"],e.data("_cfs_origCssMargin"))}};var q=sc_mapCallbackArguments(u,m,a,n,"next",k,w);P=function(){$cfs.css("zIndex",$cfs.data("_cfs_origCssZindex"));sc_afterScroll($cfs,y,t);crsl.isScrolling=false;clbk.onAfter=sc_fireCallbacks($tt0,t,"onAfter",q,clbk);queu=sc_fireQueue($cfs,queu,conf);if(!crsl.isPaused){$cfs.trigger(cf_e("play",conf))}};crsl.isScrolling=true;tmrs=sc_clearTimers(tmrs);clbk.onBefore=sc_fireCallbacks($tt0,t,"onBefore",q,clbk);switch(t.fx){case"none":$cfs.css(S);L();O();_();B();H();P();break;case"fade":scrl.anims.push([$cfs,{opacity:0},function(){L();O();_();B();H();scrl=sc_setScroll(k,t.easing,conf);scrl.anims.push([$cfs,{opacity:1},P]);sc_startScroll(scrl,conf)}]);break;case"crossfade":$cfs.css({opacity:0});scrl.anims.push([y,{opacity:0}]);scrl.anims.push([$cfs,{opacity:1},P]);A();O();_();B();H();break;case"cover":$cfs.css(opts.d["left"],$wrp[opts.d["width"]]());scrl.anims.push([$cfs,C,P]);A();O();_();H();break;case"cover-fade":$cfs.css(opts.d["left"],$wrp[opts.d["width"]]());scrl.anims.push([y,{opacity:0}]);scrl.anims.push([$cfs,C,P]);A();O();_();H();break;case"uncover":scrl.anims.push([y,x,P]);A();O();_();B();H();break;case"uncover-fade":$cfs.css({opacity:0});scrl.anims.push([$cfs,{opacity:1}]);scrl.anims.push([y,x,P]);A();O();_();B();H();break;default:scrl.anims.push([$cfs,S,function(){B();H();P()}]);A();M();D();break}sc_startScroll(scrl,conf);cf_setCookie(opts.cookie,$cfs,conf);$cfs.trigger(cf_e("updatePageStatus",conf),[false,w]);return true});$cfs.bind(cf_e("slideTo",conf),function(e,t,n,r,i,s,o){e.stopPropagation();var u=[t,n,r,i,s,o],a=["string/number/object","number","boolean","object","string","function"],f=cf_sortParams(u,a);i=f[3];s=f[4];o=f[5];t=gn_getItemIndex(f[0],f[1],f[2],itms,$cfs);if(t==0){return false}if(!is_object(i)){i=false}if(s!="prev"&&s!="next"){if(opts.circular){s=t<=itms.total/2?"next":"prev"}else{s=itms.first==0||itms.first>t?"next":"prev"}}if(s=="prev"){t=itms.total-t}$cfs.trigger(cf_e(s,conf),[i,t,o]);return true});$cfs.bind(cf_e("prevPage",conf),function(e,t,n){e.stopPropagation();var r=$cfs.triggerHandler(cf_e("currentPage",conf));return $cfs.triggerHandler(cf_e("slideToPage",conf),[r-1,t,"prev",n])});$cfs.bind(cf_e("nextPage",conf),function(e,t,n){e.stopPropagation();var r=$cfs.triggerHandler(cf_e("currentPage",conf));return $cfs.triggerHandler(cf_e("slideToPage",conf),[r+1,t,"next",n])});$cfs.bind(cf_e("slideToPage",conf),function(e,t,n,r,i){e.stopPropagation();if(!is_number(t)){t=$cfs.triggerHandler(cf_e("currentPage",conf))}var s=opts.pagination.items||opts.items.visible,o=Math.ceil(itms.total/s)-1;if(t<0){t=o}if(t>o){t=0}return $cfs.triggerHandler(cf_e("slideTo",conf),[t*s,0,true,n,r,i])});$cfs.bind(cf_e("jumpToStart",conf),function(e,t){e.stopPropagation();if(t){t=gn_getItemIndex(t,0,true,itms,$cfs)}else{t=0}t+=itms.first;if(t!=0){if(itms.total>0){while(t>itms.total){t-=itms.total}}$cfs.prepend($cfs.children().slice(t,itms.total))}return true});$cfs.bind(cf_e("synchronise",conf),function(e,t){e.stopPropagation();if(t){t=cf_getSynchArr(t)}else if(opts.synchronise){t=opts.synchronise}else{return debug(conf,"No carousel to synchronise.")}var n=$cfs.triggerHandler(cf_e("currentPosition",conf)),r=true;for(var i=0,s=t.length;i<s;i++){if(!t[i][0].triggerHandler(cf_e("slideTo",conf),[n,t[i][3],true])){r=false}}return r});$cfs.bind(cf_e("queue",conf),function(e,t,n){e.stopPropagation();if(is_function(t)){t.call($tt0,queu)}else if(is_array(t)){queu=t}else if(!is_undefined(t)){queu.push([t,n])}return queu});$cfs.bind(cf_e("insertItem",conf),function(e,t,n,r,i){e.stopPropagation();var s=[t,n,r,i],o=["string/object","string/number/object","boolean","number"],u=cf_sortParams(s,o);t=u[0];n=u[1];r=u[2];i=u[3];if(is_object(t)&&!is_jquery(t)){t=$(t)}else if(is_string(t)){t=$(t)}if(!is_jquery(t)||t.length==0){return debug(conf,"Not a valid object.")}if(is_undefined(n)){n="end"}sz_storeMargin(t,opts);sz_storeOrigCss(t);var a=n,f="before";if(n=="end"){if(r){if(itms.first==0){n=itms.total-1;f="after"}else{n=itms.first;itms.first+=t.length}if(n<0){n=0}}else{n=itms.total-1;f="after"}}else{n=gn_getItemIndex(n,i,r,itms,$cfs)}var l=$cfs.children().eq(n);if(l.length){l[f](t)}else{debug(conf,"Correct insert-position not found! Appending item to the end.");$cfs.append(t)}if(a!="end"&&!r){if(n<itms.first){itms.first+=t.length}}itms.total=$cfs.children().length;if(itms.first>=itms.total){itms.first-=itms.total}$cfs.trigger(cf_e("updateSizes",conf));$cfs.trigger(cf_e("linkAnchors",conf));return true});$cfs.bind(cf_e("removeItem",conf),function(e,t,n,r){e.stopPropagation();var i=[t,n,r],s=["string/number/object","boolean","number"],o=cf_sortParams(i,s);t=o[0];n=o[1];r=o[2];var u=false;if(t instanceof $&&t.length>1){a=$();t.each(function(e,t){var i=$cfs.trigger(cf_e("removeItem",conf),[$(this),n,r]);if(i){a=a.add(i)}});return a}if(is_undefined(t)||t=="end"){a=$cfs.children().last()}else{t=gn_getItemIndex(t,r,n,itms,$cfs);var a=$cfs.children().eq(t);if(a.length){if(t<itms.first){itms.first-=a.length}}}if(a&&a.length){a.detach();itms.total=$cfs.children().length;$cfs.trigger(cf_e("updateSizes",conf))}return a});$cfs.bind(cf_e("onBefore",conf)+" "+cf_e("onAfter",conf),function(e,t){e.stopPropagation();var n=e.type.slice(conf.events.prefix.length);if(is_array(t)){clbk[n]=t}if(is_function(t)){clbk[n].push(t)}return clbk[n]});$cfs.bind(cf_e("currentPosition",conf),function(e,t){e.stopPropagation();if(itms.first==0){var n=0}else{var n=itms.total-itms.first}if(is_function(t)){t.call($tt0,n)}return n});$cfs.bind(cf_e("currentPage",conf),function(e,t){e.stopPropagation();var n=opts.pagination.items||opts.items.visible,r=Math.ceil(itms.total/n-1),i;if(itms.first==0){i=0}else if(itms.first<itms.total%n){i=0}else if(itms.first==n&&!opts.circular){i=r}else{i=Math.round((itms.total-itms.first)/n)}if(i<0){i=0}if(i>r){i=r}if(is_function(t)){t.call($tt0,i)}return i});$cfs.bind(cf_e("currentVisible",conf),function(e,t){e.stopPropagation();var n=gi_getCurrentItems($cfs.children(),opts);if(is_function(t)){t.call($tt0,n)}return n});$cfs.bind(cf_e("slice",conf),function(e,t,n,r){e.stopPropagation();if(itms.total==0){return false}var i=[t,n,r],s=["number","number","function"],o=cf_sortParams(i,s);t=is_number(o[0])?o[0]:0;n=is_number(o[1])?o[1]:itms.total;r=o[2];t+=itms.first;n+=itms.first;if(items.total>0){while(t>itms.total){t-=itms.total}while(n>itms.total){n-=itms.total}while(t<0){t+=itms.total}while(n<0){n+=itms.total}}var u=$cfs.children(),a;if(n>t){a=u.slice(t,n)}else{a=$(u.slice(t,itms.total).get().concat(u.slice(0,n).get()))}if(is_function(r)){r.call($tt0,a)}return a});$cfs.bind(cf_e("isPaused",conf)+" "+cf_e("isStopped",conf)+" "+cf_e("isScrolling",conf),function(e,t){e.stopPropagation();var n=e.type.slice(conf.events.prefix.length),r=crsl[n];if(is_function(t)){t.call($tt0,r)}return r});$cfs.bind(cf_e("configuration",conf),function(e,a,b,c){e.stopPropagation();var reInit=false;if(is_function(a)){a.call($tt0,opts)}else if(is_object(a)){opts_orig=$.extend(true,{},opts_orig,a);if(b!==false)reInit=true;else opts=$.extend(true,{},opts,a)}else if(!is_undefined(a)){if(is_function(b)){var val=eval("opts."+a);if(is_undefined(val)){val=""}b.call($tt0,val)}else if(!is_undefined(b)){if(typeof c!=="boolean")c=true;eval("opts_orig."+a+" = b");if(c!==false)reInit=true;else eval("opts."+a+" = b")}else{return eval("opts."+a)}}if(reInit){sz_resetMargin($cfs.children(),opts);FN._init(opts_orig);FN._bind_buttons();var sz=sz_setSizes($cfs,opts);$cfs.trigger(cf_e("updatePageStatus",conf),[true,sz])}return opts});$cfs.bind(cf_e("linkAnchors",conf),function(e,t,n){e.stopPropagation();if(is_undefined(t)){t=$("body")}else if(is_string(t)){t=$(t)}if(!is_jquery(t)||t.length==0){return debug(conf,"Not a valid object.")}if(!is_string(n)){n="a.caroufredsel"}t.find(n).each(function(){var e=this.hash||"";if(e.length>0&&$cfs.children().index($(e))!=-1){$(this).unbind("click").click(function(t){t.preventDefault();$cfs.trigger(cf_e("slideTo",conf),e)})}});return true});$cfs.bind(cf_e("updatePageStatus",conf),function(e,t,n){e.stopPropagation();if(!opts.pagination.container){return}var r=opts.pagination.items||opts.items.visible,i=Math.ceil(itms.total/r);if(t){if(opts.pagination.anchorBuilder){opts.pagination.container.children().remove();opts.pagination.container.each(function(){for(var e=0;e<i;e++){var t=$cfs.children().eq(gn_getItemIndex(e*r,0,true,itms,$cfs));$(this).append(opts.pagination.anchorBuilder.call(t[0],e+1))}})}opts.pagination.container.each(function(){$(this).children().unbind(opts.pagination.event).each(function(e){$(this).bind(opts.pagination.event,function(t){t.preventDefault();$cfs.trigger(cf_e("slideTo",conf),[e*r,-opts.pagination.deviation,true,opts.pagination])})})})}var s=$cfs.triggerHandler(cf_e("currentPage",conf))+opts.pagination.deviation;if(s>=i){s=0}if(s<0){s=i-1}opts.pagination.container.each(function(){$(this).children().removeClass(cf_c("selected",conf)).eq(s).addClass(cf_c("selected",conf))});return true});$cfs.bind(cf_e("updateSizes",conf),function(e){var t=opts.items.visible,n=$cfs.children(),r=ms_getParentSize($wrp,opts,"width");itms.total=n.length;if(crsl.primarySizePercentage){opts.maxDimension=r;opts[opts.d["width"]]=ms_getPercentage(r,crsl.primarySizePercentage)}else{opts.maxDimension=ms_getMaxDimension(opts,r)}if(opts.responsive){opts.items.width=opts.items.sizesConf.width;opts.items.height=opts.items.sizesConf.height;opts=in_getResponsiveValues(opts,n,r);t=opts.items.visible;sz_setResponsiveSizes(opts,n)}else if(opts.items.visibleConf.variable){t=gn_getVisibleItemsNext(n,opts,0)}else if(opts.items.filter!="*"){t=gn_getVisibleItemsNextFilter(n,opts,0)}if(!opts.circular&&itms.first!=0&&t>itms.first){if(opts.items.visibleConf.variable){var i=gn_getVisibleItemsPrev(n,opts,itms.first)-itms.first}else if(opts.items.filter!="*"){var i=gn_getVisibleItemsPrevFilter(n,opts,itms.first)-itms.first}else{var i=opts.items.visible-itms.first}debug(conf,"Preventing non-circular: sliding "+i+" items backward.");$cfs.trigger(cf_e("prev",conf),i)}opts.items.visible=cf_getItemsAdjust(t,opts,opts.items.visibleConf.adjust,$tt0);opts.items.visibleConf.old=opts.items.visible;opts=in_getAlignPadding(opts,n);var s=sz_setSizes($cfs,opts);$cfs.trigger(cf_e("updatePageStatus",conf),[true,s]);nv_showNavi(opts,itms.total,conf);nv_enableNavi(opts,itms.first,conf);return s});$cfs.bind(cf_e("destroy",conf),function(e,t){e.stopPropagation();tmrs=sc_clearTimers(tmrs);$cfs.data("_cfs_isCarousel",false);$cfs.trigger(cf_e("finish",conf));if(t){$cfs.trigger(cf_e("jumpToStart",conf))}sz_restoreOrigCss($cfs.children());sz_restoreOrigCss($cfs);FN._unbind_events();FN._unbind_buttons();if(conf.wrapper=="parent"){sz_restoreOrigCss($wrp)}else{$wrp.replaceWith($cfs)}return true});$cfs.bind(cf_e("debug",conf),function(e){debug(conf,"Carousel width: "+opts.width);debug(conf,"Carousel height: "+opts.height);debug(conf,"Item widths: "+opts.items.width);debug(conf,"Item heights: "+opts.items.height);debug(conf,"Number of items visible: "+opts.items.visible);if(opts.auto.play){debug(conf,"Number of items scrolled automatically: "+opts.auto.items)}if(opts.prev.button){debug(conf,"Number of items scrolled backward: "+opts.prev.items)}if(opts.next.button){debug(conf,"Number of items scrolled forward: "+opts.next.items)}return conf.debug});$cfs.bind("_cfs_triggerEvent",function(e,t,n){e.stopPropagation();return $cfs.triggerHandler(cf_e(t,conf),n)})};FN._unbind_events=function(){$cfs.unbind(cf_e("",conf));$cfs.unbind(cf_e("",conf,false));$cfs.unbind("_cfs_triggerEvent")};FN._bind_buttons=function(){FN._unbind_buttons();nv_showNavi(opts,itms.total,conf);nv_enableNavi(opts,itms.first,conf);if(opts.auto.pauseOnHover){var e=bt_pauseOnHoverConfig(opts.auto.pauseOnHover);$wrp.bind(cf_e("mouseenter",conf,false),function(){$cfs.trigger(cf_e("pause",conf),e)}).bind(cf_e("mouseleave",conf,false),function(){$cfs.trigger(cf_e("resume",conf))})}if(opts.auto.button){opts.auto.button.bind(cf_e(opts.auto.event,conf,false),function(e){e.preventDefault();var t=false,n=null;if(crsl.isPaused){t="play"}else if(opts.auto.pauseOnEvent){t="pause";n=bt_pauseOnHoverConfig(opts.auto.pauseOnEvent)}if(t){$cfs.trigger(cf_e(t,conf),n)}})}if(opts.prev.button){opts.prev.button.bind(cf_e(opts.prev.event,conf,false),function(e){e.preventDefault();$cfs.trigger(cf_e("prev",conf))});if(opts.prev.pauseOnHover){var e=bt_pauseOnHoverConfig(opts.prev.pauseOnHover);opts.prev.button.bind(cf_e("mouseenter",conf,false),function(){$cfs.trigger(cf_e("pause",conf),e)}).bind(cf_e("mouseleave",conf,false),function(){$cfs.trigger(cf_e("resume",conf))})}}if(opts.next.button){opts.next.button.bind(cf_e(opts.next.event,conf,false),function(e){e.preventDefault();$cfs.trigger(cf_e("next",conf))});if(opts.next.pauseOnHover){var e=bt_pauseOnHoverConfig(opts.next.pauseOnHover);opts.next.button.bind(cf_e("mouseenter",conf,false),function(){$cfs.trigger(cf_e("pause",conf),e)}).bind(cf_e("mouseleave",conf,false),function(){$cfs.trigger(cf_e("resume",conf))})}}if(opts.pagination.container){if(opts.pagination.pauseOnHover){var e=bt_pauseOnHoverConfig(opts.pagination.pauseOnHover);opts.pagination.container.bind(cf_e("mouseenter",conf,false),function(){$cfs.trigger(cf_e("pause",conf),e)}).bind(cf_e("mouseleave",conf,false),function(){$cfs.trigger(cf_e("resume",conf))})}}if(opts.prev.key||opts.next.key){$(document).bind(cf_e("keyup",conf,false,true,true),function(e){var t=e.keyCode;if(t==opts.next.key){e.preventDefault();$cfs.trigger(cf_e("next",conf))}if(t==opts.prev.key){e.preventDefault();$cfs.trigger(cf_e("prev",conf))}})}if(opts.pagination.keys){$(document).bind(cf_e("keyup",conf,false,true,true),function(e){var t=e.keyCode;if(t>=49&&t<58){t=(t-49)*opts.items.visible;if(t<=itms.total){e.preventDefault();$cfs.trigger(cf_e("slideTo",conf),[t,0,true,opts.pagination])}}})}if($.fn.swipe){var t="ontouchstart"in window;if(t&&opts.swipe.onTouch||!t&&opts.swipe.onMouse){var n=$.extend(true,{},opts.prev,opts.swipe),r=$.extend(true,{},opts.next,opts.swipe),i=function(){$cfs.trigger(cf_e("prev",conf),[n])},s=function(){$cfs.trigger(cf_e("next",conf),[r])};switch(opts.direction){case"up":case"down":opts.swipe.options.swipeUp=s;opts.swipe.options.swipeDown=i;break;default:opts.swipe.options.swipeLeft=s;opts.swipe.options.swipeRight=i}if(crsl.swipe){$cfs.swipe("destroy")}$wrp.swipe(opts.swipe.options);$wrp.css("cursor","move");crsl.swipe=true}}if($.fn.mousewheel){if(opts.mousewheel){var o=$.extend(true,{},opts.prev,opts.mousewheel),u=$.extend(true,{},opts.next,opts.mousewheel);if(crsl.mousewheel){$wrp.unbind(cf_e("mousewheel",conf,false))}$wrp.bind(cf_e("mousewheel",conf,false),function(e,t){e.preventDefault();if(t>0){$cfs.trigger(cf_e("prev",conf),[o])}else{$cfs.trigger(cf_e("next",conf),[u])}});crsl.mousewheel=true}}if(opts.auto.play){$cfs.trigger(cf_e("play",conf),opts.auto.delay)}if(crsl.upDateOnWindowResize){var a=function(e){$cfs.trigger(cf_e("finish",conf));if(opts.auto.pauseOnResize&&!crsl.isPaused){$cfs.trigger(cf_e("play",conf))}sz_resetMargin($cfs.children(),opts);$cfs.trigger(cf_e("updateSizes",conf))};var f=$(window),l=null;if($.debounce&&conf.onWindowResize=="debounce"){l=$.debounce(200,a)}else if($.throttle&&conf.onWindowResize=="throttle"){l=$.throttle(300,a)}else{var c=0,h=0;l=function(){var e=f.width(),t=f.height();if(e!=c||t!=h){a();c=e;h=t}}}f.bind(cf_e("resize",conf,false,true,true),l)}};FN._unbind_buttons=function(){var e=cf_e("",conf),t=cf_e("",conf,false);ns3=cf_e("",conf,false,true,true);$(document).unbind(ns3);$(window).unbind(ns3);$wrp.unbind(t);if(opts.auto.button){opts.auto.button.unbind(t)}if(opts.prev.button){opts.prev.button.unbind(t)}if(opts.next.button){opts.next.button.unbind(t)}if(opts.pagination.container){opts.pagination.container.unbind(t);if(opts.pagination.anchorBuilder){opts.pagination.container.children().remove()}}if(crsl.swipe){$cfs.swipe("destroy");$wrp.css("cursor","default");crsl.swipe=false}if(crsl.mousewheel){crsl.mousewheel=false}nv_showNavi(opts,"hide",conf);nv_enableNavi(opts,"removeClass",conf)};if(is_boolean(configs)){configs={debug:configs}}var crsl={direction:"next",isPaused:true,isScrolling:false,isStopped:false,mousewheel:false,swipe:false},itms={total:$cfs.children().length,first:0},tmrs={auto:null,progress:null,startTime:getTime(),timePassed:0},scrl={isStopped:false,duration:0,startTime:0,easing:"",anims:[]},clbk={onBefore:[],onAfter:[]},queu=[],conf=$.extend(true,{},$.fn.carouFredSel.configs,configs),opts={},opts_orig=$.extend(true,{},options),$wrp=conf.wrapper=="parent"?$cfs.parent():$cfs.wrap("<"+conf.wrapper.element+' class="'+conf.wrapper.classname+'" />').parent();conf.selector=$cfs.selector;conf.serialNumber=$.fn.carouFredSel.serialNumber++;conf.transition=conf.transition&&$.fn.transition?"transition":"animate";FN._init(opts_orig,true,starting_position);FN._build();FN._bind_events();FN._bind_buttons();if(is_array(opts.items.start)){var start_arr=opts.items.start}else{var start_arr=[];if(opts.items.start!=0){start_arr.push(opts.items.start)}}if(opts.cookie){start_arr.unshift(parseInt(cf_getCookie(opts.cookie),10))}if(start_arr.length>0){for(var a=0,l=start_arr.length;a<l;a++){var s=start_arr[a];if(s==0){continue}if(s===true){s=window.location.hash;if(s.length<1){continue}}else if(s==="random"){s=Math.floor(Math.random()*itms.total)}if($cfs.triggerHandler(cf_e("slideTo",conf),[s,0,true,{fx:"none"}])){break}}}var siz=sz_setSizes($cfs,opts),itm=gi_getCurrentItems($cfs.children(),opts);if(opts.onCreate){opts.onCreate.call($tt0,{width:siz.width,height:siz.height,items:itm})}$cfs.trigger(cf_e("updatePageStatus",conf),[true,siz]);$cfs.trigger(cf_e("linkAnchors",conf));if(conf.debug){$cfs.trigger(cf_e("debug",conf))}return $cfs};$.fn.carouFredSel.serialNumber=1;$.fn.carouFredSel.defaults={synchronise:false,infinite:true,circular:true,responsive:false,direction:"left",items:{start:0},scroll:{easing:"swing",duration:500,pauseOnHover:false,event:"click",queue:false}};$.fn.carouFredSel.configs={debug:false,transition:false,onWindowResize:"throttle",events:{prefix:"",namespace:"cfs"},wrapper:{element:"div",classname:"caroufredsel_wrapper"},classnames:{}};$.fn.carouFredSel.pageAnchorBuilder=function(e){return'<a href="#"><span>'+e+"</span></a>"};$.fn.carouFredSel.progressbarUpdater=function(e){$(this).css("width",e+"%")};$.fn.carouFredSel.cookie={get:function(e){e+="=";var t=document.cookie.split(";");for(var n=0,r=t.length;n<r;n++){var i=t[n];while(i.charAt(0)==" "){i=i.slice(1)}if(i.indexOf(e)==0){return i.slice(e.length)}}return 0},set:function(e,t,n){var r="";if(n){var i=new Date;i.setTime(i.getTime()+n*24*60*60*1e3);r="; expires="+i.toGMTString()}document.cookie=e+"="+t+r+"; path=/"},remove:function(e){$.fn.carouFredSel.cookie.set(e,"",-1)}};$.extend($.easing,{quadratic:function(e){var t=e*e;return e*(-t*e+4*t-6*e+4)},cubic:function(e){return e*(4*e*e-9*e+6)},elastic:function(e){var t=e*e;return e*(33*t*t-106*t*e+126*t-67*e+15)}})})(jQuery)

/* jquery fancybox2.js */
var is_chrome=navigator.userAgent.indexOf('Chrome')>-1;var is_explorer=navigator.userAgent.indexOf('MSIE')>-1;var is_firefox=navigator.userAgent.indexOf('Firefox')>-1;var is_safari=navigator.userAgent.indexOf("Safari")>-1;var is_Opera=navigator.userAgent.indexOf("Presto")>-1;if((is_chrome)&&(is_safari)){is_safari=false;}
(function(window,document,$,undefined){"use strict";var W=$(window),D=$(document),F=$.fancybox2=function(){F.open.apply(this,arguments);},didUpdate=null,isTouch=document.createTouch!==undefined,isQuery=function(obj){return obj&&obj.hasOwnProperty&&obj instanceof $;},isString=function(str){return str&&$.type(str)==="string";},isPercentage=function(str){return isString(str)&&str.indexOf('%')>0;},isScrollable=function(el){return(el&&!(el.style.overflow&&el.style.overflow==='hidden')&&((el.clientWidth&&el.scrollWidth>el.clientWidth)||(el.clientHeight&&el.scrollHeight>el.clientHeight)));},getScalar=function(value,dim){var value_=parseInt(value,10);if(dim&&isPercentage(value)){value_=F.getViewport()[dim]/100*value_;}
return Math.ceil(value_);},getValue=function(value,dim){return getScalar(value,dim)+'px';};$.extend(F,{version:'2.1.0',defaults:{padding:10,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:true,autoHeight:false,autoWidth:false,autoResize:!isTouch,autoCenter:!isTouch,fitToView:true,aspectRatio:false,topRatio:0.5,leftRatio:0.5,scrolling:'auto',wrapCSS:'',arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3000,preload:3,modal:false,loop:true,ajax:{dataType:'html',headers:{'X-fancyBox':true}},iframe:{scrolling:'auto',preload:true},swf:{wmode:'transparent',allowfullscreen:'true',allowscriptaccess:'always'},keys:{next:{13:'left',34:'up',39:'left',40:'up'},prev:{8:'right',33:'down',37:'right',38:'down'},close:[27],play:[32],toggle:[70]},direction:{next:'left',prev:'right'},scrollOutside:true,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox2-wrap" tabIndex="-1"><div class="fancybox2-skin"><div class="fancybox2-outer"><div class="fancybox2-inner"></div></div></div></div>',image:'<img class="fancybox2-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox2-frame{rnd}" name="fancybox2-frame{rnd}" class="fancybox2-iframe" frameborder="0" vspace="0" hspace="0"'+(is_explorer?' allowtransparency="true"':'')+'></iframe>',error:'<p class="fancybox2-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox2-item fancybox2-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox2-nav fancybox2-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox2-nav fancybox2-prev" href="javascript:;"><span></span></a>'},openEffect:'fade',openSpeed:250,openEasing:'swing',openOpacity:true,openMethod:'zoomIn',closeEffect:'fade',closeSpeed:250,closeEasing:'swing',closeOpacity:true,closeMethod:'zoomOut',nextEffect:'elastic',nextSpeed:250,nextEasing:'swing',nextMethod:'changeIn',prevEffect:'elastic',prevSpeed:250,prevEasing:'swing',prevMethod:'changeOut',helpers:{overlay:{closeClick:true,speedOut:200,showEarly:true,css:{}},title:{type:'float'}},onCancel:$.noop,beforeLoad:$.noop,afterLoad:$.noop,beforeShow:$.noop,afterShow:$.noop,beforeChange:$.noop,beforeClose:$.noop,afterClose:$.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:false,isOpen:false,isOpened:false,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(group,opts){if(!group){return;}
if(!$.isPlainObject(opts)){opts={};}
if(false===F.close(true)){return;}
if(!$.isArray(group)){group=isQuery(group)?$(group).get():[group];}
$.each(group,function(i,element){var obj={},href,title,content,type,rez,hrefParts,selector;if($.type(element)==="object"){if(element.nodeType){element=$(element);}
if(isQuery(element)){obj={href:element.attr('href'),title:element.attr('title'),isDom:true,element:element};if($.metadata){$.extend(true,obj,element.metadata());}}else{obj=element;}}
href=opts.href||obj.href||(isString(element)?element:null);title=opts.title!==undefined?opts.title:obj.title||'';content=opts.content||obj.content;type=content?'html':(opts.type||obj.type);if(!type&&obj.isDom){type=element.data('fancybox2-type');if(!type){rez=element.prop('class').match(/fancybox2\.(\w+)/);type=rez?rez[1]:null;}}
if(isString(href)){if(!type){if(F.isImage(href)){type='image';}else if(F.isSWF(href)){type='swf';}else if(href.charAt(0)==='#'){type='inline';}else if(isString(element)){type='html';content=element;}}
if(type==='ajax'){hrefParts=href.split(/\s+/,2);href=hrefParts.shift();selector=hrefParts.shift();}}
if(!content){if(type==='inline'){if(href){content=$(isString(href)?href.replace(/.*(?=#[^\s]+$)/,''):href);}else if(obj.isDom){content=element;}}else if(type==='html'){content=href;}else if(!type&&!href&&obj.isDom){type='inline';content=element;}}
$.extend(obj,{href:href,type:type,content:content,title:title,selector:selector});group[i]=obj;});F.opts=$.extend(true,{},F.defaults,opts);if(opts.keys!==undefined){F.opts.keys=opts.keys?$.extend({},F.defaults.keys,opts.keys):false;}
F.group=group;return F._start(F.opts.index);},cancel:function(){var coming=F.coming;if(!coming||false===F.trigger('onCancel')){return;}
F.hideLoading();if(F.ajaxLoad){F.ajaxLoad.abort();}
F.ajaxLoad=null;if(F.imgPreload){F.imgPreload.onload=F.imgPreload.onerror=null;}
if(coming.wrap){coming.wrap.stop(true).trigger('onReset').remove();}
if(!F.current){F.trigger('afterClose');}
F.coming=null;},close:function(immediately){F.cancel();if(false===F.trigger('beforeClose')){return;}
F.unbindEvents();if(!F.isOpen||immediately===true){$('.fancybox2-wrap').stop(true).trigger('onReset').remove();F._afterZoomOut();}else{F.isOpen=F.isOpened=false;F.isClosing=true;$('.fancybox2-item, .fancybox2-nav').remove();F.wrap.stop(true,true).removeClass('fancybox2-opened');if(F.wrap.css('position')==='fixed'){F.wrap.css(F._getPosition(true));}
F.transitions[F.current.closeMethod]();}},play:function(action){var clear=function(){clearTimeout(F.player.timer);},set=function(){clear();if(F.current&&F.player.isActive){F.player.timer=setTimeout(F.next,F.current.playSpeed);}},stop=function(){clear();$('body').unbind('.player');F.player.isActive=false;F.trigger('onPlayEnd');},start=function(){if(F.current&&(F.current.loop||F.current.index<F.group.length-1)){F.player.isActive=true;$('body').bind({'afterShow.player onUpdate.player':set,'onCancel.player beforeClose.player':stop,'beforeLoad.player':clear});set();F.trigger('onPlayStart');}};if(action===true||(!F.player.isActive&&action!==false)){start();}else{stop();}},next:function(direction){var current=F.current;if(current){if(!isString(direction)){direction=current.direction.next;}
F.jumpto(current.index+1,direction,'next');}},prev:function(direction){var current=F.current;if(current){if(!isString(direction)){direction=current.direction.prev;}
F.jumpto(current.index-1,direction,'prev');}},jumpto:function(index,direction,router){var current=F.current;if(!current){return;}
index=getScalar(index);F.direction=direction||current.direction[(index>=current.index?'next':'prev')];F.router=router||'jumpto';if(current.loop){if(index<0){index=current.group.length+(index%current.group.length);}
index=index%current.group.length;}
if(current.group[index]!==undefined){F.cancel();F._start(index);}},reposition:function(e,onlyAbsolute){var pos;if(F.isOpen){pos=F._getPosition(onlyAbsolute);if(e&&e.type==='scroll'){delete pos.position;F.wrap.stop(true,true).animate(pos,200);}else{F.wrap.css(pos);}}},update:function(e){var type=(e&&e.type),anyway=!type||type==='orientationchange';if(anyway){clearTimeout(didUpdate);didUpdate=null;}
if(!F.isOpen||didUpdate){return;}
if(anyway||isTouch){F.wrap.removeAttr('style').addClass('fancybox2-tmp');F.trigger('onUpdate');}
didUpdate=setTimeout(function(){var current=F.current;if(!current){return;}
F.wrap.removeClass('fancybox2-tmp');if(type!=='scroll'){F._setDimension();}
if(!(type==='scroll'&&current.canShrink)){F.reposition(e);}
F.trigger('onUpdate');didUpdate=null;},(isTouch?500:(anyway?20:300)));},toggle:function(action){if(F.isOpen){F.current.fitToView=$.type(action)==="boolean"?action:!F.current.fitToView;F.update();}},hideLoading:function(){D.unbind('keypress.fb');$('#fancybox2-loading').remove();},showLoading:function(){var el,viewport;F.hideLoading();D.bind('keypress.fb',function(e){if((e.which||e.keyCode)===27){e.preventDefault();F.cancel();}});el=$('<div id="fancybox2-loading"><div></div></div>').click(F.cancel).appendTo('body');if(!F.defaults.fixed){viewport=F.getViewport();el.css({position:'absolute',top:(viewport.h*0.5)+viewport.y,left:(viewport.w*0.5)+viewport.x});}},getViewport:function(){var lock=F.current?F.current.locked:false,rez={x:W.scrollLeft(),y:W.scrollTop()};if(lock){rez.w=lock[0].clientWidth;rez.h=lock[0].clientHeight;}else{rez.w=isTouch&&window.innerWidth?window.innerWidth:W.width();rez.h=isTouch&&window.innerHeight?window.innerHeight:W.height();}
return rez;},unbindEvents:function(){if(F.wrap&&isQuery(F.wrap)){F.wrap.unbind('.fb');}
D.unbind('.fb');W.unbind('.fb');},bindEvents:function(){var current=F.current,keys;if(!current){return;}
W.bind('orientationchange.fb'+(isTouch?'':' resize.fb')+(current.autoCenter&&!current.locked?' scroll.fb':''),F.update);keys=current.keys;if(keys){D.bind('keydown.fb',function(e){var code=e.which||e.keyCode,target=e.target||e.srcElement;if(!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&!(target&&(target.type||$(target).is('[contenteditable]')))){$.each(keys,function(i,val){if(current.group.length>1&&val[code]!==undefined){F[i](val[code]);e.preventDefault();return false;}
if($.inArray(code,val)>-1){F[i]();e.preventDefault();return false;}});}});}
if($.fn.mousewheel&&current.mouseWheel){F.wrap.bind('mousewheel.fb',function(e,delta,deltaX,deltaY){var target=e.target||null,parent=$(target),canScroll=false;while(parent.length){if(canScroll||parent.is('.fancybox2-skin')||parent.is('.fancybox2-wrap')){break;}
canScroll=isScrollable(parent[0]);parent=$(parent).parent();}
if(delta!==0&&!canScroll){if(F.group.length>1&&!current.canShrink){if(deltaY>0||deltaX>0){F.prev(deltaY>0?'down':'left');}else if(deltaY<0||deltaX<0){F.next(deltaY<0?'up':'right');}
e.preventDefault();}}});}},trigger:function(event,o){var ret,obj=o||F.coming||F.current;if(!obj){return;}
if($.isFunction(obj[event])){ret=obj[event].apply(obj,Array.prototype.slice.call(arguments,1));}
if(ret===false){return false;}
if(event==='onCancel'&&!F.isOpened){F.isActive=false;}
if(obj.helpers){$.each(obj.helpers,function(helper,opts){if(opts&&F.helpers[helper]&&$.isFunction(F.helpers[helper][event])){F.helpers[helper][event](opts,obj);}});}
$.event.trigger(event+'.fb');},isImage:function(str){return isString(str)&&str.match(/\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$/i);},isSWF:function(str){return isString(str)&&str.match(/\.(swf)((\?|#).*)?$/i);},_start:function(index){var coming={},obj,href,type,margin,padding;index=getScalar(index);obj=F.group[index]||null;if(!obj){return false;}
coming=$.extend(true,{},F.opts,obj);margin=coming.margin;padding=coming.padding;if($.type(margin)==='number'){coming.margin=[margin,margin,margin,margin];}
if($.type(padding)==='number'){coming.padding=[padding,padding,padding,padding];}
if(coming.modal){$.extend(true,coming,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{closeClick:false}}});}
if(coming.autoSize){coming.autoWidth=coming.autoHeight=true;}
if(coming.width==='auto'){coming.autoWidth=true;}
if(coming.height==='auto'){coming.autoHeight=true;}
coming.group=F.group;coming.index=index;F.coming=coming;if(false===F.trigger('beforeLoad')){F.coming=null;return;}
type=coming.type;href=coming.href;if(!type){F.coming=null;if(F.current&&F.router&&F.router!=='jumpto'){F.current.index=index;return F[F.router](F.direction);}
return false;}
F.isActive=true;if(type==='image'||type==='swf'){coming.autoHeight=coming.autoWidth=false;coming.scrolling='visible';}
if(type==='image'){coming.aspectRatio=true;}
if(type==='iframe'&&isTouch){coming.scrolling='scroll';}
coming.wrap=$(coming.tpl.wrap).addClass('fancybox2-'+(isTouch?'mobile':'desktop')+' fancybox2-type-'+type+' fancybox2-tmp '+coming.wrapCSS).appendTo(coming.parent);$.extend(coming,{skin:$('.fancybox2-skin',coming.wrap),outer:$('.fancybox2-outer',coming.wrap),inner:$('.fancybox2-inner',coming.wrap)});$.each(["Top","Right","Bottom","Left"],function(i,v){coming.skin.css('padding'+v,getValue(coming.padding[i]));});F.trigger('onReady');if(type==='inline'||type==='html'){if(!coming.content||!coming.content.length){return F._error('content');}}else if(!href){return F._error('href');}
if(type==='image'){F._loadImage();}else if(type==='ajax'){F._loadAjax();}else if(type==='iframe'){F._loadIframe();}else{F._afterLoad();}},_error:function(type){$.extend(F.coming,{type:'html',autoWidth:true,autoHeight:true,minWidth:0,minHeight:0,scrolling:'no',hasError:type,content:F.coming.tpl.error});F._afterLoad();},_loadImage:function(){var img=F.imgPreload=new Image();img.onload=function(){this.onload=this.onerror=null;F.coming.width=this.width;F.coming.height=this.height;F._afterLoad();};img.onerror=function(){this.onload=this.onerror=null;F._error('image');};img.src=F.coming.href;if(img.complete===undefined||!img.complete){F.showLoading();}},_loadAjax:function(){var coming=F.coming;F.showLoading();F.ajaxLoad=$.ajax($.extend({},coming.ajax,{url:coming.href,error:function(jqXHR,textStatus){if(F.coming&&textStatus!=='abort'){F._error('ajax',jqXHR);}else{F.hideLoading();}},success:function(data,textStatus){if(textStatus==='success'){coming.content=data;F._afterLoad();}}}));},_loadIframe:function(){var coming=F.coming,iframe=$(coming.tpl.iframe.replace(/\{rnd\}/g,new Date().getTime())).attr('scrolling',isTouch?'auto':coming.iframe.scrolling).attr('src',coming.href);$(coming.wrap).bind('onReset',function(){try{$(this).find('iframe').hide().attr('src','//about:blank').end().empty();}catch(e){}});if(coming.iframe.preload){F.showLoading();iframe.one('load',function(){$(this).data('ready',1);if(!isTouch){$(this).bind('load.fb',F.update);}
$(this).parents('.fancybox2-wrap').width('100%').removeClass('fancybox2-tmp').show();F._afterLoad();});}
coming.content=iframe.appendTo(coming.inner);if(!coming.iframe.preload){F._afterLoad();}},_preloadImages:function(){var group=F.group,current=F.current,len=group.length,cnt=current.preload?Math.min(current.preload,len-1):0,item,i;for(i=1;i<=cnt;i+=1){item=group[(current.index+i)%len];if(item.type==='image'&&item.href){new Image().src=item.href;}}},_afterLoad:function(){var coming=F.coming,previous=F.current,placeholder='fancybox2-placeholder',current,content,type,scrolling,href,embed;F.hideLoading();if(!coming||F.isActive===false){return;}
if(false===F.trigger('afterLoad',coming,previous)){coming.wrap.stop(true).trigger('onReset').remove();F.coming=null;return;}
if(previous){F.trigger('beforeChange',previous);previous.wrap.stop(true).removeClass('fancybox2-opened').find('.fancybox2-item, .fancybox2-nav').remove();if(previous.wrap.css('position')==='fixed'){previous.wrap.css(F._getPosition(true));}}
F.unbindEvents();current=coming;content=coming.content;type=coming.type;scrolling=coming.scrolling;$.extend(F,{wrap:current.wrap,skin:current.skin,outer:current.outer,inner:current.inner,current:current,previous:previous});href=current.href;switch(type){case'inline':case'ajax':case'html':if(current.selector){content=$('<div>').html(content).find(current.selector);}else if(isQuery(content)){if(!content.data(placeholder)){content.data(placeholder,$('<div class="'+placeholder+'"></div>').insertAfter(content).hide());}
content=content.show().detach();current.wrap.bind('onReset',function(){if($(this).find(content).length){content.hide().replaceAll(content.data(placeholder)).data(placeholder,false);}});}
break;case'image':content=current.tpl.image.replace('{href}',href);break;case'swf':content='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+href+'"></param>';embed='';$.each(current.swf,function(name,val){content+='<param name="'+name+'" value="'+val+'"></param>';embed+=' '+name+'="'+val+'"';});content+='<embed src="'+href+'" type="application/x-shockwave-flash" width="100%" height="100%"'+embed+'></embed></object>';break;}
if(!(isQuery(content)&&content.parent().is(current.inner))){current.inner.append(content);}
F.trigger('beforeShow');current.inner.css('overflow',scrolling==='yes'?'scroll':(scrolling==='no'?'hidden':scrolling));F._setDimension();current.wrap.removeClass('fancybox2-tmp');current.pos=$.extend({},current.dim,F._getPosition(true));F.isOpen=false;F.coming=null;F.bindEvents();if(!F.isOpened){$('.fancybox2-wrap').not(current.wrap).stop(true).trigger('onReset').remove();}else if(previous.prevMethod){F.transitions[previous.prevMethod]();}
F.transitions[F.isOpened?current.nextMethod:current.openMethod]();F._preloadImages();},_setDimension:function(){var viewport=F.getViewport(),steps=0,canShrink=false,canExpand=false,wrap=F.wrap,skin=F.skin,inner=F.inner,current=F.current,width=current.width,height=current.height,minWidth=current.minWidth,minHeight=current.minHeight,maxWidth=current.maxWidth,maxHeight=current.maxHeight,scrolling=current.scrolling,scrollOut=current.scrollOutside?current.scrollbarWidth:0,margin=current.margin,wMargin=margin[1]+margin[3],hMargin=margin[0]+margin[2],wPadding,hPadding,wSpace,hSpace,origWidth,origHeight,origMaxWidth,origMaxHeight,ratio,width_,height_,maxWidth_,maxHeight_,iframe,body;wrap.add(skin).add(inner).width('auto').height('auto');wPadding=skin.outerWidth(true)-skin.width();hPadding=skin.outerHeight(true)-skin.height();wSpace=wMargin+wPadding;hSpace=hMargin+hPadding;origWidth=isPercentage(width)?(viewport.w-wSpace)*getScalar(width)/100:width;origHeight=isPercentage(height)?(viewport.h-hSpace)*getScalar(height)/100:height;if(current.type==='iframe'){iframe=current.content;if(current.autoHeight&&iframe.data('ready')===1){try{if(iframe[0].contentWindow.document.location){inner.width(origWidth).height(9999);body=iframe.contents().find('body');if(scrollOut){body.css('overflow-x','hidden');}
origHeight=body.height();}}catch(e){}}}else if(current.autoWidth||current.autoHeight){inner.addClass('fancybox2-tmp');if(!current.autoWidth){inner.width(origWidth);}
if(!current.autoHeight){inner.height(origHeight);}
if(current.autoWidth){origWidth=inner.width();}
if(current.autoHeight){origHeight=inner.height();}
inner.removeClass('fancybox2-tmp');}
width=getScalar(origWidth);height=getScalar(origHeight);ratio=origWidth/origHeight;minWidth=getScalar(isPercentage(minWidth)?getScalar(minWidth,'w')-wSpace:minWidth);maxWidth=getScalar(isPercentage(maxWidth)?getScalar(maxWidth,'w')-wSpace:maxWidth);minHeight=getScalar(isPercentage(minHeight)?getScalar(minHeight,'h')-hSpace:minHeight);maxHeight=getScalar(isPercentage(maxHeight)?getScalar(maxHeight,'h')-hSpace:maxHeight);origMaxWidth=maxWidth;origMaxHeight=maxHeight;maxWidth_=viewport.w-wMargin;maxHeight_=viewport.h-hMargin;if(current.aspectRatio){if(width>maxWidth){width=maxWidth;height=width/ratio;}
if(height>maxHeight){height=maxHeight;width=height*ratio;}
if(width<minWidth){width=minWidth;height=width/ratio;}
if(height<minHeight){height=minHeight;width=height*ratio;}}else{width=Math.max(minWidth,Math.min(width,maxWidth));height=Math.max(minHeight,Math.min(height,maxHeight));}
if(current.fitToView){maxWidth=Math.min(viewport.w-wSpace,maxWidth);maxHeight=Math.min(viewport.h-hSpace,maxHeight);inner.width(getScalar(width)).height(getScalar(height));wrap.width(getScalar(width+wPadding));width_=wrap.width();height_=wrap.height();if(current.aspectRatio){while((width_>maxWidth_||height_>maxHeight_)&&width>minWidth&&height>minHeight){if(steps++>19){break;}
height=Math.max(minHeight,Math.min(maxHeight,height-10));width=height*ratio;if(width<minWidth){width=minWidth;height=width/ratio;}
if(width>maxWidth){width=maxWidth;height=width/ratio;}
inner.width(getScalar(width)).height(getScalar(height));wrap.width(getScalar(width+wPadding));width_=wrap.width();height_=wrap.height();}}else{width=Math.max(minWidth,Math.min(width,width-(width_-maxWidth_)));height=Math.max(minHeight,Math.min(height,height-(height_-maxHeight_)));}}
if(scrollOut&&scrolling==='auto'&&height<origHeight&&(width+wPadding+scrollOut)<maxWidth_){width+=scrollOut;}
inner.width(getScalar(width)).height(getScalar(height));wrap.width(getScalar(width+wPadding));width_=wrap.width();height_=wrap.height();canShrink=(width_>maxWidth_||height_>maxHeight_)&&width>minWidth&&height>minHeight;canExpand=current.aspectRatio?(width<origMaxWidth&&height<origMaxHeight&&width<origWidth&&height<origHeight):((width<origMaxWidth||height<origMaxHeight)&&(width<origWidth||height<origHeight));$.extend(current,{dim:{width:getValue(width_),height:getValue(height_)},origWidth:origWidth,origHeight:origHeight,canShrink:canShrink,canExpand:canExpand,wPadding:wPadding,hPadding:hPadding,wrapSpace:height_-skin.outerHeight(true),skinSpace:skin.height()-height});if(!iframe&&current.autoHeight&&height>minHeight&&height<maxHeight&&!canExpand){inner.height('auto');}},_getPosition:function(onlyAbsolute){var current=F.current,viewport=F.getViewport(),margin=current.margin,width=F.wrap.width()+margin[1]+margin[3],height=F.wrap.height()+margin[0]+margin[2],rez={position:'absolute',top:margin[0],left:margin[3]};if(current.autoCenter&&current.fixed&&!onlyAbsolute&&height<=viewport.h&&width<=viewport.w){rez.position='fixed';}else if(!current.locked){rez.top+=viewport.y;rez.left+=viewport.x;}
rez.top=getValue(Math.max(rez.top,rez.top+((viewport.h-height)*current.topRatio)));rez.left=getValue(Math.max(rez.left,rez.left+((viewport.w-width)*current.leftRatio)));return rez;},_afterZoomIn:function(){var current=F.current;if(!current){return;}
F.isOpen=F.isOpened=true;F.wrap.addClass('fancybox2-opened').css('overflow','visible');F.reposition();if(current.closeClick||current.nextClick){F.inner.css('cursor','pointer').bind('click.fb',function(e){if(!$(e.target).is('a')&&!$(e.target).parent().is('a')){F[current.closeClick?'close':'next']();}});}
if(current.closeBtn){$(current.tpl.closeBtn).appendTo(F.skin).bind('click.fb',F.close);}
if(current.arrows&&F.group.length>1){if(current.loop||current.index>0){$(current.tpl.prev).appendTo(F.outer).bind('click.fb',F.prev);}
if(current.loop||current.index<F.group.length-1){$(current.tpl.next).appendTo(F.outer).bind('click.fb',F.next);}}
F.trigger('afterShow');if(!current.loop&&current.index===current.group.length-1){F.play(false);}else if(F.opts.autoPlay&&!F.player.isActive){F.opts.autoPlay=false;F.play();}},_afterZoomOut:function(){var current=F.current;$('.fancybox2-wrap').stop(true).trigger('onReset').remove();$.extend(F,{group:{},opts:{},router:false,current:null,isActive:false,isOpened:false,isOpen:false,isClosing:false,wrap:null,skin:null,outer:null,inner:null});F.trigger('afterClose',current);}});F.transitions={getOrigPosition:function(){var current=F.current,element=current.element,orig=current.orig,pos={},width=50,height=50,hPadding=current.hPadding,wPadding=current.wPadding,viewport=F.getViewport();if(!orig&&current.isDom&&element.is(':visible')){orig=element.find('img:first');if(!orig.length){orig=element;}}
if(isQuery(orig)){pos=orig.offset();if(orig.is('img')){width=orig.outerWidth();height=orig.outerHeight();}}else{pos.top=viewport.y+(viewport.h-height)*current.topRatio;pos.left=viewport.x+(viewport.w-width)*current.leftRatio;}
if(current.locked){pos.top-=viewport.y;pos.left-=viewport.x;}
pos={top:getValue(pos.top-hPadding*current.topRatio),left:getValue(pos.left-wPadding*current.leftRatio),width:getValue(width+wPadding),height:getValue(height+hPadding)};return pos;},step:function(now,fx){var ratio,padding,value,prop=fx.prop,current=F.current,wrapSpace=current.wrapSpace,skinSpace=current.skinSpace;if(prop==='width'||prop==='height'){ratio=fx.end===fx.start?1:(now-fx.start)/(fx.end-fx.start);if(F.isClosing){ratio=1-ratio;}
padding=prop==='width'?current.wPadding:current.hPadding;value=now-padding;F.skin[prop](getScalar(prop==='width'?value:value-(wrapSpace*ratio)));F.inner[prop](getScalar(prop==='width'?value:value-(wrapSpace*ratio)-(skinSpace*ratio)));}},zoomIn:function(){var current=F.current,startPos=current.pos,effect=current.openEffect,elastic=effect==='elastic',endPos=$.extend({opacity:1},startPos);delete endPos.position;if(elastic){startPos=this.getOrigPosition();if(current.openOpacity){startPos.opacity=0.1;}}else if(effect==='fade'){startPos.opacity=0.1;}
F.wrap.css(startPos).animate(endPos,{duration:effect==='none'?0:current.openSpeed,easing:current.openEasing,step:elastic?this.step:null,complete:F._afterZoomIn});},zoomOut:function(){var current=F.current,effect=current.closeEffect,elastic=effect==='elastic',endPos={opacity:0.1};if(elastic){endPos=this.getOrigPosition();if(current.closeOpacity){endPos.opacity=0.1;}}
F.wrap.animate(endPos,{duration:effect==='none'?0:current.closeSpeed,easing:current.closeEasing,step:elastic?this.step:null,complete:F._afterZoomOut});},changeIn:function(){var current=F.current,effect=current.nextEffect,startPos=current.pos,endPos={opacity:1},direction=F.direction,distance=200,field;startPos.opacity=0.1;if(effect==='elastic'){field=direction==='down'||direction==='up'?'top':'left';if(direction==='down'||direction==='right'){startPos[field]=getValue(getScalar(startPos[field])-distance);endPos[field]='+='+distance+'px';}else{startPos[field]=getValue(getScalar(startPos[field])+distance);endPos[field]='-='+distance+'px';}}
if(effect==='none'){F._afterZoomIn();}else{F.wrap.css(startPos).animate(endPos,{duration:current.nextSpeed,easing:current.nextEasing,complete:F._afterZoomIn});}},changeOut:function(){var previous=F.previous,effect=previous.prevEffect,endPos={opacity:0.1},direction=F.direction,distance=200;if(effect==='elastic'){endPos[direction==='down'||direction==='up'?'top':'left']=(direction==='up'||direction==='left'?'-':'+')+'='+distance+'px';}
previous.wrap.animate(endPos,{duration:effect==='none'?0:previous.prevSpeed,easing:previous.prevEasing,complete:function(){$(this).trigger('onReset').remove();}});}};F.helpers.overlay={overlay:null,update:function(){var width='100%',offsetWidth;this.overlay.width(width).height('100%');if(is_explorer){offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(D.width()>offsetWidth){width=D.width();}}else if(D.width()>W.width()){width=D.width();}
this.overlay.width(width).height(D.height());},onReady:function(opts,obj){$('.fancybox2-overlay').stop(true,true);if(!this.overlay){$.extend(this,{overlay:$('<div class="fancybox2-overlay"></div>').appendTo(obj.parent),margin:D.height()>W.height()||$('body').css('overflow-y')==='scroll'?$('body').css('margin-right'):false,el:document.all&&!document.querySelector?$('html'):$('body')});}
if(obj.fixed&&!isTouch){this.overlay.addClass('fancybox2-overlay-fixed');if(obj.autoCenter){this.overlay.append(obj.wrap);obj.locked=this.overlay;}}
if(opts.showEarly===true){this.beforeShow.apply(this,arguments);}},beforeShow:function(opts,obj){var overlay=this.overlay.unbind('.fb').width('auto').height('auto').css(opts.css);if(opts.closeClick){overlay.bind('click.fb',function(e){if($(e.target).hasClass('fancybox2-overlay')){F.close();}});}
if(obj.fixed&&!isTouch){if(obj.locked){this.el.addClass('fancybox2-lock');if(this.margin!==false){$('body').css('margin-right',getScalar(this.margin)+obj.scrollbarWidth);}}}else{this.update();}
overlay.show();},onUpdate:function(opts,obj){if(!obj.fixed||isTouch){this.update();}},afterClose:function(opts){var that=this,speed=opts.speedOut||0;if(that.overlay&&!F.isActive){that.overlay.fadeOut(speed||0,function(){$('body').css('margin-right',that.margin);that.el.removeClass('fancybox2-lock');that.overlay.remove();that.overlay=null;});}}};F.helpers.title={beforeShow:function(opts){var text=F.current.title,type=opts.type,title,target;if(!isString(text)||$.trim(text)===''){return;}
title=$('<div class="fancybox2-title fancybox2-title-'+type+'-wrap">'+text+'</div>');switch(type){case'inside':target=F.skin;break;case'outside':target=F.wrap;break;case'over':target=F.inner;break;default:target=F.skin;title.appendTo('body').width(title.width()).wrapInner('<span class="child"></span>');F.current.margin[2]+=Math.abs(getScalar(title.css('margin-bottom')));break;}
if(opts.position==='top'){title.prependTo(target);}else{title.appendTo(target);}}};$.fn.fancybox2=function(options){var index,that=$(this),selector=this.selector||'',run=function(e){var what=$(this).blur(),idx=index,relType,relVal;if(!(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&!what.is('.fancybox2-wrap')){relType=options.groupAttr||'data-fancybox2-group';relVal=what.attr(relType);if(!relVal){relType='rel';relVal=what.get(0)[relType];}
if(relVal&&relVal!==''&&relVal!=='nofollow'){what=selector.length?$(selector):that;what=what.filter('['+relType+'="'+relVal+'"]');idx=what.index(this);}
options.index=idx;if(F.open(what,options)!==false){e.preventDefault();}}};options=options||{};index=options.index||0;if(!selector||options.live===false){that.unbind('click.fb-start').bind('click.fb-start',run);}else{D.undelegate(selector,'click.fb-start').delegate(selector+":not('.fancybox2-item, .fancybox2-nav')",'click.fb-start',run);}
return this;};D.ready(function(){if($.scrollbarWidth===undefined){$.scrollbarWidth=function(){var parent=$('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo('body'),child=parent.children(),width=child.innerWidth()-child.height(99).innerWidth();parent.remove();return width;};}
if($.support.fixedPosition===undefined){$.support.fixedPosition=(function(){var elem=$('<div style="position:fixed;top:20px;"></div>').appendTo('body'),fixed=(elem[0].offsetTop===20||elem[0].offsetTop===15);elem.remove();return fixed;}());}
$.extend(F.defaults,{scrollbarWidth:$.scrollbarWidth(),fixed:$.support.fixedPosition,parent:$('body')});});}(window,document,jQuery));

/**
 * Copyright (c) 2007-2012 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
 * Dual licensed under MIT and GPL.
 * @author Ariel Flesler
 * @version 1.4.3.1
 */
;(function($){var h=$.scrollTo=function(a,b,c){$(window).scrollTo(a,b,c)};h.defaults={axis:'xy',duration:parseFloat($.fn.jquery)>=1.3?0:1,limit:true};h.window=function(a){return $(window)._scrollable()};$.fn._scrollable=function(){return this.map(function(){var a=this,isWin=!a.nodeName||$.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)return a;var b=(a.contentWindow||a).document||a.ownerDocument||a;return/webkit/i.test(navigator.userAgent)||b.compatMode=='BackCompat'?b.body:b.documentElement})};$.fn.scrollTo=function(e,f,g){if(typeof f=='object'){g=f;f=0}if(typeof g=='function')g={onAfter:g};if(e=='max')e=9e9;g=$.extend({},h.defaults,g);f=f||g.duration;g.queue=g.queue&&g.axis.length>1;if(g.queue)f/=2;g.offset=both(g.offset);g.over=both(g.over);return this._scrollable().each(function(){if(e==null)return;var d=this,$elem=$(d),targ=e,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=$(targ,this);if(!targ.length)return;case'object':if(targ.is||targ.style)toff=(targ=$(targ)).offset()}$.each(g.axis.split(''),function(i,a){var b=a=='x'?'Left':'Top',pos=b.toLowerCase(),key='scroll'+b,old=d[key],max=h.max(d,a);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(g.margin){attr[key]-=parseInt(targ.css('margin'+b))||0;attr[key]-=parseInt(targ.css('border'+b+'Width'))||0}attr[key]+=g.offset[pos]||0;if(g.over[pos])attr[key]+=targ[a=='x'?'width':'height']()*g.over[pos]}else{var c=targ[pos];attr[key]=c.slice&&c.slice(-1)=='%'?parseFloat(c)/100*max:c}if(g.limit&&/^\d+$/.test(attr[key]))attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&g.queue){if(old!=attr[key])animate(g.onAfterFirst);delete attr[key]}});animate(g.onAfter);function animate(a){$elem.animate(attr,f,g.easing,a&&function(){a.call(this,e,g)})}}).end()};h.max=function(a,b){var c=b=='x'?'Width':'Height',scroll='scroll'+c;if(!$(a).is('html,body'))return a[scroll]-$(a)[c.toLowerCase()]();var d='client'+c,html=a.ownerDocument.documentElement,body=a.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[d],body[d])};function both(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);

/* ------------------------------------------------------------------------
 * Class: prettyPhoto
 * Use: Lightbox clone for jQuery
 * Author: Stephane Caron (http://www.no-margin-for-errors.com)
 * Version: 3.0
 * ------------------------------------------------------------------------- */

(function($){$.prettyPhoto={version:'3.0'};$.fn.prettyPhoto=function(pp_settings){pp_settings=jQuery.extend({animation_speed:'fast',slideshow:false,autoplay_slideshow:false,opacity:0.80,show_title:true,allow_resize:true,default_width:500,default_height:344,counter_separator_label:'/',theme:'facebook',hideflash:false,wmode:'opaque',autoplay:true,modal:false,overlay_gallery:true,keyboard_shortcuts:true,changepicturecallback:function(){},callback:function(){},markup:'<div class="pp_pic_holder"><div class="ppt">&nbsp;</div><div class="pp_top"><div class="pp_left"></div><div class="pp_middle"></div><div class="pp_right"></div></div><div class="pp_content_container"><div class="pp_left"><div class="pp_right"><div class="pp_content"><div class="pp_loaderIcon"></div><div class="pp_fade"><a href="#" class="pp_expand" title="Expand the image">Expand</a><div class="pp_hoverContainer"><a class="pp_next" href="#">next</a><a class="pp_previous" href="#">previous</a></div><div id="pp_full_res"></div><div class="pp_details clearfix"><p class="pp_description"></p><a class="pp_close" href="#">Close</a><div class="pp_nav"><a href="#" class="pp_arrow_previous">Previous</a><p class="currentTextHolder">0/0</p><a href="#" class="pp_arrow_next">Next</a></div></div></div></div></div></div></div><div class="pp_bottom"><div class="pp_left"></div><div class="pp_middle"></div><div class="pp_right"></div></div></div><div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery"><a href="#" class="pp_arrow_previous">Previous</a><ul>{gallery}</ul><a href="#" class="pp_arrow_next">Next</a></div>',image_markup:'<img id="fullResImage" src="" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline clearfix">{content}</div>',custom_markup:''},pp_settings);var matchedObjects=this,percentBased=false,correctSizes,pp_open,pp_contentHeight,pp_contentWidth,pp_containerHeight,pp_containerWidth,windowHeight=$(window).height(),windowWidth=$(window).width(),pp_slideshow;doresize=true,scroll_pos=_get_scroll();$(window).unbind('resize').resize(function(){_center_overlay();_resize_overlay();});if(pp_settings.keyboard_shortcuts){$(document).unbind('keydown').keydown(function(e){if(typeof $pp_pic_holder!='undefined'){if($pp_pic_holder.is(':visible')){switch(e.keyCode){case 37:$.prettyPhoto.changePage('previous');break;case 39:$.prettyPhoto.changePage('next');break;case 27:if(!settings.modal)
$.prettyPhoto.close();break;};return false;};};});}
$.prettyPhoto.initialize=function(){settings=pp_settings;if($.browser.msie&&parseInt($.browser.version)==6)settings.theme="light_square";_buildOverlay(this);if(settings.allow_resize)
$(window).scroll(function(){_center_overlay();});_center_overlay();set_position=jQuery.inArray($(this).attr('href'),pp_images);$.prettyPhoto.open();return false;}
$.prettyPhoto.open=function(){if(typeof settings=="undefined"){settings=pp_settings;if($.browser.msie&&$.browser.version==6)settings.theme="light_square";_buildOverlay(this);pp_images=$.makeArray(arguments[0]);pp_titles=(arguments[1])?$.makeArray(arguments[1]):$.makeArray("");pp_descriptions=(arguments[2])?$.makeArray(arguments[2]):$.makeArray("");isSet=(pp_images.length>1)?true:false;set_position=0;}
if($.browser.msie&&$.browser.version==6)$('select').css('visibility','hidden');if(settings.hideflash)$('object,embed').css('visibility','hidden');_checkPosition($(pp_images).size());$('.pp_loaderIcon').show();if($ppt.is(':hidden'))$ppt.css('opacity',0).show();$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity);$pp_pic_holder.find('.currentTextHolder').text((set_position+1)+settings.counter_separator_label+$(pp_images).size());$pp_pic_holder.find('.pp_description').show().html(unescape(pp_descriptions[set_position]));(settings.show_title&&pp_titles[set_position]!="")?$ppt.html(unescape(pp_titles[set_position])):$ppt.html('&nbsp;');movie_width=(parseFloat(grab_param('width',pp_images[set_position])))?grab_param('width',pp_images[set_position]):settings.default_width.toString();movie_height=(parseFloat(grab_param('height',pp_images[set_position])))?grab_param('height',pp_images[set_position]):settings.default_height.toString();if(movie_width.indexOf('%')!=-1||movie_height.indexOf('%')!=-1){movie_height=parseFloat(($(window).height()*parseFloat(movie_height)/100)-150);movie_width=parseFloat(($(window).width()*parseFloat(movie_width)/100)-150);percentBased=true;}else{percentBased=false;}
$pp_pic_holder.fadeIn(function(){imgPreloader="";switch(_getFileType(pp_images[set_position])){case'image':imgPreloader=new Image();nextImage=new Image();if(isSet&&set_position>$(pp_images).size())nextImage.src=pp_images[set_position+1];prevImage=new Image();if(isSet&&pp_images[set_position-1])prevImage.src=pp_images[set_position-1];$pp_pic_holder.find('#pp_full_res')[0].innerHTML=settings.image_markup;$pp_pic_holder.find('#fullResImage').attr('src',pp_images[set_position]);imgPreloader.onload=function(){correctSizes=_fitToViewport(imgPreloader.width,imgPreloader.height);_showContent();};imgPreloader.onerror=function(){alert('Image cannot be loaded. Make sure the path is correct and image exist.');$.prettyPhoto.close();};imgPreloader.src=pp_images[set_position];break;case'youtube':correctSizes=_fitToViewport(movie_width,movie_height);movie='http://www.youtube.com/v/'+grab_param('v',pp_images[set_position]);if(settings.autoplay)movie+="&autoplay=1";toInject=settings.flash_markup.replace(/{width}/g,correctSizes['width']).replace(/{height}/g,correctSizes['height']).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case'vimeo':correctSizes=_fitToViewport(movie_width,movie_height);movie_id=pp_images[set_position];var regExp=/http:\/\/(www\.)?vimeo.com\/(\d+)/;var match=movie_id.match(regExp);movie='http://player.vimeo.com/video/'+match[2]+'?title=0&amp;byline=0&amp;portrait=0';if(settings.autoplay)movie+="&autoplay=1;";vimeo_width=correctSizes['width']+'/embed/?moog_width='+correctSizes['width'];toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,correctSizes['height']).replace(/{path}/g,movie);break;case'quicktime':correctSizes=_fitToViewport(movie_width,movie_height);correctSizes['height']+=15;correctSizes['contentHeight']+=15;correctSizes['containerHeight']+=15;toInject=settings.quicktime_markup.replace(/{width}/g,correctSizes['width']).replace(/{height}/g,correctSizes['height']).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case'flash':correctSizes=_fitToViewport(movie_width,movie_height);flash_vars=pp_images[set_position];flash_vars=flash_vars.substring(pp_images[set_position].indexOf('flashvars')+10,pp_images[set_position].length);filename=pp_images[set_position];filename=filename.substring(0,filename.indexOf('?'));toInject=settings.flash_markup.replace(/{width}/g,correctSizes['width']).replace(/{height}/g,correctSizes['height']).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+'?'+flash_vars);break;case'iframe':correctSizes=_fitToViewport(movie_width,movie_height);frame_url=pp_images[set_position];frame_url=frame_url.substr(0,frame_url.indexOf('iframe')-1);toInject=settings.iframe_markup.replace(/{width}/g,correctSizes['width']).replace(/{height}/g,correctSizes['height']).replace(/{path}/g,frame_url);break;case'custom':correctSizes=_fitToViewport(movie_width,movie_height);toInject=settings.custom_markup;break;case'inline':myClone=$(pp_images[set_position]).clone().css({'width':settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline clearfix"></div></div>').appendTo($('body'));correctSizes=_fitToViewport($(myClone).width(),$(myClone).height());$(myClone).remove();toInject=settings.inline_markup.replace(/{content}/g,$(pp_images[set_position]).html());break;};if(!imgPreloader){$pp_pic_holder.find('#pp_full_res')[0].innerHTML=toInject;_showContent();};});return false;};$.prettyPhoto.changePage=function(direction){currentGalleryPage=0;if(direction=='previous'){set_position--;if(set_position<0){set_position=0;return;};}else if(direction=='next'){set_position++;if(set_position>$(pp_images).size()-1){set_position=0;}}else{set_position=direction;};if(!doresize)doresize=true;$('.pp_contract').removeClass('pp_contract').addClass('pp_expand');_hideContent(function(){$.prettyPhoto.open();});};$.prettyPhoto.changeGalleryPage=function(direction){if(direction=='next'){currentGalleryPage++;if(currentGalleryPage>totalPage){currentGalleryPage=0;};}else if(direction=='previous'){currentGalleryPage--;if(currentGalleryPage<0){currentGalleryPage=totalPage;};}else{currentGalleryPage=direction;};itemsToSlide=(currentGalleryPage==totalPage)?pp_images.length-((totalPage)*itemsPerPage):itemsPerPage;$pp_pic_holder.find('.pp_gallery li').each(function(i){$(this).animate({'left':(i*itemWidth)-((itemsToSlide*itemWidth)*currentGalleryPage)});});};$.prettyPhoto.startSlideshow=function(){if(typeof pp_slideshow=='undefined'){$pp_pic_holder.find('.pp_play').unbind('click').removeClass('pp_play').addClass('pp_pause').click(function(){$.prettyPhoto.stopSlideshow();return false;});pp_slideshow=setInterval($.prettyPhoto.startSlideshow,settings.slideshow);}else{$.prettyPhoto.changePage('next');};}
$.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find('.pp_pause').unbind('click').removeClass('pp_pause').addClass('pp_play').click(function(){$.prettyPhoto.startSlideshow();return false;});clearInterval(pp_slideshow);pp_slideshow=undefined;}
$.prettyPhoto.close=function(){clearInterval(pp_slideshow);$pp_pic_holder.stop().find('object,embed').css('visibility','hidden');$('div.pp_pic_holder,div.ppt,.pp_fade').fadeOut(settings.animation_speed,function(){$(this).remove();});$pp_overlay.fadeOut(settings.animation_speed,function(){if($.browser.msie&&$.browser.version==6)$('select').css('visibility','visible');if(settings.hideflash)$('object,embed').css('visibility','visible');$(this).remove();$(window).unbind('scroll');settings.callback();doresize=true;pp_open=false;delete settings;});};_showContent=function(){$('.pp_loaderIcon').hide();$ppt.fadeTo(settings.animation_speed,1);projectedTop=scroll_pos['scrollTop']+((windowHeight/2)-(correctSizes['containerHeight']/2));if(projectedTop<0)projectedTop=0;$pp_pic_holder.find('.pp_content').animate({'height':correctSizes['contentHeight']},settings.animation_speed);$pp_pic_holder.animate({'top':projectedTop,'left':(windowWidth/2)-(correctSizes['containerWidth']/2),'width':correctSizes['containerWidth']},settings.animation_speed,function(){$pp_pic_holder.find('.pp_hoverContainer,#fullResImage').height(correctSizes['height']).width(correctSizes['width']);$pp_pic_holder.find('.pp_fade').fadeIn(settings.animation_speed);if(isSet&&_getFileType(pp_images[set_position])=="image"){$pp_pic_holder.find('.pp_hoverContainer').show();}else{$pp_pic_holder.find('.pp_hoverContainer').hide();}
if(correctSizes['resized'])$('a.pp_expand,a.pp_contract').fadeIn(settings.animation_speed);if(settings.autoplay_slideshow&&!pp_slideshow&&!pp_open)$.prettyPhoto.startSlideshow();settings.changepicturecallback();pp_open=true;});_insert_gallery();};function _hideContent(callback){$pp_pic_holder.find('#pp_full_res object,#pp_full_res embed').css('visibility','hidden');$pp_pic_holder.find('.pp_fade').fadeOut(settings.animation_speed,function(){$('.pp_loaderIcon').show();callback();});};function _checkPosition(setCount){if(set_position==setCount-1){$pp_pic_holder.find('a.pp_next').css('visibility','hidden');$pp_pic_holder.find('a.pp_next').addClass('disabled').unbind('click');}else{$pp_pic_holder.find('a.pp_next').css('visibility','visible');$pp_pic_holder.find('a.pp_next.disabled').removeClass('disabled').bind('click',function(){$.prettyPhoto.changePage('next');return false;});};if(set_position==0){$pp_pic_holder.find('a.pp_previous').css('visibility','hidden').addClass('disabled').unbind('click');}else{$pp_pic_holder.find('a.pp_previous.disabled').css('visibility','visible').removeClass('disabled').bind('click',function(){$.prettyPhoto.changePage('previous');return false;});};(setCount>1)?$('.pp_nav').show():$('.pp_nav').hide();};function _fitToViewport(width,height){resized=false;_getDimensions(width,height);imageWidth=width,imageHeight=height;if(((pp_containerWidth>windowWidth)||(pp_containerHeight>windowHeight))&&doresize&&settings.allow_resize&&!percentBased){resized=true,fitting=false;while(!fitting){if((pp_containerWidth>windowWidth)){imageWidth=(windowWidth-200);imageHeight=(height/width)*imageWidth;}else if((pp_containerHeight>windowHeight)){imageHeight=(windowHeight-200);imageWidth=(width/height)*imageHeight;}else{fitting=true;};pp_containerHeight=imageHeight,pp_containerWidth=imageWidth;};_getDimensions(imageWidth,imageHeight);};return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(pp_containerHeight),containerWidth:Math.floor(pp_containerWidth)+40,contentHeight:Math.floor(pp_contentHeight),contentWidth:Math.floor(pp_contentWidth),resized:resized};};function _getDimensions(width,height){width=parseFloat(width);height=parseFloat(height);$pp_details=$pp_pic_holder.find('.pp_details');$pp_details.width(width);detailsHeight=parseFloat($pp_details.css('marginTop'))+parseFloat($pp_details.css('marginBottom'));$pp_details=$pp_details.clone().appendTo($('body')).css({'position':'absolute','top':-10000});detailsHeight+=$pp_details.height();detailsHeight=(detailsHeight<=34)?36:detailsHeight;if($.browser.msie&&$.browser.version==7)detailsHeight+=8;$pp_details.remove();pp_contentHeight=height+detailsHeight;pp_contentWidth=width;pp_containerHeight=pp_contentHeight+$ppt.height()+$pp_pic_holder.find('.pp_top').height()+$pp_pic_holder.find('.pp_bottom').height();pp_containerWidth=width;}
function _getFileType(itemSrc){if(itemSrc.match(/youtube\.com\/watch/i)){return'youtube';}else if(itemSrc.match(/vimeo\.com/i)){return'vimeo';}else if(itemSrc.indexOf('.mov')!=-1){return'quicktime';}else if(itemSrc.indexOf('.swf')!=-1){return'flash';}else if(itemSrc.indexOf('iframe')!=-1){return'iframe';}else if(itemSrc.indexOf('custom')!=-1){return'custom';}else if(itemSrc.substr(0,1)=='#'){return'inline';}else{return'image';};};function _center_overlay(){if(doresize&&typeof $pp_pic_holder!='undefined'){scroll_pos=_get_scroll();titleHeight=$ppt.height(),contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width();projectedTop=(windowHeight/2)+scroll_pos['scrollTop']-(contentHeight/2);$pp_pic_holder.css({'top':projectedTop,'left':(windowWidth/2)+scroll_pos['scrollLeft']-(contentwidth/2)});};};function _get_scroll(){if(self.pageYOffset){return{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset};}else if(document.documentElement&&document.documentElement.scrollTop){return{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft};}else if(document.body){return{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft};};};function _resize_overlay(){windowHeight=$(window).height(),windowWidth=$(window).width();if(typeof $pp_overlay!="undefined")$pp_overlay.height($(document).height());};function _insert_gallery(){if(isSet&&settings.overlay_gallery&&_getFileType(pp_images[set_position])=="image"){itemWidth=52+5;navWidth=(settings.theme=="facebook")?58:38;itemsPerPage=Math.floor((correctSizes['containerWidth']-100-navWidth)/itemWidth);itemsPerPage=(itemsPerPage<pp_images.length)?itemsPerPage:pp_images.length;totalPage=Math.ceil(pp_images.length/itemsPerPage)-1;if(totalPage==0){navWidth=0;$pp_pic_holder.find('.pp_gallery .pp_arrow_next,.pp_gallery .pp_arrow_previous').hide();}else{$pp_pic_holder.find('.pp_gallery .pp_arrow_next,.pp_gallery .pp_arrow_previous').show();};galleryWidth=itemsPerPage*itemWidth+navWidth;$pp_pic_holder.find('.pp_gallery').width(galleryWidth).css('margin-left',-(galleryWidth/2));$pp_pic_holder.find('.pp_gallery ul').width(itemsPerPage*itemWidth).find('li.selected').removeClass('selected');goToPage=(Math.floor(set_position/itemsPerPage)<=totalPage)?Math.floor(set_position/itemsPerPage):totalPage;if(itemsPerPage){$pp_pic_holder.find('.pp_gallery').hide().show().removeClass('disabled');}else{$pp_pic_holder.find('.pp_gallery').hide().addClass('disabled');}
$.prettyPhoto.changeGalleryPage(goToPage);$pp_pic_holder.find('.pp_gallery ul li:eq('+set_position+')').addClass('selected');}else{$pp_pic_holder.find('.pp_content').unbind('mouseenter mouseleave');$pp_pic_holder.find('.pp_gallery').hide();}}
function _buildOverlay(caller){theRel=$(caller).attr('rel');galleryRegExp=/\[(?:.*)\]/;isSet=(galleryRegExp.exec(theRel))?true:false;pp_images=(isSet)?jQuery.map(matchedObjects,function(n,i){if($(n).attr('rel').indexOf(theRel)!=-1)return $(n).attr('href');}):$.makeArray($(caller).attr('href'));pp_titles=(isSet)?jQuery.map(matchedObjects,function(n,i){if($(n).attr('rel').indexOf(theRel)!=-1)return($(n).find('img').attr('alt'))?$(n).find('img').attr('alt'):"";}):$.makeArray($(caller).find('img').attr('alt'));pp_descriptions=(isSet)?jQuery.map(matchedObjects,function(n,i){if($(n).attr('rel').indexOf(theRel)!=-1)return($(n).attr('title'))?$(n).attr('title'):"";}):$.makeArray($(caller).attr('title'));$('body').append(settings.markup);$pp_pic_holder=$('.pp_pic_holder'),$ppt=$('.ppt'),$pp_overlay=$('div.pp_overlay');if(isSet&&settings.overlay_gallery){currentGalleryPage=0;toInject="";for(var i=0;i<pp_images.length;i++){var regex=new RegExp("(.*?)\.(jpg|jpeg|png|gif)$");var results=regex.exec(pp_images[i]);if(!results){classname='default';}else{classname='';}
toInject+="<li class='"+classname+"'><a href='#'><img src='"+pp_images[i]+"' width='50' alt='' /></a></li>";};toInject=settings.gallery_markup.replace(/{gallery}/g,toInject);$pp_pic_holder.find('#pp_full_res').after(toInject);$pp_pic_holder.find('.pp_gallery .pp_arrow_next').click(function(){$.prettyPhoto.changeGalleryPage('next');$.prettyPhoto.stopSlideshow();return false;});$pp_pic_holder.find('.pp_gallery .pp_arrow_previous').click(function(){$.prettyPhoto.changeGalleryPage('previous');$.prettyPhoto.stopSlideshow();return false;});$pp_pic_holder.find('.pp_content').hover(function(){$pp_pic_holder.find('.pp_gallery:not(.disabled)').fadeIn();},function(){$pp_pic_holder.find('.pp_gallery:not(.disabled)').fadeOut();});itemWidth=52+5;$pp_pic_holder.find('.pp_gallery ul li').each(function(i){$(this).css({'position':'absolute','left':i*itemWidth});$(this).find('a').unbind('click').click(function(){$.prettyPhoto.changePage(i);$.prettyPhoto.stopSlideshow();return false;});});};if(settings.slideshow){$pp_pic_holder.find('.pp_nav').prepend('<a href="#" class="pp_play">Play</a>')
$pp_pic_holder.find('.pp_nav .pp_play').click(function(){$.prettyPhoto.startSlideshow();return false;});}
$pp_pic_holder.attr('class','pp_pic_holder '+settings.theme);$pp_overlay.css({'opacity':0,'height':$(document).height(),'width':$(document).width()}).bind('click',function(){if(!settings.modal)$.prettyPhoto.close();});$('a.pp_close').bind('click',function(){$.prettyPhoto.close();return false;});$('a.pp_expand').bind('click',function(e){if($(this).hasClass('pp_expand')){$(this).removeClass('pp_expand').addClass('pp_contract');doresize=false;}else{$(this).removeClass('pp_contract').addClass('pp_expand');doresize=true;};_hideContent(function(){$.prettyPhoto.open();});return false;});$pp_pic_holder.find('.pp_previous, .pp_nav .pp_arrow_previous').bind('click',function(){$.prettyPhoto.changePage('previous');$.prettyPhoto.stopSlideshow();return false;});$pp_pic_holder.find('.pp_next, .pp_nav .pp_arrow_next').bind('click',function(){$.prettyPhoto.changePage('next');$.prettyPhoto.stopSlideshow();return false;});_center_overlay();};return this.unbind('click').click($.prettyPhoto.initialize);};function grab_param(name,url){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);return(results==null)?"":results[1];}})(jQuery);

/*
 * jQuery Nivo Slider v3.2
 * http://nivo.dev7studios.com
 *
 * Copyright 2012, Dev7studios
 * Free to use and abuse under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 */

(function(e){var t=function(t,n){var r=e.extend({},e.fn.nivoSlider.defaults,n);var i={currentSlide:0,currentImage:"",totalSlides:0,running:false,paused:false,stop:false,controlNavEl:false};var s=e(t);s.data("nivo:vars",i).addClass("nivoSlider");var o=s.children();o.each(function(){var t=e(this);var n="";if(!t.is("img")){if(t.is("a")){t.addClass("nivo-imageLink");n=t}t=t.find("img:first")}var r=r===0?t.attr("width"):t.width(),s=s===0?t.attr("height"):t.height();if(n!==""){n.css("display","none")}t.css("display","none");i.totalSlides++});if(r.randomStart){r.startSlide=Math.floor(Math.random()*i.totalSlides)}if(r.startSlide>0){if(r.startSlide>=i.totalSlides){r.startSlide=i.totalSlides-1}i.currentSlide=r.startSlide}if(e(o[i.currentSlide]).is("img")){i.currentImage=e(o[i.currentSlide])}else{i.currentImage=e(o[i.currentSlide]).find("img:first")}if(e(o[i.currentSlide]).is("a")){e(o[i.currentSlide]).css("display","block")}var u=e("<img/>").addClass("nivo-main-image");u.attr("src",i.currentImage.attr("src")).show();s.append(u);e(window).resize(function(){s.children("img").width(s.width());u.attr("src",i.currentImage.attr("src"));u.stop().height("auto");e(".nivo-slice").remove();e(".nivo-box").remove()});s.append(e('<div class="nivo-caption"></div>'));var a=function(t){var n=e(".nivo-caption",s);if(i.currentImage.attr("title")!=""&&i.currentImage.attr("title")!=undefined){var r=i.currentImage.attr("title");if(r.substr(0,1)=="#")r=e(r).html();if(n.css("display")=="block"){setTimeout(function(){n.html(r)},t.animSpeed)}else{n.html(r);n.stop().fadeIn(t.animSpeed)}}else{n.stop().fadeOut(t.animSpeed)}};a(r);var f=0;if(!r.manualAdvance&&o.length>1){f=setInterval(function(){d(s,o,r,false)},r.pauseTime)}if(r.directionNav){s.append('<div class="nivo-directionNav"><a class="nivo-prevNav">'+r.prevText+'</a><a class="nivo-nextNav">'+r.nextText+"</a></div>");e(s).on("click","a.nivo-prevNav",function(){if(i.running){return false}clearInterval(f);f="";i.currentSlide-=2;d(s,o,r,"prev")});e(s).on("click","a.nivo-nextNav",function(){if(i.running){return false}clearInterval(f);f="";d(s,o,r,"next")})}if(r.controlNav){i.controlNavEl=e('<div class="nivo-controlNav"></div>');s.after(i.controlNavEl);for(var l=0;l<o.length;l++){if(r.controlNavThumbs){i.controlNavEl.addClass("nivo-thumbs-enabled");var c=o.eq(l);if(!c.is("img")){c=c.find("img:first")}if(c.attr("data-thumb"))i.controlNavEl.append('<a class="nivo-control" rel="'+l+'"><img src="'+c.attr("data-thumb")+'" alt="" /></a>')}else{i.controlNavEl.append('<a class="nivo-control" rel="'+l+'">'+(l+1)+"</a>")}}e("a:eq("+i.currentSlide+")",i.controlNavEl).addClass("active");e("a",i.controlNavEl).bind("click",function(){if(i.running)return false;if(e(this).hasClass("active"))return false;clearInterval(f);f="";u.attr("src",i.currentImage.attr("src"));i.currentSlide=e(this).attr("rel")-1;d(s,o,r,"control")})}if(r.pauseOnHover){s.hover(function(){i.paused=true;clearInterval(f);f=""},function(){i.paused=false;if(f===""&&!r.manualAdvance){f=setInterval(function(){d(s,o,r,false)},r.pauseTime)}})}s.bind("nivo:animFinished",function(){u.attr("src",i.currentImage.attr("src"));i.running=false;e(o).each(function(){if(e(this).is("a")){e(this).css("display","none")}});if(e(o[i.currentSlide]).is("a")){e(o[i.currentSlide]).css("display","block")}if(f===""&&!i.paused&&!r.manualAdvance){f=setInterval(function(){d(s,o,r,false)},r.pauseTime)}r.afterChange.call(this)});var h=function(t,n,r){if(e(r.currentImage).parent().is("a"))e(r.currentImage).parent().css("display","block");e('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").width(t.width()).css("visibility","hidden").show();var i=e('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").parent().is("a")?e('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").parent().height():e('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").height();for(var s=0;s<n.slices;s++){var o=Math.round(t.width()/n.slices);if(s===n.slices-1){t.append(e('<div class="nivo-slice" name="'+s+'"><img src="'+r.currentImage.attr("src")+'" style="position:absolute; width:'+t.width()+"px; height:auto; display:block !important; top:0; left:-"+(o+s*o-o)+'px;" /></div>').css({left:o*s+"px",width:t.width()-o*s+"px",height:i+"px",opacity:"0",overflow:"hidden"}))}else{t.append(e('<div class="nivo-slice" name="'+s+'"><img src="'+r.currentImage.attr("src")+'" style="position:absolute; width:'+t.width()+"px; height:auto; display:block !important; top:0; left:-"+(o+s*o-o)+'px;" /></div>').css({left:o*s+"px",width:o+"px",height:i+"px",opacity:"0",overflow:"hidden"}))}}e(".nivo-slice",t).height(i);u.stop().animate({height:e(r.currentImage).height()},n.animSpeed)};var p=function(t,n,r){if(e(r.currentImage).parent().is("a"))e(r.currentImage).parent().css("display","block");e('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").width(t.width()).css("visibility","hidden").show();var i=Math.round(t.width()/n.boxCols),s=Math.round(e('img[src="'+r.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").height()/n.boxRows);for(var o=0;o<n.boxRows;o++){for(var a=0;a<n.boxCols;a++){if(a===n.boxCols-1){t.append(e('<div class="nivo-box" name="'+a+'" rel="'+o+'"><img src="'+r.currentImage.attr("src")+'" style="position:absolute; width:'+t.width()+"px; height:auto; display:block; top:-"+s*o+"px; left:-"+i*a+'px;" /></div>').css({opacity:0,left:i*a+"px",top:s*o+"px",width:t.width()-i*a+"px"}));e('.nivo-box[name="'+a+'"]',t).height(e('.nivo-box[name="'+a+'"] img',t).height()+"px")}else{t.append(e('<div class="nivo-box" name="'+a+'" rel="'+o+'"><img src="'+r.currentImage.attr("src")+'" style="position:absolute; width:'+t.width()+"px; height:auto; display:block; top:-"+s*o+"px; left:-"+i*a+'px;" /></div>').css({opacity:0,left:i*a+"px",top:s*o+"px",width:i+"px"}));e('.nivo-box[name="'+a+'"]',t).height(e('.nivo-box[name="'+a+'"] img',t).height()+"px")}}}u.stop().animate({height:e(r.currentImage).height()},n.animSpeed)};var d=function(t,n,r,i){var s=t.data("nivo:vars");if(s&&s.currentSlide===s.totalSlides-1){r.lastSlide.call(this)}if((!s||s.stop)&&!i){return false}r.beforeChange.call(this);if(!i){u.attr("src",s.currentImage.attr("src"))}else{if(i==="prev"){u.attr("src",s.currentImage.attr("src"))}if(i==="next"){u.attr("src",s.currentImage.attr("src"))}}s.currentSlide++;if(s.currentSlide===s.totalSlides){s.currentSlide=0;r.slideshowEnd.call(this)}if(s.currentSlide<0){s.currentSlide=s.totalSlides-1}if(e(n[s.currentSlide]).is("img")){s.currentImage=e(n[s.currentSlide])}else{s.currentImage=e(n[s.currentSlide]).find("img:first")}if(r.controlNav){e("a",s.controlNavEl).removeClass("active");e("a:eq("+s.currentSlide+")",s.controlNavEl).addClass("active")}a(r);e(".nivo-slice",t).remove();e(".nivo-box",t).remove();var o=r.effect,f="";if(r.effect==="random"){f=new Array("sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse");o=f[Math.floor(Math.random()*(f.length+1))];if(o===undefined){o="fade"}}if(r.effect.indexOf(",")!==-1){f=r.effect.split(",");o=f[Math.floor(Math.random()*f.length)];if(o===undefined){o="fade"}}if(s.currentImage.attr("data-transition")){o=s.currentImage.attr("data-transition")}s.running=true;var l=0,c=0,d="",m="",g="",y="";if(o==="sliceDown"||o==="sliceDownRight"||o==="sliceDownLeft"){h(t,r,s);l=0;c=0;d=e(".nivo-slice",t);if(o==="sliceDownLeft"){d=e(".nivo-slice",t)._reverse()}d.each(function(){var n=e(this);n.css({top:"0px"});if(c===r.slices-1){setTimeout(function(){n.animate({opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+l)}else{setTimeout(function(){n.animate({opacity:"1.0"},r.animSpeed)},100+l)}l+=50;c++})}else if(o==="sliceUp"||o==="sliceUpRight"||o==="sliceUpLeft"){h(t,r,s);l=0;c=0;d=e(".nivo-slice",t);if(o==="sliceUpLeft"){d=e(".nivo-slice",t)._reverse()}d.each(function(){var n=e(this);n.css({bottom:"0px"});if(c===r.slices-1){setTimeout(function(){n.animate({opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+l)}else{setTimeout(function(){n.animate({opacity:"1.0"},r.animSpeed)},100+l)}l+=50;c++})}else if(o==="sliceUpDown"||o==="sliceUpDownRight"||o==="sliceUpDownLeft"){h(t,r,s);l=0;c=0;var b=0;d=e(".nivo-slice",t);if(o==="sliceUpDownLeft"){d=e(".nivo-slice",t)._reverse()}d.each(function(){var n=e(this);if(c===0){n.css("top","0px");c++}else{n.css("bottom","0px");c=0}if(b===r.slices-1){setTimeout(function(){n.animate({opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+l)}else{setTimeout(function(){n.animate({opacity:"1.0"},r.animSpeed)},100+l)}l+=50;b++})}else if(o==="fold"){h(t,r,s);l=0;c=0;e(".nivo-slice",t).each(function(){var n=e(this);var i=n.width();n.css({top:"0px",width:"0px"});if(c===r.slices-1){setTimeout(function(){n.animate({width:i,opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+l)}else{setTimeout(function(){n.animate({width:i,opacity:"1.0"},r.animSpeed)},100+l)}l+=50;c++})}else if(o==="fade"){h(t,r,s);m=e(".nivo-slice:first",t);m.css({width:t.width()+"px"});m.animate({opacity:"1.0"},r.animSpeed*2,"",function(){t.trigger("nivo:animFinished")})}else if(o==="slideInRight"){h(t,r,s);m=e(".nivo-slice:first",t);m.css({width:"0px",opacity:"1"});m.animate({width:t.width()+"px"},r.animSpeed*2,"",function(){t.trigger("nivo:animFinished")})}else if(o==="slideInLeft"){h(t,r,s);m=e(".nivo-slice:first",t);m.css({width:"0px",opacity:"1",left:"",right:"0px"});m.animate({width:t.width()+"px"},r.animSpeed*2,"",function(){m.css({left:"0px",right:""});t.trigger("nivo:animFinished")})}else if(o==="boxRandom"){p(t,r,s);g=r.boxCols*r.boxRows;c=0;l=0;y=v(e(".nivo-box",t));y.each(function(){var n=e(this);if(c===g-1){setTimeout(function(){n.animate({opacity:"1"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+l)}else{setTimeout(function(){n.animate({opacity:"1"},r.animSpeed)},100+l)}l+=20;c++})}else if(o==="boxRain"||o==="boxRainReverse"||o==="boxRainGrow"||o==="boxRainGrowReverse"){p(t,r,s);g=r.boxCols*r.boxRows;c=0;l=0;var w=0;var E=0;var S=[];S[w]=[];y=e(".nivo-box",t);if(o==="boxRainReverse"||o==="boxRainGrowReverse"){y=e(".nivo-box",t)._reverse()}y.each(function(){S[w][E]=e(this);E++;if(E===r.boxCols){w++;E=0;S[w]=[]}});for(var x=0;x<r.boxCols*2;x++){var T=x;for(var N=0;N<r.boxRows;N++){if(T>=0&&T<r.boxCols){(function(n,i,s,u,a){var f=e(S[n][i]);var l=f.width();var c=f.height();if(o==="boxRainGrow"||o==="boxRainGrowReverse"){f.width(0).height(0)}if(u===a-1){setTimeout(function(){f.animate({opacity:"1",width:l,height:c},r.animSpeed/1.3,"",function(){t.trigger("nivo:animFinished")})},100+s)}else{setTimeout(function(){f.animate({opacity:"1",width:l,height:c},r.animSpeed/1.3)},100+s)}})(N,T,l,c,g);c++}T--}l+=100}}};var v=function(e){for(var t,n,r=e.length;r;t=parseInt(Math.random()*r,10),n=e[--r],e[r]=e[t],e[t]=n);return e};var m=function(e){if(this.console&&typeof console.log!=="undefined"){console.log(e)}};this.stop=function(){if(!e(t).data("nivo:vars").stop){e(t).data("nivo:vars").stop=true;m("Stop Slider")}};this.start=function(){if(e(t).data("nivo:vars").stop){e(t).data("nivo:vars").stop=false;m("Start Slider")}};r.afterLoad.call(this);return this};e.fn.nivoSlider=function(n){return this.each(function(r,i){var s=e(this);if(s.data("nivoslider")){return s.data("nivoslider")}var o=new t(this,n);s.data("nivoslider",o)})};e.fn.nivoSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3e3,startSlide:0,directionNav:true,controlNav:true,controlNavThumbs:false,pauseOnHover:true,manualAdvance:false,prevText:"Prev",nextText:"Next",randomStart:false,beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};e.fn._reverse=[].reverse})(jQuery)


/*! jsviews.js v1.0.0-alpha single-file version:
includes JsRender, JsObservable and JsViews  http://github.com/BorisMoore/jsrender and http://jsviews.com/jsviews
informal pre V1.0 commit counter: 51 (Beta Candidate) */
;(function(n,t,i){"use strict";function pt(n){return n}function pi(n){return n}function wt(n){e._dbgMode=n;lt=n?"Error: #index in nested view: use #getIndex()":"";nt("dbg",ui.dbg=ht.dbg=n?pi:pt)}function bt(n){return{getTgt:n,map:function(t){var i=this,r;i.src!==t&&(i.src&&i.unmap(),typeof t=="object"&&(r=n.apply(i,arguments),i.src=t,i.tgt=r))}}}function ut(n,t){t&&t.onError&&t.onError(n)===!1||(this.name="JsRender Error",this.message=n||"JsRender error")}function u(n,t){var i;n=n||{};for(i in t)n[i]=t[i];return n}function kt(n,t,i){return(!v.rTag||n)&&(p=n?n.charAt(0):p,w=n?n.charAt(1):w,o=t?t.charAt(0):o,l=t?t.charAt(1):l,k=i||k,n="\\"+p+"(\\"+k+")?\\"+w,t="\\"+o+"\\"+l,y="(?:(?:(\\w+(?=[\\/\\s\\"+o+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+o+"]|\\"+o+"(?!\\"+l+"))*?)",v.rTag=y+")",y=new RegExp(n+y+"(\\/)?|(?:\\/(\\w+)))"+t,"g"),ct=new RegExp("<.*>|([^\\\\]|^)[{}]|"+n+".*"+t)),[p,w,o,l,k]}function wi(n,t){t||(t=n,n=i);var e,f,o,u,r=this,s=!t||t==="root";if(n){if(u=r.type===t?r:i,!u)if(e=r.views,r._.useKey){for(f in e)if(u=e[f].get(n,t))break}else for(f=0,o=e.length;!u&&f<o;f++)u=e[f].get(n,t)}else if(s)while(r.parent.parent)u=r=r.parent;else while(r&&!u)u=r.type===t?r:i,r=r.parent;return u}function dt(){var n=this.get("item");return n?n.index:i}function gt(){return this.index}function bi(t){var f,e=this,o=e.linkCtx,r=(e.ctx||{})[t];return r===i&&o&&o.ctx&&(r=o.ctx[t]),r===i&&(r=ui[t]),r&&(typeof r!="function"||r._wrp||(f=function(){return r.apply(!this||this===n?e:this,arguments)},f._wrp=1,u(f,r))),f||r}function ki(n,t,u){var h,f,e,o=+u===u&&u,s=t.linkCtx;return o&&(u=(o=t.tmpl.bnds[o-1])(t.data,t,r)),e=u.args[0],(n||o)&&(f=s&&s.tag||{_:{inline:!s,bnd:o},tagName:n+":",flow:!0,_is:"tag"},s&&(s.tag=f,f.linkCtx=f.linkCtx||s,u.ctx=c(u.ctx,s.view.ctx)),f.tagCtx=u,u.view=t,f.ctx=u.ctx||{},delete u.ctx,t._.tag=f,n=n!=="true"&&n,n&&((h=t.getRsc("converters",n))||a("Unknown converter: {{"+n+":"))&&(f.depends=h.depends,e=h.apply(f,u.args)),e=e!=i?e:"",e=o&&t._.onRender?t._.onRender(e,t,o):e,t._.tag=i),e}function di(n,t){for(var f,e,u=this;f===i&&u;)e=u.tmpl[n],f=e&&e[t],u=u.parent;return f||r[n][t]}function gi(n,t,f,e,o){var et,h,at,ot,it,v,st,w,l,rt,nt,vt,b,ct,lt,g,y,k="",ut=+e===e&&e,p=t.linkCtx||0,tt=t.ctx,yt=f||t.tmpl,pt=t._;for(n._is==="tag"&&(h=n,n=h.tagName),ut&&(e=(vt=yt.bnds[ut-1])(t.data,t,r)),st=e.length,h=h||p.tag,v=0;v<st;v++)l=e[v],nt=l.tmpl,nt=l.content=nt&&yt.tmpls[nt-1],f=l.props.tmpl,v||f&&h||(b=t.getRsc("tags",n)||a("Unknown tag: {{"+n+"}}")),f=f||(h?h:b).template||nt,f=""+f===f?t.getRsc("templates",f)||s(f):f,u(l,{tmpl:f,render:ft,index:v,view:t,ctx:c(l.ctx,tt)}),h||(b._ctr?(h=new b._ctr,ct=!!h.init,h.attr=h.attr||b.attr||i):h={render:b.render},h._={inline:!p},p&&(p.attr=h.attr=p.attr||h.attr,p.tag=h,h.linkCtx=p),(h._.bnd=vt||p.fn)?h._.arrVws={}:h.dataBoundOnly&&a("{^{"+n+"}} tag must be data-bound"),h.tagName=n,h.parent=it=tt&&tt.tag,h._is="tag",h._def=b),l.tag=h,h.map&&h.tagCtxs&&(l.map=h.tagCtxs[v].map),h.flow||(rt=l.ctx=l.ctx||{},at=h.parents=rt.parentTags=tt&&c(rt.parentTags,tt.parentTags)||{},it&&(at[it.tagName]=it),rt.tag=h);for(h.tagCtxs=e,pt.tag=h,h.rendering={},v=0;v<st;v++)l=h.tagCtx=e[v],y=l.args,(lt=l.props.map||h).map&&(y.length||!v||l.props.map)&&(y.length||(y=[t.data]),g=l.map=u(l.map||{unmap:lt.unmap},l.props),g.src!==y[0]&&(g.src&&g.unmap(),lt.map.apply(g,y)),y=[g.tgt]),h.ctx=l.ctx,!v&&ct&&(h.init(l,p,h.ctx),l=h.tagCtx,ct=i),w=i,et=h.render,(et=h.render)&&(w=et.apply(h,y)),w=w!==i?w:l.tmpl&&l.render(y[0],i,!0)||(o?i:""),k=k?k+(w||""):w;return delete h.rendering,h.tagCtx=h.tagCtxs[0],h.ctx=h.tagCtx.ctx,h._.inline&&(ot=h.attr)&&ot!==d&&(k=ot==="text"?ht.html(k):""),ut&&t._.onRender?t._.onRender(k,t,ut):k}function g(n,t,i,r,u,f,e,o){var a,h,c,v=t==="array",l={key:0,useKey:v?0:1,id:""+yi++,onRender:o,bnds:{}},s={data:r,tmpl:u,content:e,views:v?[]:{},parent:i,type:t,get:wi,getIndex:gt,getRsc:di,hlp:bi,_:l,_is:"view"};return i?(a=i.views,h=i._,h.useKey?(a[l.key="_"+h.useKey++]=s,s.index=lt,s.getIndex=dt,c=h.tag,l.bnd=v&&(!c||!!c._.bnd&&c)):a.splice(l.key=s.index=f,0,s),s.ctx=n||i.ctx):s.ctx=n,s}function nr(n){var t,i,r,u,f;for(t in b)if(u=b[t],(f=u.compile)&&(i=n[t+"s"]))for(r in i)i[r]=f(r,i[r],n,t,u)}function tr(n,t,i){var u,r;return typeof t=="function"?t={depends:t.depends,render:t}:((r=t.template)&&(t.template=""+r===r?s[r]||s(r):r),t.init!==!1&&(u=t._ctr=function(){},(u.prototype=t).constructor=u)),i&&(t._parentTmpl=i),t}function ni(r,u,f,e,o,h){function v(i){if(""+i===i||i.nodeType>0){try{a=i.nodeType>0?i:!ct.test(i)&&t&&t(n.document).find(i)[0]}catch(u){}return a&&(i=a.getAttribute(yt),r=r||i,i=s[i],i||(r=r||"_"+vi++,a.setAttribute(yt,r),i=s[r]=ni(r,a.innerHTML,f,e,o,h))),i}}var l,a;return u=u||"",l=v(u),h=h||(u.markup?u:{}),h.tmplName=r,f&&(h._parentTmpl=f),!l&&u.markup&&(l=v(u.markup))&&l.fn&&(l.debug!==u.debug||l.allowCode!==u.allowCode)&&(l=l.markup),l!==i?(r&&!f&&(rt[r]=function(){return u.render.apply(u,arguments)}),l.fn||u.fn?l.fn&&(u=r&&r!==l.tmplName?c(h,l):l):(u=ti(l,h),et(l.replace(si,"\\$&"),u)),nr(h),u):void 0}function ti(n,t){var i,o=e.wrapMap||{},r=u({markup:n,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:ft},t);return t.htmlTag||(i=li.exec(n),r.htmlTag=i?i[1].toLowerCase():""),i=o[r.htmlTag],i&&i!==o.div&&(r.markup=f.trim(r.markup)),r}function ir(n,t){function u(e,o,s){var l,h,a,c;if(e&&""+e!==e&&!e.nodeType&&!e.markup){for(a in e)u(a,e[a],o);return r}return o===i&&(o=e,e=i),e&&""+e!==e&&(s=o,o=e,e=i),c=s?s[f]=s[f]||{}:u,h=t.compile,(l=v.onBeforeStoreItem)&&(h=l(c,e,o,h)||h),e?o===null?delete c[e]:c[e]=h?o=h(e,o,s,n,t):o:o=h(i,o),h&&o&&(o._is=n),(l=v.onStoreItem)&&l(c,e,o,h),o}var f=n+"s";r[f]=u;b[n]=t}function ft(n,t,u,e,o,h){var w,ft,tt,y,it,rt,ut,b,p,et,k,ot,l,v=this,st=!v.attr||v.attr===d,nt="";if(o===!0&&(ut=!0,o=0),v.tag?(b=v,v=v.tag,et=v._,ot=v.tagName,l=b.tmpl,t=c(t,v.ctx),p=b.content,b.props.link===!1&&(t=t||{},t.link=!1),e=e||b.view,n=n===i?e:n):l=v.jquery&&(v[0]||a('Unknown template: "'+v.selector+'"'))||v,l&&(!e&&n&&n._is==="view"&&(e=n),e&&(p=p||e.content,h=h||e._.onRender,n===e&&(n=e.data,u=!0),t=c(t,e.ctx)),e&&e.data!==i||((t=t||{}).root=n),l.fn||(l=s[l]||s(l)),l)){if(h=(t&&t.link)!==!1&&st&&h,k=h,h===!0&&(k=i,h=e._.onRender),t=l.helpers?c(l.helpers,t):t,f.isArray(n)&&!u)for(y=ut?e:o!==i&&e||g(t,"array",e,n,l,o,p,h),w=0,ft=n.length;w<ft;w++)tt=n[w],it=g(t,"item",y,tt,l,(o||0)+w,p,h),rt=l.fn(tt,it,r),nt+=y._.onRender?y._.onRender(rt,it):rt;else y=ut?e:g(t,ot||"data",e,n,l,o,p,h),et&&!v.flow&&(y.tag=v),nt+=l.fn(n,y,r);return k?k(nt,y):nt}return""}function a(n){throw new v.Error(n);}function h(n){a("Syntax error\n"+n)}function et(n,t,i,r){function a(t){t-=f;t&&s.push(n.substr(f,t).replace(it,"\\n"))}function c(t){t&&h('Unmatched or missing tag: "{{/'+t+'}}" in template:\n'+n)}function v(e,v,y,w,b,k,g,nt,tt,rt,ut,ft){k&&(b=":",w=d);rt=rt||i;var vt,ht,ct=v&&[],st="",et="",lt="",at=!rt&&!b&&!g;y=y||b;a(ft);f=ft+e.length;nt?p&&s.push(["*","\n"+tt.replace(oi,"$1")+"\n"]):y?(y==="else"&&(ci.test(tt)&&h('for "{{else if expr}}" use "{{else expr}}"'),ct=u[6],u[7]=n.substring(u[7],ft),u=o.pop(),s=u[3],at=!0),tt&&(tt=tt.replace(it," "),st=ot(tt,ct,t).replace(hi,function(n,t,i){return t?lt+=i+",":et+=i+",",""})),et=et.slice(0,-1),st=st.slice(0,-1),vt=et&&et.indexOf("noerror:true")+1&&et||"",l=[y,w||!!r||"",st,at&&[],'params:"'+tt+'",props:{'+et+"}"+(lt?",ctx:{"+lt.slice(0,-1)+"}":""),vt,ct||0],s.push(l),at&&(o.push(u),u=l,u[7]=f)):ut&&(ht=u[0],c(ut!==ht&&ht!=="else"&&ut),u[7]=n.substring(u[7],ft),u=o.pop());c(!u&&ut);s=u[3]}var l,p=t&&t.allowCode,e=[],f=0,o=[],s=e,u=[,,,e];return c(o[0]&&o[0][3].pop()[0]),n.replace(y,v),a(n.length),(f=e[e.length-1])&&c(""+f!==f&&+f[7]===f[7]&&f[0]),ii(e,i?n:t,i)}function ii(n,i,r){var l,f,o,a,v,p,ht,ct,lt,at,et,w,s,ot,y,tt,b,rt,vt,k,yt,pt,st,ut,g,c=0,u="",nt="",ft={},wt=n.length;for(""+i===i?(y=r?'data-link="'+i.replace(it," ").slice(1,-1)+'"':i,i=0):(y=i.tmplName||"unnamed",i.allowCode&&(ft.allowCode=!0),i.debug&&(ft.debug=!0),w=i.bnds,ot=i.tmpls),l=0;l<wt;l++)if(f=n[l],""+f===f)u+='\nret+="'+f+'";';else if(o=f[0],o==="*")u+=""+f[1];else{if(a=f[1],v=f[2],rt=f[3],p=f[4],nt=f[5],vt=f[7],(pt=o==="else")||(c=0,w&&(s=f[6])&&(c=w.push(s))),(st=o===":")?(a&&(o=a===d?">":a+o),nt&&(ut="prm"+l,nt="try{var "+ut+"=["+v+"][0];}catch(e){"+ut+'="";}\n',v=ut)):(rt&&(tt=ti(vt,ft),tt.tmplName=y+"/"+o,ii(rt,tt),ot.push(tt)),pt||(b=o,yt=u,u=""),k=n[l+1],k=k&&k[0]==="else"),p+=",args:["+v+"]}",st&&s||a&&o!==">"){if(g=new Function("data,view,j,u"," // "+y+" "+c+" "+o+"\n"+nt+"return {"+p+";"),g.paths=s,g._ctxs=o,r)return g;et=1}if(u+=st?"\n"+(s?"":nt)+(r?"return ":"ret+=")+(et?(et=0,at=!0,'c("'+a+'",view,'+(s?(w[c-1]=g,c):"{"+p)+");"):o===">"?(ct=!0,"h("+v+");"):(lt=!0,"(v="+v+")!="+(r?"=":"")+'u?v:"";')):(ht=!0,"{view:view,tmpl:"+(rt?ot.length:"0")+","+p+","),b&&!k){if(u="["+u.slice(0,-1)+"]",(r||s)&&(u=new Function("data,view,j,u"," // "+y+" "+c+" "+b+"\nreturn "+u+";"),s&&((w[c-1]=u).paths=s),u._ctxs=o,r))return u;u=yt+'\nret+=t("'+b+'",view,this,'+(c||u)+");";s=0;b=0}}u="// "+y+"\nvar j=j||"+(t?"jQuery.":"js")+"views"+(lt?",v":"")+(ht?",t=j._tag":"")+(at?",c=j._cnvt":"")+(ct?",h=j.converters.html":"")+(r?";\n":',ret="";\n')+(e.tryCatch?"try{\n":"")+(ft.debug?"debugger;":"")+u+(r?"\n":"\nreturn ret;\n")+(e.tryCatch?"\n}catch(e){return j._err(e);}":"");try{u=new Function("data,view,j,u",u)}catch(bt){h("Compiled template code:\n\n"+u,bt)}return i&&(i.fn=u),u}function ot(n,t,i){function b(b,k,d,g,nt,tt,it,rt,ut,ft,st,ht,ct,lt,at,vt,yt,pt,wt,bt){function dt(n,i,r,f,e,o,h,l){if(r&&(t&&(u==="linkTo"&&(s=t._jsvto=t._jsvto||[],s.push(nt)),(!u||c)&&t.push(nt.slice(i.length))),r!==".")){var a=(f?'view.hlp("'+f+'")':e?"view":"data")+(l?(o?"."+o:f?"":e?"":"."+r)+(h||""):(l=f?"":e?o||"":r,""));return a=a+(l?"."+l:""),i+(a.slice(0,9)==="view.data"?a.slice(5):a)}return n}var kt;if(tt=tt||"",d=d||k||ht,nt=nt||ut,ft=ft||yt||"",!it||e||f)return t&&vt&&!e&&!f&&(!u||c||s)&&(kt=v[r],bt.length-1>wt-kt&&(kt=bt.slice(kt,wt+1),vt=w+":"+kt+o,vt=y[vt]=y[vt]||et(p+vt+l,i,!0),vt.paths||ot(kt,vt.paths=[],i),(s||t).push({_jsvOb:vt}))),e?(e=!ct,e?b:'"'):f?(f=!lt,f?b:'"'):(d?(r++,v[r]=wt++,d):"")+(pt?r?"":u?(u=c=s=!1,"\b"):",":rt?(r&&h(n),u=nt,c=g,"\b"+nt+":"):nt?nt.split("^").join(".").replace(fi,dt)+(ft?(a[++r]=!0,nt.charAt(0)!=="."&&(v[r]=wt),ft):tt):tt?tt:at?(a[r--]=!1,at)+(ft?(a[++r]=!0,ft):""):st?(a[r]||h(n),","):k?"":(e=ct,f=lt,'"'));h(n)}var u,s,c,y=i.links,a={},v={0:-1},r=0,f=!1,e=!1;return(n+" ").replace(/\)\^/g,").").replace(ei,b)}function c(n,t){return n&&n!==t?t?u(u({},t),n):n:t&&u({},t)}function ri(n){return vt[n]||(vt[n]="&#"+n.charCodeAt(0)+";")}function rr(n){var i,t,r=[];if(typeof n=="object")for(i in n)t=n[i],t&&t.toJSON&&!t.toJSON()||typeof t!="function"&&r.push({key:i,prop:n[i]});return r}if((!t||!t.views)&&!n.jsviews){var f,tt,y,ct,lt,p="{",w="{",o="}",l="}",k="^",fi=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,ei=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^|\s*$)|[)\]])([([]?))|(\s+)/g,it=/[ \t]*(\r\n|\n|\r)/g,oi=/\\(['"])/g,si=/['"\\]/g,hi=/\x08(~)?([^\x08]+)\x08/g,ci=/^if\s/,li=/<(\w+)[>\s]/,at=/[\x00`><"'&]/g,ai=at,vi=0,yi=0,vt={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},d="html",yt="data-jsv-tmpl",rt={},b={template:{compile:ni},tag:{compile:tr},helper:{},converter:{}},r={jsviews:"v1.0.0-beta",render:rt,settings:function(n){u(e,n);wt(e._dbgMode);e.jsv&&e.jsv()},sub:{View:g,Error:ut,tmplFn:et,parse:ot,extend:u,error:a,syntaxError:h,DataMap:bt},_cnvt:ki,_tag:gi,_err:function(n){return e._dbgMode?"Error: "+(n.message||n)+". ":""}};(ut.prototype=new Error).constructor=ut;dt.depends=function(){return[this.get("item"),"index"]};gt.depends=function(){return["index"]};for(tt in b)ir(tt,b[tt]);var st,s=r.templates,ht=r.converters,ui=r.helpers,nt=r.tags,v=r.sub,e=r.settings;t?(f=t,f.fn.render=ft,(st=f.observable)&&(u(v,st.sub),delete st.sub)):(f=n.jsviews={},f.isArray=Array&&Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"});f.render=rt;f.views=r;f.templates=s=r.templates;e({debugMode:wt,delimiters:kt,_dbgMode:!0,tryCatch:!0});nt({"else":function(){},"if":{render:function(n){var t=this;return t.rendering.done||!n&&(arguments.length||!t.tagCtx.index)?"":(t.rendering.done=!0,t.selected=t.tagCtx.index,t.tagCtx.render())},onUpdate:function(n,t,i){for(var r,f,u=0;(r=this.tagCtxs[u])&&r.args.length;u++)if(r=r.args[0],f=!r!=!i[u].args[0],!!r||f)return f;return!1},flow:!0},"for":{render:function(n){var t=this,r=t.tagCtx,u="",e=0;return arguments.length||(n=r.view.data),t.rendering.done||(n!==i&&(u+=r.render(n),e+=f.isArray(n)?n.length:1),(t.rendering.done=e)&&(t.selected=r.index)),u},flow:!0},include:{flow:!0},"*":{render:pt,flow:!0}});nt({props:u(u({},nt["for"]),bt(rr))});ht({html:function(n){return n!=i?String(n).replace(ai,ri):""},attr:function(n){return n!=i?String(n).replace(at,ri):n===null?n:""},url:function(n){return n!=i?encodeURI(String(n)):n===null?n:""}});kt()}})(this,this.jQuery),function(n,t,i){"use strict";function u(n){return r(n)?new d(n):new k(n)}function k(n){return this._data=n,this}function d(n){return this._data=n,this}function lt(n){return r(n)?[n]:n}function ut(n,t){n=r(n)?n:[n];for(var i,e=t,o=e,h=n.length,u=[],s=0;s<h;s++){if(i=n[s],f(i)){u=u.concat(ut(i.call(t,t),t));continue}else if(""+i!==i){t=o=i;o!==e&&u.push(e=o);continue}o!==e&&u.push(e=o);u.push(i)}return u}function ft(n,t){var r,i;for(r in n){i=!0;break}i||delete p[t]}function g(n,t){if(!(n.data&&n.data.off)){var a,y,p,f=t.oldValue,o=t.value,u=n.data,l=u.observeAll,h=!u.cb.noArray,c=u.paths;n.type===v?(u.cb.array||u.cb).call(u,n,t):(u.prop===t.path||u.prop==="*")&&(f=typeof f===s&&(c[0]||h&&r(f))&&f,o=typeof(o=t.value)===s&&(c[0]||h&&r(o))&&o,l?(a=l._path+"."+t.path,y=l.filter,p=[l.parents().slice(0)],f&&e(h,[f],c,u.cb,!0,y,p,a),o&&e(h,[o],c,u.cb,i,y,p,a)):(f&&e(h,[f],c,u.cb,!0),o&&e(h,[o],c,u.cb)),u.cb(n,t))}}function y(){function kt(i,r,u,f){var e,s,p=rt(n),w=lt(n);if(o=0,k||f)p&&(t(w).off(i,g),o&&delete o[t.data(n,"obId")]);else{if(a=p&&t._data(n))for(a=a&&a.events,a=a&&a[u?v:l],bt=a&&a.length;bt--;)if((et=a[bt].data)&&et.cb._cId===c._cId){if(u)return;(r==="*"&&et.prop!==r||et.prop===y)&&(t(n).off(i,g),o&&delete o[t.data(n,"obId")])}s=u?{cb:c}:{fullPath:h,paths:r?[r]:[],prop:y,cb:c};ot&&(s.observeAll={_path:ot,path:function(){return e=ti.length,ot.replace(/[[.]/g,function(n){return e--,n==="["?"["+t.inArray(ti[e-1],ti[e]):"."})},parents:function(){return ti},filter:fi});t(w).on(i,null,s,g);gt&&(gt[t.data(n,"obId")||t.data(n,"obId",ct++)]=n)}}function ci(n,t){n._ob=st(n,wt);var i=wt;return function(u,f){var o=n._ob,h=t.length;typeof o===s&&(dt(o,!0),(h||at&&r(o))&&e(at,[o],t,c,st,!0));o=n._ob=st(n,i);typeof o===s&&(dt(o),(h||at&&r(o))&&e(at,[o],t,c,st,[i]));c(u,f)}}function dt(t,f,e,o){if(at){var s=n,h=ot;n=t;o&&(n=t[o],ot+="."+o,fi&&(n=u._fltr(o,t,ot,fi)));n&&(e||r(n))&&kt(v+".observe"+(c?".obs"+(pt=c._cId=c._cId||b++):""),i,!0,f);n=s;ot=h}}var yt,ri,ei,it,y,h,ui,k,c,pt,bt,et,a,st,oi,gt,ni,si,ti,ot,fi,at=this!=!1,hi=1,ii=ht,d=Array.apply(0,arguments),nt=d.pop(),wt=d.shift(),vt=wt,n=vt,tt=d.length;for(f(nt)?c=nt:(nt+""===nt&&(ot=nt,ti=d.pop(),fi=d.pop(),nt=d.pop(),tt=tt-3),nt===!0?k=nt:nt&&(wt=nt,hi=0),nt=d[tt-1],(tt&&nt===i||f(nt))&&(c=d.pop(),tt--)),tt&&f(d[tt-1])&&(st=c,c=d.pop(),tt--),ii+=k?c?".obs"+c._cId:"":".obs"+(pt=c._cId=c._cId||b++),k||(gt=p[pt]=p[pt]||{}),r(vt)?dt(vt,k,!0):k&&tt===0&&vt&&kt(ii,""),ni=0,yt=0;yt<tt;yt++)if(h=d[yt],h!==""){if(n=vt,""+h===h){if(it=h.split("^"),it[1]&&(ni=it[0].split(".").length,h=it.join("."),ni=h.split(".").length-ni),st&&(oi=st(h,vt))){tt+=oi.length-1;w.apply(d,[yt--,1].concat(oi));continue}it=h.split(".")}else hi&&!f(h)&&(h._jsvOb&&(k||(h._cb=si=ci(h,d.slice(yt+1)),si.noArray=at===!1,h._rt=wt,si._cId=c._cId),e(at,[h._rt],d.slice(0,yt),h._cb,st,k),h=h._ob),n=h),vt=h,it=[vt];while(n&&(y=it.shift())!==i)if(typeof n===s){if(""+y===y){if(y==="")continue;if(it.length<ni+1&&!n.nodeType){if(!k&&(a=rt(n)&&t._data(n))){for(a=a.events,a=a&&a[l],bt=a&&a.length,ei=0;bt--;)et=a[bt].data,et&&et.cb===c&&(et.prop===y||et.prop==="*")&&((ri=it.join("."))&&et.paths.push(ri),ei++);if(ei){n=n[y];continue}}if(y==="*"){!k&&a&&a.length&&kt(ii,"",!1,!0);f(n)?(ui=n.depends)&&e(at,[ui],c,k||wt):kt(ii,"");for(ri in n)dt(n,k,i,ri);break}else y&&kt(ii+"."+y,it.join("."))}ot&&(ot+="."+y);y=n[y]}if(f(y)){(ui=y.depends)&&e(at,[n],ut(ui,n),c,st,k||[wt]);break}n=y}dt(n,k)}return pt&&ft(gt,pt),{cbId:pt,bnd:gt,leaf:n}}function at(){return[].push.call(arguments,!0),y.apply(this,arguments)}function e(){var n=[].concat.apply([],arguments);return y.apply(n.shift(),n)}function et(n,t,i){return i.indexOf(".")<0&&i.indexOf("[")<0&&t[n]}function vt(n,r,u,f,e){return f=f||et,e=e||et,{getTgt:n,obsSrc:r,obsTgt:u,map:function(i){var o=this,h,c;return o.src!==i&&(o.src&&o.unmap(),typeof i===s&&(c=n.apply(o,arguments),t.observable&&(t.observable(i).observeAll(o.obs=function(n,t){!h&&r&&(h=!0,r.call(o,i,c,n,t),h=!1)},f),t.observable(c).observeAll(o.obt=function(n,t){!h&&u&&(h=!0,u.call(o,i,c,n,t),h=!1)},e)),o.src=i,o.tgt=c)),o},unmap:function(){if(t.observable){var n=this;n.src&&(t.observable(n.src).unobserveAll(n.obs,f),t.observable(n.tgt).unobserveAll(n.obt,e),n.src=n.tgt=i)}}}}function ot(n,t){a(this._data,n,t,[],"root")}function st(n,t){a(this._data,n,t,[],"root",!0)}function a(n,t,f,e,o,h){function v(n,i){for(l=n.length,c=o+"[]";l--;)(w=u._fltr(l,n,c,f))&&a(w,t,f||"",e.slice(0),c,i)}function k(n,i){o=n.data.observeAll._path;var r=e;e[0]!==n.target&&(e=e.slice(0),e.unshift(n.target));switch(i.change){case"insert":v(i.items);break;case"remove":v(i.items,!0);break;case"refresh":v(i.oldItems,!0);v(n.target);break;case"set":c=o+"."+i.path;a(i.oldValue,t,0,e.slice(0),c,!0);a(i.value,t,0,e.slice(0),c)}t.apply(this,arguments);e=r}var l,p,c,w;if(typeof n===s)if(p=r(n)?"":"*",e.unshift(n),t?(p||f!==0)&&(k._cId=t._cId=t._cId||b++,y(n,p,k,h,f,e.slice(),o)):y(n,p,i,h,f,e.slice(),o),p)for(l in n)l.charAt(0)!=="_"&&l!==it&&(c=o+"."+l,(w=u._fltr(l,n,c,f))&&a(w,t,f||0,e.slice(0),c,h));else v(n,h)}if(!t)throw"requires jQuery or JsRender";if(!t.observable){var o,nt,tt=t.event.special,h=t.views?t.views.sub:u.sub={},w=[].splice,r=t.isArray,it=t.expando,s="object",c=parseInt,l=h.propChng=h.propChng||"propertyChange",v=h.arrChng=h.arrChng||"arrayChange",p=h._cbBnds=h._cbBnds||{},ht=l+".observe",f=t.isFunction,ct=1,b=1,rt=t.hasData;h.DataMap=vt;t.observable=u;u._fltr=function(n,t,i,r){var u=r&&f(r)?r(n,t,i):t[n];return u&&(u=f(u)?u.set&&u.call(t):u),typeof u===s&&u};u.Object=k;u.Array=d;t.observe=u.observe=y;t.unobserve=u.unobserve=at;u._apply=e;k.prototype={_data:null,observeAll:ot,unobserveAll:st,data:function(){return this._data},setProperty:function(n,t,u){var f,h,s,e=this,o=e._data;if(n=n||"",o)if(r(n))for(f=n.length;f--;)h=n[f],e.setProperty(h.name,h.value,u===i||u);else if(""+n!==n)for(f in n)e.setProperty(f,n[f],t);else if(n!==it){for(s=n.split(".");o&&s.length>1;)o=o[s.shift()];e._setProperty(o,s.join("."),t,u)}return e},_setProperty:function(n,t,i,r){var e,o,u=t?n[t]:n;f(u)&&u.set&&(o=u,e=u.set===!0?u:u.set,u=u.call(n));(u!==i||r&&u!=i)&&(!(u instanceof Date)||u>i||u<i)&&(e?(e.call(n,i),i=o.call(n)):t&&(n[t]=i),this._trigger(n,{change:"set",path:t,value:i,oldValue:u}))},_trigger:function(n,i){t(n).triggerHandler(l,i)}};d.prototype={_data:null,observeAll:ot,unobserveAll:st,data:function(){return this._data},insert:function(n,t){var i=this._data;return arguments.length===1&&(t=n,n=i.length),n=c(n),n>-1&&n<=i.length&&(t=r(t)?t:[t],t.length&&this._insert(n,t)),this},_insert:function(n,t){var i=this._data,r=i.length;w.apply(i,[n,0].concat(t));this._trigger({change:"insert",index:n,items:t},r)},remove:function(n,t){var r,u=this._data;return n===i&&(n=u.length-1),n=c(n),t=t?c(t):t===0?0:1,t>-1&&n>-1&&(r=u.slice(n,n+t),t=r.length,t&&this._remove(n,t,r)),this},_remove:function(n,t,i){var r=this._data,u=r.length;r.splice(n,t);this._trigger({change:"remove",index:n,items:i},u)},move:function(n,t,i){if(i=i?c(i):i===0?0:1,n=c(n),t=c(t),i>0&&n>-1&&t>-1&&n!==t){var r=this._data.slice(n,n+i);i=r.length;i&&this._move(n,t,i,r)}return this},_move:function(n,t,i,r){var u=this._data,f=u.length;u.splice(n,i);u.splice.apply(u,[t,0].concat(r));this._trigger({change:"move",oldIndex:n,index:t,items:r},f)},refresh:function(n){var t=this._data.slice(0);return this._refresh(t,n),this},_refresh:function(n,t){var i=this._data,r=i.length;w.apply(i,[0,i.length].concat(t));this._trigger({change:"refresh",oldItems:n},r)},_trigger:function(n,i){var r=this._data,u=r.length,f=t([r]);f.triggerHandler(v,n);u!==i&&f.triggerHandler(l,{change:"set",path:"length",value:u,oldValue:i})}};tt[l]=tt[v]={remove:function(n){(n=n.data)&&(n.off=1,n=n.cb)&&(o=p[nt=n._cId])},teardown:function(){o&&(delete o[t.data(this,"obId")],ft(o,nt))}}}}(this,this.jQuery||this.jsviews),function(n,t,i){"use strict";function er(n){var i=this.linkedElem;i&&et({target:i[0],stopImmediatePropagation:t.noop},n)}function et(n,r){var p,w,c,f,b,l,e,k,o,a,tt,g,nt,u,s,v,y=n.target,rt=y._jsvBnd,ut=/&(\d+)\+?/g;if(rt)while(a=ut.exec(rt))if((a=h[a[1]])&&(s=a.to)){if(f=a.linkCtx,o=f.view,u=f.tag,k=t(y),g=o.hlp(wt),nt=o.hlp(bt),c=ot(y),p=gt[c],r===i&&(r=it(c)?c(y):p?k[p]():k.attr(c)),l=s[1],s=s[0],l&&(b=it(l)?l:o.getRsc("converters",l)),b&&(r=b.call(u,r)),tt=o.linkCtx,o.linkCtx=f,v={change:"change",oldValue:f._val,value:r},(!g||!(w=g.call(f,n,v)===!1))&&(!u||!u.onBeforeChange||!(w=u.onBeforeChange(n,v)===!1))&&r!==i&&(e=s[0],r!==i&&e&&(e=e._jsvOb?e._ob:e,u&&(u._.chging=!0),d(e).setProperty(s[2]||s[1],r),nt&&nt.call(f,n,v),u))){if(u.onAfterChange)u.onAfterChange(n,v);delete u._.chging}o.linkCtx=tt;w&&n.stopImmediatePropagation()}}function lu(n,t,u){var h,s,f,e=this,y=e.data,a=e.elem,l=e.convert,p=a.parentNode,b=p,o=e.view,k=o.ctx,w=o.linkCtx,v=o.hlp(wt);if(o.linkCtx=e,p&&(!v||!(t&&v.call(e,n,t)===!1))&&!(t&&n.data.prop!=="*"&&n.data.prop!==t.path)){if(t&&(e.eventArgs=t),t||e._initVal){if(delete e._initVal,s=u.call(o.tmpl,y,o,r),h=au(s,e,f,e.attr||ot(a,!0,l!==i)),f=e.tag){if(t&&f.onUpdate&&f.onUpdate(n,t,s)===!1||h==="none"){f.tagCtxs=s=s[0]?s:[s];f.tagCtx=s[0];h===c&&f.onBeforeLink&&f.onBeforeLink();ct(f,f.tagCtx);fi(e,y,a);o.linkCtx=w;return}if(f._.chging)return;s=f.tagName.slice(-1)===":"?r._cnvt(f.tagName.slice(0,-1),o,s):r._tag(f,o,o.tmpl,s,!0)}else u._ctxs&&(l=l===""?"true":l,s=l?r._cnvt(l,o,s):r._tag(u._ctxs,o,o.tmpl,s,!0),f=o._.tag,h=e.attr||h);or(s,e,h,f)&&t&&(v=o.hlp(bt))&&v.call(e,n,t)}f&&(f.contents=si,f.nodes=hi,f.childTags=ci,f.currentCtxs=yr,f.update=er,f.refresh=wr,ct(f,f.tagCtx));fi(e,y,a);o.linkCtx=w}}function au(n,r,u,f){var e,h,c,o,s=u&&u.parentElem||r.elem;if(n!==i){if(o=t(s),f=u&&u.attr||f,it(n)&&ut(r.expr+": missing parens"),f==="visible"&&(f="css-display"),c=/^css-/.test(f)&&f.slice(4))e=t.style(s,c),+n===n&&(e=parseInt(e)),e=t.style(s,c);else if(f!=="link"){if(f==="value")s.type===kt&&(e=o.prop(f=w));else if(f===rt)if(s.value===""+n)e=o.prop(w);else return f;e===i&&(h=gt[f],e=h?o[h]():o.attr(f))}r._val=e}return f}function or(n,r,u,f){var k,o,h,v,d,a,y=n!==i,g=r.data,e=f&&f.parentElem||r.elem,p=t(e),s=r.view,b=r._val,nt=s.ctx,tt=s.linkCtx,l=f||u===c;if(f&&(f.parentElem=f.parentElem||r.expr||f._elCnt?e:e.parentNode,o=f._prv,h=f._nxt),!y){u===c&&f&&f.onBeforeLink&&f.onBeforeLink();return}if(/^css-/.test(u))u==="css-display"&&(n=n?vu(e):"none"),(l=l||b!==n)&&t.style(e,u.slice(4),n);else if(u!=="link"){if(u===w)a=1,n=n&&n!=="false";else if(u===rt)if(e.value===""+n)n=!0,a=1,u=w;else{fi(r,g,e);return}else(u==="selected"||u==="disabled"||u==="multiple"||u==="readonly")&&(n=n&&n!=="false"?u:null);(k=gt[u])?u===c?(s.linkCtx=r,s.ctx=r.ctx,f&&f._.inline?(d=f.nodes(!0),f._elCnt&&(o&&o!==h&&ai(o,h,e,f._tgId,"^",!0),o=o?o.previousSibling:h?h.previousSibling:e.lastChild),t(d).remove(),f&&f.onBeforeLink&&f.onBeforeLink(),v=s.link(s.data,e,o,h,n,f&&{tag:f._tgId,lazyLink:f.tagCtx.props.lazyLink})):(y&&p.empty(),f&&f.onBeforeLink&&f.onBeforeLink(),y&&(v=s.link(g,e,o,h,n,f&&{tag:f._tgId}))),s.linkCtx=tt,s.ctx=nt):(l=l||b!==n)&&(u==="text"&&e.children&&!e.children[0]?e.textContent!==i?e.textContent=n:e.innerText=n===null?"":n:p[k](n)):(l=l||b!==n)&&p[a?"prop":"attr"](u,n===i&&!a?null:n);r._val=n}return v||l}function sr(n,t){var i=this,r=i.hlp(wt),u=i.hlp(bt);if(!r||r.call(this,n,t)!==!1){if(t){var o=t.change,f=t.index,e=t.items;switch(o){case"insert":i.addViews(f,e);break;case"remove":i.removeViews(f,e.length);break;case"move":i.refresh();break;case"refresh":i.refresh()}}u&&u.call(this,n,t)}}function vu(t){var i,u,f=n.getComputedStyle,r=(t.currentStyle||f.call(n,t,"")).display;return r!=="none"||(r=rr[u=t.nodeName])||(i=o.createElement(u),o.body.appendChild(i),r=(f?f.call(n,i,""):i.currentStyle).display,rr[u]=r,o.body.removeChild(i)),r}function ri(n){var f,e,u=n.data,r=n._.bnd;if(!n._.useKey&&r)if((e=n._.bndArr)&&(t([e[1]]).off(pt,e[0]),n._.bndArr=i),r!==!!r&&r._.inline)u?r._.arrVws[n._.id]=n:delete r._.arrVws[n._.id];else if(u){f=function(t){t.data&&t.data.off||sr.apply(n,arguments)};t([u]).on(pt,f);n._.bndArr=[f,u]}}function ot(n,t,i){var u=n.nodeName.toLowerCase(),r=f.merge[u]||n.contentEditable==="true"&&{to:c,from:c};return r?t?u==="input"&&n.type===rt?rt:r.to:r.from:t?i?"text":c:""}function hr(n,r,u,f,e,o,s){var p,c,v,w,b,l=n.parentElem,h=n._prv,a=n._nxt,y=n._elCnt;if(h&&h.parentNode!==l&&ut("Missing parentNode"),s){w=n.nodes();y&&h&&h!==a&&ai(h,a,l,n._.id,"_",!0);n.removeViews(i,i,!0);c=a;y&&(h=h?h.previousSibling:a?a.previousSibling:l.lastChild);t(w).remove();for(b in n._.bnds)at(b)}else{if(r){if(v=f[r-1],!v)return!1;h=v._nxt}y?(c=h,h=c?c.previousSibling:l.lastChild):c=h.nextSibling}p=u.render(e,o,n._.useKey&&s,n,s||r,!0);n.link(e,l,h,c,p,v)}function ui(n,t,r){var u,f,e;return r?(e="^`",f=t._.tag||{_:{inline:!0,bnd:r},tagCtx:{view:t},flow:!0},u=f._tgId,u||(h[u=ur++]=f,f._tgId=""+u)):(e="_`",v[u=t._.id]=t),"#"+u+e+(n===i?"":n)+"/"+u+e}function fi(n,t,r){var f,l,c,a=n.convertBack,u=n.tag,e=[],o=n._bndId||""+ur++,v=n._hdlr;if(delete n._bndId,u&&(c=u.linkedElem,e=u.depends||e,e=it(e)?u.depends(u):e),!n._depends||""+n._depends!=""+e){if(n._depends&&d._apply(!1,[t],n._depends,v,!0),f=d._apply(!1,[t],n.fn.paths,e,v,n._ctxCb),f.elem=r,f.linkCtx=n,f._tgId=o,r._jsvBnd=r._jsvBnd||"",r._jsvBnd+="&"+o,c)for(f.to=[[],a],l=c.length;l--;)c[l]._jsvBnd=r._jsvBnd+"+";if(n._depends=e,n.view._.bnds[o]=o,h[o]=f,u){if(u.onAfterBind)u.onAfterBind(f);u.flow||u._.inline||(r.setAttribute(s,(r.getAttribute(s)||"")+"#"+o+"^/"+o+"^"),u._tgId=""+o)}(c||a!==i)&&pr(f,a)}}function cr(n,t,i,r,u,f,e){return ei(this,n,t,i,r,u,f,e)}function ei(n,r,u,e,s,h,c,a){if(n&&r){if(r=r.jquery?r:t(r),!b){b=o.body;t(b).on(ki,et).on("blur","[contenteditable]",function(n){var t=f.noValidate;f.noValidate=!0;et(n);f.noValidate=t})}for(var k,nt,tt,g,w,d,y,it,rt=ui,ft=e&&e.target==="replace",ut=r.length;ut--;)if(y=r[ut],""+n===n)w=p(y),it=w.ctx,w.ctx=e,st(n,y,p(y),u),w.ctx=it;else{if(h=h||p(y),n.markup!==i)h.link===!1&&(e=e||{},e.link=rt=!1),ft&&(d=y.parentNode),tt=n.render(u,e,s,h,i,rt),d?(c=y.previousSibling,a=y.nextSibling,t.cleanData([y],!0),d.removeChild(y),y=d):(c=a=i,t(y).empty());else if(n!==!0)break;if(y._dfr&&!a){for(g=l(y._dfr,!0,fr),k=0,nt=g.length;k<nt;k++)w=g[k],(w=v[w.id])&&w.data!==i&&w.parent.removeViews(w._.key,i,!0);y._dfr=""}h.link(u,y,c,a,tt,i,e)}}return r}function yu(n,r,u,c,y,w,b){function au(n,t,r,u,e,o,h,c,l,a,v,p){var w,b="";return d=c||l||"",u=u||a,r=r||p,ai&&!r&&(u||d||o)&&(ai=i,it=dt.shift()),u=u||r,u&&(ai=i,f.noValidate||(r||p?ii[it]||(w="'<"+it+".../"):ii[u]?w="'<\/"+u:dt.length&&u===it||(w="Mismatch: '<\/"+u),w&&tr(w+">' in:\n"+y)),ur=rt,it=dt.shift(),rt=ti[it],a=a?"<\/"+a+">":"",ur&&(lt+=yt,yt="",rt?lt+="-":(b=a+gi+"@"+lt+di+(v||""),lt=cu.shift()))),rt?(o?yt+=o:t=a||p||"",d&&(t+=d,yt&&(t+=" "+s+'="'+yt+'"',yt=""))):t=o?t+b+e+gi+o+di+h+d:b||n,d&&(dt.unshift(it),it=d.slice(1),dt[0]&&dt[0]===uu[it]&&ut("Parent of <tr> must be <tbody>"),ai=ii[it],(rt=ti[it])&&!ur&&(cu.unshift(lt),lt=""),ur=rt,lt&&rt&&(lt+="+")),t}function yi(n,t){var o,l,u,e,f,a,s,c=[];if(n){for(n._tkns.charAt(0)==="@"&&(t=g.previousSibling,g.parentNode.removeChild(g),g=null),wt=n.length;wt--;){if(et=n[wt],u=et.ch,o=et.path)for(ft=o.length-1;l=o.charAt(ft--);)l==="+"?o.charAt(ft)==="-"?(ft--,t=t.previousSibling):t=t.parentNode:t=t.lastChild;u==="^"?(d=h[f=et.id])&&(s=t&&(!g||g.parentNode!==t),(!g||s)&&(d.parentElem=t),et.elCnt&&s&&(t._dfr=(et.open?"#":"/")+f+u+(t._dfr||"")),c.push([s?null:g,et])):(nt=v[f=et.id])&&(nt.link||(nt.parentElem=t||g&&g.parentNode||r,k(nt,vt),nt._.onRender=ui,nt._.onArrayChange=sr,ri(nt)),e=nt.parentElem,et.open?(nt._elCnt=et.elCnt,t?t._dfr="#"+f+u+(t._dfr||""):(nt._prv||(e._dfr=ht(e._dfr,"#"+f+u)),nt._prv=g)):(t&&(!g||g.parentNode!==t)?(t._dfr="/"+f+u+(t._dfr||""),nt._nxt=i):g&&(nt._nxt||(e._dfr=ht(e._dfr,"/"+f+u)),nt._nxt=g),oi=nt.linkCtx,(a=nt.ctx&&nt.ctx.onAfterCreate||yu)&&a.call(oi,nt)))}for(wt=c.length;wt--;)or.push(c[wt])}return!n||n.elCnt}function vu(n){var t,i;if(n)for(wt=n.length,ft=0;ft<wt;ft++)if(et=n[ft],at.id)at.id=at.id!==et.id&&at.id;else if(i=d=h[et.id].linkCtx.tag,!d.flow){if(!pr){for(t=1;i=i.parent;)t++;nr=nr||t}(pr||t===nr)&&(!br||d.tagName===br)&&lr.push(d)}}function tu(){for(hr=ni?r.querySelectorAll(tt):t(tt,r).get(),gt=hr.length,u&&u.innerHTML&&(pi=ni?u.querySelectorAll(tt):t(tt,u).get(),u=pi.length?pi[pi.length-1]:u),nr=0,pt=0;pt<gt;pt++)if(g=hr[pt],u&&!ou)ou=g===u;else if(c&&g===c)break;else g.parentNode&&lu(l(g,i,lr&&hu))&&!at&&g.getAttribute(a)&&or.push([g]);if(ar(u,rt),ar(c,rt),at){bt&&bt.resolve();return}for(rt&&lt+yt&&(g=c,lt&&(c?yi(l(lt+"+",!0),c):yi(l(lt,!0),r)),yi(l(yt,!0),r),c&&(ot=c.getAttribute(s),(gt=ot.indexOf(fr)+1)&&(ot=ot.slice(gt+fr.length-1)),c.setAttribute(s,yt+ot))),gt=or.length,pt=0;pt<gt;pt++)g=or[pt],kt=g[1],g=g[0],kt?(d=h[kt.id],(oi=d.linkCtx)&&(d=oi.tag,d.linkCtx=oi),kt.open?(g&&(d.parentElem=g.parentNode,d._prv=g),d._elCnt=kt.elCnt,!d||d.onBeforeLink&&d.onBeforeLink()===!1||d._.bound||(d._.bound=!0,nt=d.tagCtx.view,st(i,d._prv,nt,nt.data||n,kt.id)),d._.linking=!0):(d._nxt=g,d._.linking&&(kr=d.tagCtx,nt=kr.view,d.contents=si,d.nodes=hi,d.childTags=ci,d.currentCtxs=yr,d.update=er,d.refresh=wr,delete d._.linking,d._.bound||(d._.bound=!0,st(i,d._prv,nt,nt.data||n,kt.id)),ct(d,kr)))):(nt=p(g),st(g.getAttribute(a),g,nt,nt.data||n,i,b));bt&&bt.resolve()}var oi,d,pt,gt,ft,wt,hr,g,nt,et,kt,pi,bi,cr,ki,fi,lr,pr,br,kr,nr,at,ru,dr,fu,li,it,ai,vi,rr,ot,rt,ur,ei,yt,fr,ou,bt,nu=this,su=nu._.id+"_",lt="",or=[],dt=[],cu=[],yu=nu.hlp(gr),lu=yi;if(w&&(bt=w.lazyLink&&t.Deferred(),w.tmpl?cr="/"+w._.id+"_":(at=w.get,w.tag&&(su=w.tag+"^",w=!0)),w=w===!0),at&&(lu=vu,lr=at.tags,pr=at.deep,br=at.name),r=r?""+r===r?t(r)[0]:r.jquery?r[0]:r:nu.parentElem||o.body,it=r.tagName.toLowerCase(),rt=!!ti[it],u=u&&vr(u,rt),c=c&&vr(c,rt)||null,y!==i){if(rr=o.createElement("div"),vi=rr,fr=yt="",ei=r.namespaceURI==="http://www.w3.org/2000/svg"?"svg_ns":(li=iu.exec(y))&&li[1]||"",wi&&li&&li[2]&&ut("Unsupported: "+li[2]),rt){for(fi=c;fi&&!(ki=l(fi));)fi=fi.nextSibling;(ot=ki?ki._tkns:r._dfr)&&(bi=cr||"",(w||!cr)&&(bi+="#"+su),ft=ot.indexOf(bi),ft+1&&(ft+=bi.length,fr=yt=ot.slice(0,ft),ot=ot.slice(ft),ki?fi.setAttribute(s,ot):r._dfr=ot))}for(ai=i,y=(""+y).replace(eu,au),!f.noValidate&&dt.length&&tr("Mismatched '<"+it+"...>' in:\n"+y),ir.appendChild(rr),ei=e[ei]||e.div,ru=ei[0],vi.innerHTML=ei[1]+y+ei[2];ru--;)vi=vi.lastChild;for(ir.removeChild(rr),dr=o.createDocumentFragment();fu=vi.firstChild;)dr.appendChild(fu);r.insertBefore(dr,c)}return bt?setTimeout(tu,0):tu(),bt&&bt.promise()}function st(n,t,r,f,e,o){var w,v,b,l,k,d,y,p,a,s,tt;if(e)s=h[e],s=s.linkCtx?s.linkCtx.tag:s,a=s.linkCtx||{data:f,elem:s._elCnt?s.parentElem:t,view:r,ctx:r.ctx,attr:c,fn:s._.bnd,tag:s,_bndId:e},lr(a,a.fn);else if(n&&t)for(w=r.tmpl,n=pu(n,ot(t)),g.lastIndex=0;v=g.exec(n);)tt=g.lastIndex,b=e?c:v[1],y=v[3],k=v[10],l=i,a={data:f,elem:s&&s._elCnt?s.parentElem:t,view:r,ctx:o||r.ctx,attr:b,_initVal:!v[2]},v[6]&&(!b&&(l=/:([\w$]*)$/.exec(k))&&(l=l[1],l!==i&&(d=-l.length-1,y=y.slice(0,d-1)+nt,k=k.slice(0,d))),l===null&&(l=i),a.convert=v[5]||""),a.expr=b+y,p=w.links[y],p||(w.links[y]=p=u.tmplFn(vi+y+yi,w,!0,l),u.parse(k,p.paths=[],w)),a.fn=p,b||l===i||(a.convertBack=l),lr(a,p),g.lastIndex=tt}function lr(n,t){function i(i,r){lu.call(n,i,r,t)}i.noArray=!0;n._ctxCb=wu(n.view);n._hdlr=i;i(!0)}function ht(n,t){var i;return n?(i=n.indexOf(t),i+1?n.slice(0,i)+n.slice(i+t.length):n):""}function oi(n){return n&&(""+n===n?n:n.tagName==="SCRIPT"?n.type.slice(3):n.nodeType===1&&n.getAttribute(s)||"")}function l(n,t,i){function e(n,t,i,r,e,o){u.push({elCnt:f,id:r,ch:e,open:t,close:i,path:o,token:n})}var f,r,u=[];if(r=t?n:oi(n))return u.elCnt=!n.type,f=r.charAt(0)==="@"||!n.type,u._tkns=r,r.replace(i||cu,e),u}function ar(n,t){n&&(n.type==="jsv"?n.parentNode.removeChild(n):t&&n.getAttribute(a)===""&&n.removeAttribute(a))}function vr(n,t){for(var i=n;t&&i&&i.nodeType!==1;)i=i.previousSibling;return i&&(i.nodeType!==1?(i=o.createElement("SCRIPT"),i.type="jsv",n.parentNode.insertBefore(i,n)):oi(i)||i.getAttribute(a)||i.setAttribute(a,"")),i}function pu(n,i){return n=t.trim(n).replace(ru,"\\$&"),n.slice(-1)!==nt?n=yt+":"+n+(i?":":"")+nt:n}function si(n,r){n!==!!n&&(r=n,n=i);var f,u=t(this.nodes());return u[0]&&(f=r?u.filter(r):u,u=n&&r?f.add(u.find(r)):f),u}function hi(n,t,i){var r,u=this,f=u._elCnt,o=!t&&f,e=[];for(t=t||u._prv,i=i||u._nxt,r=o?t===u._nxt?u.parentElem.lastSibling:t:u._.inline===!1?t||u.linkCtx.elem.firstChild:t&&t.nextSibling;r&&(!i||r!==i);)(n||f||r.tagName!=="SCRIPT")&&e.push(r),r=r.nextSibling;return e}function ci(n,t){n!==!!n&&(t=n,n=i);var r=this,o=r.link?r:r.tagCtx.view,u=r._prv,f=r._elCnt,e=[];return u&&o.link(i,r.parentElem,f?u.previousSibling:u,r._nxt,i,{get:{tags:e,deep:n,name:t,id:f&&r._tgId}}),e}function yr(){var n=this.tagCtx.view;return this._.bnd.call(n.tmpl,n.data,n,r)}function ct(n,t){var o,s,u,a,f,v,y,p,c,l=t.view,e=n.linkCtx=n.linkCtx||{tag:n,data:l.data,view:l,ctx:l.ctx};if(n.onAfterLink)n.onAfterLink(t,e);if(s=n.targetTag?n.targetTag.linkedElem:n.linkedElem,!n._.chging&&s&&(u=s[0])){if(a=u.type===rt,o=e.convert,f=o?it(o)?o(t.args[0]):r._cnvt(o,l,t):t.args[0],u!==e.elem)for(p=s.length;p--;){if(u=s[p],c=u._jsvLnkdEl,n._.inline&&(!c||c!==n&&c.targetTag!==n))for(u._jsvLnkdEl=n,u._jsvBnd=e.elem?e.elem._jsvBnd:n._prv._jsvBnd,v=u._jsvBnd.slice(1).split("&"),y=v.length;y--;)pr(h[v[y]],e.convertBack);a&&(u[w]=f===u.value)}a||u.value===i||f===i||(u.type===kt?u[w]=f&&f!=="false":u.value=f)}}function pr(n,t){var e,f,r,o,u=n.linkCtx,s=u.data,i=u.fn.paths;if(n){for((e=i._jsvto)&&(i=e),f=i.length;f&&""+(r=i[--f])!==r;);r&&(!u.tag||u.tag.tagCtx.args.length)?(r=i[f]=r.split("^").join("."),n.to=r.charAt(0)==="."?[[o=i[f-1],r.slice(1)],t]:[u._ctxCb(i[0])||[s,i[0]],t],e&&o&&(n.to[0][0]=u._ctxCb(o,s))):n.to=[[],t]}}function wr(n){var u,f,t=this,e=t.linkCtx,o=t.tagCtx.view;return t.disposed&&ut("Removed tag"),n===i&&(n=r._tag(t,o,o.tmpl,t.currentCtxs?t.currentCtxs():t.tagCtxs,!0)),n+""===n&&(f=t._.inline?c:e.attr||ot(t.parentElem,!0),u=or(n,e,f,t)),ct(t,t.tagCtx),u||t}function lt(n){for(var e,o,h,r,s,t,u,c=[],a=n.length,f=a;f--;)c.push(n[f]);for(f=a;f--;)if(r=c[f],r.parentNode){if(u=r._jsvBnd)for(u=u.slice(1).split("&"),r._jsvBnd="",o=u.length;o--;)at(u[o],r._jsvLnkdEl);if(s=l(oi(r)+(r._dfr||""),!0,ou))for(e=0,h=s.length;e<h;e++)t=s[e],t.ch==="_"?(t=v[t.id])&&t.data!==i&&t.parent.removeViews(t._.key,i,!0):at(t.id)}}function at(n,i){var c,e,r,o,s,l,a,v,f=h[n];if(f)if(e=f.linkCtx,r=e.tag,i)delete r.linkedElem;else{for(c in f.bnd)o=f.bnd[c],s=".obs"+f.cbId,t.isArray(o)?t([o]).off(pt+s).off(bi+s):t(o).off(bi+s),delete f.bnd[c];if(e=f.linkCtx,r){if(l=r.tagCtxs)for(a=l.length;a--;)(v=l[a].map)&&v.unmap();r.onDispose&&r.onDispose();r._elCnt||(r._prv&&r._prv.parentNode.removeChild(r._prv),r._nxt&&r._nxt.parentNode.removeChild(r._nxt));r.disposed=!0}delete e.view._.bnds[n];delete h[n];delete u._cbBnds[f.cbId]}}function li(n,r){return n===i?(b&&(t(b).off(ki,et),b=i),n=!0,y.removeViews(),lt(o.body.getElementsByTagName("*"))):r&&(r=r.jquery?r:t(r),n===!0?r.each(function(){for(var n;(n=p(this,!0))&&n.parent;)n.parent.removeViews(n._.key,i,!0);lt(this.getElementsByTagName("*"))}):n===i&&lt(r)),r}function br(n,t){return li(this,n,t)}function wu(n){return n=n||t.view(),function(t,i){var f,u,e=[i];if(n&&t){if(t._jsvOb)return t._jsvOb.call(n.tmpl,i,n,r);if(t.charAt(0)==="~")return t.slice(0,4)==="~tag"&&(u=n.ctx,t.charAt(4)==="."&&(f=t.slice(5).split("."),u=u.tag),f)?u?[u,f.join("."),i]:[]:(t=t.slice(1).split("."),(i=n.hlp(t.shift()))&&(t.length&&e.unshift(t.join(".")),e.unshift(i)),i?e:[]);if(t.charAt(0)==="#")return t==="#data"?[]:[n,t.replace(fu,""),i]}}}function bu(n){return n.type===kt?n[w]:n.value}function ai(n,t,i,r,u,f){var y,c,p,o,b,a,e,w=0,k=n===t;if(n){for(p=l(n)||[],y=0,c=p.length;y<c;y++){if(o=p[y],a=o.id,a===r&&o.ch===u)if(f)c=0;else break;k||(b=o.ch==="_"?v[a]:h[a].linkCtx.tag,o.open?b._prv=t:o.close&&(b._nxt=t));w+=a.length+2}w&&n.setAttribute(s,n.getAttribute(s).slice(w));e=t?t.getAttribute(s):i._dfr;(c=e.indexOf("/"+r+u)+1)&&(e=p._tkns.slice(0,w)+e.slice(c+(f?-1:r.length+1)));e&&(t?t.setAttribute(s,e):i._dfr=e)}else i._dfr=ht(i._dfr,"#"+r+u),f||t||(i._dfr=ht(i._dfr,"/"+r+u))}function ku(n,i,r,u){switch(u.change){case"set":for(var f=i.length;f--;)if(i[f].key===u.path)break;f===-1?u.path&&t.observable(i).insert({key:u.path,prop:u.value}):u.value===null?(delete n[u.path],t.observable(i).remove(f)):t.observable(i[f]).setProperty("prop",u.value)}}function du(n,i,r,u){var f;switch(u.change){case"set":u.path==="prop"?t.observable(n).setProperty(r.target.key,u.value):(t.observable(n).setProperty(u.oldValue,null),delete n[u.oldValue],t.observable(n).setProperty(u.value,r.target.prop));break;case"remove":f=u.items[0];t.observable(n).setProperty(f.key,null);delete n[f.key];break;case"insert":f=u.items[0];f.key&&t.observable(n).setProperty(f.key,f.prop)}}function gu(n,t,i){return i.indexOf(".")<0&&t[n]}if(!t)throw"requires jQuery";if(!t.views)throw"requires JsRender";if(!t.observable)throw"requires jquery.observable";if(!t.link){var vt,b,p,g,vi,yt,nt,yi,pi,wi,a,tt,e,o=n.document,r=t.views,u=r.sub,f=r.settings,k=u.extend,y=u.View(i,"top"),it=t.isFunction,kr=r.templates,dr=r.converters,d=t.observable,ft=d.observe,s="data-jsv",bi=u.propChng=u.propChng||"propertyChange",pt=u.arrChng=u.arrChng||"arrayChange",nf=u._cbBnds=u._cbBnds||{},ki="change.jsv",wt="onBeforeChange",bt="onAfterChange",gr="onAfterCreate",w="checked",kt="checkbox",rt="radio",di='"><\/script>',gi='<script type="jsv',dt="script,["+s+"]",c="html",gt={value:"val",input:"val",html:c,text:"text"},nr={from:"value",to:"value"},nu=t.cleanData,tu=f.delimiters,ut=u.error,tr=u.syntaxError,iu=/<(?!script)(\w+)(?:[^>]*(on\w+)\s*=)?[^>]*>/,ru=/['"\\]/g,ir=o.createDocumentFragment(),ni=o.querySelector,ti={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},uu={tr:"table"},ii={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},rr={},v={0:y},h={},ur=1,fu=/^#(view\.?)?/,eu=/(^|(\/>)|<\/(\w+)>|>|)(\s*)([#\/]\d+[_^])`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*)/g,fr=/(#)()(\d+)(_)/g,ou=/(#)()(\d+)([_^])/g,su=/(?:(#)|(\/))(\d+)(_)/g,hu=/(#)()(\d+)(\^)/g,cu=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g;u.onStoreItem=function(n,i,r){r&&n===kr&&(r.link=cr,r.unlink=br,i&&(t.link[i]=function(){return cr.apply(r,arguments)},t.unlink[i]=function(){return br.apply(r,arguments)}))};(f.delimiters=function(){var n=tu.apply(r,arguments);return vi=n[0],yt=n[1],nt=n[2],yi=n[3],pi=n[4],g=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+pi+")?(\\"+yt+u.rTag+"\\"+nt+")","g"),this})();u.viewInfos=l;vt={addViews:function(n,t,i){var u,o,r=this,f=t.length,e=r.views;if(!r._.useKey&&f&&(i=r.tmpl)&&(o=e.length+f,hr(r,n,i,e,t,r.ctx)!==!1))for(u=n+f;u<o;u++)d(e[u]).setProperty("index",u);return r},removeViews:function(n,r,u){function o(n){var s,h,c,e,o,l,r=f[n];if(r&&r.link){if(s=r._.id,u||(l=r.nodes()),r.removeViews(i,i,!0),r.data=i,e=r._prv,o=r._nxt,c=r.parentElem,u||(r._elCnt&&ai(e,o,c,s,"_"),t(l).remove()),!r._elCnt)try{e.parentNode.removeChild(e);o.parentNode.removeChild(o)}catch(a){}ri(r);for(h in r._.bnds)at(h);delete v[s]}}var e,l,s,h=this,c=!h._.useKey,f=h.views;if(c&&(s=f.length),n===i)if(c){for(e=s;e--;)o(e);h.views=[]}else{for(l in f)o(l);h.views={}}else if(r===i&&(c?r=1:(o(n),delete f[n])),c&&r){for(e=n+r;e-->n;)o(e);if(f.splice(n,r),s=f.length)while(n<s)d(f[n]).setProperty("index",n++)}return this},refresh:function(n){var t=this,i=t.parent;return i&&(hr(t,t.index,t.tmpl,i.views,t.data,n,!0),ri(t)),t},nodes:hi,contents:si,childTags:ci,link:yu};dr.merge=function(n){var t,i=this.linkCtx._val||"",r=this.tagCtx.props.toggle;return r&&(t=r.replace(/[\\^$.|?*+()[{]/g,"\\$&"),t="(\\s(?="+t+"$)|(\\s)|^)("+t+"(\\s|$))",i=i.replace(new RegExp(t),"$2"),n=i+(n?(i&&" ")+r:"")),n};r.tags("on",{attr:"none",onAfterLink:function(n,r){var o=this,s=t(r.elem),f=n.args,u=n.props.data,e=f.pop(),h=f[1]||null,c=n.props.context;if(u=u!==i?u:null,e&&e.call)s.on(f[0]||"click",h,u,function(n){e.call(c||o.leaf,n,{change:n.type,view:r.view,linkCtx:r})})},onAfterBind:function(n){this.leaf=n.leaf},flow:!0});k(r.tags["for"],{onArrayChange:function(n,t){var i,r=this,u=t.change;if(r.tagCtxs[1]&&(u==="insert"&&n.target.length===t.items.length||u==="remove"&&!n.target.length||u==="refresh"&&!t.oldItems.length!=!n.target.length))r.refresh();else for(i in r._.arrVws)i=r._.arrVws[i],i.data===n.target&&i._.onArrayChange.apply(i,arguments);n.done=!0},onAfterLink:function(){for(var u,o,i,f,e=this,r=e._ars||{},s=e.tagCtxs,c=s.length,h=e.selected||0,n=0;n<=h;n++)u=s[n],f=u.map?u.map.tgt:u.args.length?u.args[0]:u.view.data,(i=r[n])&&f!==i[0]&&(ft(i[0],i[1],!0),delete r[n]),!r[n]&&t.isArray(f)&&(ft(f,o=function(n,t){e.onArrayChange(n,t)}),r[n]=[f,o]);for(n=h+1;n<c;n++)(i=r[n])&&(ft(i[0],i[1],!0),delete r[n]);e._ars=r},onDispose:function(){var n,t=this;for(n in t._ars)ft(t._ars[n][0],t._ars[n][1],!0)}});r.tags({props:t.extend({},r.tags["for"],u.DataMap(r.tags.props.getTgt,ku,du,i,gu))});k(t,{view:r.view=p=function(n,r,u){r!==!!r&&(u=r,r=i);var f,e,h,c,w,s,b,a,p=0,k=o.body;if(n&&n!==k&&y._.useKey>1&&(n=""+n===n?t(n)[0]:n.jquery?n[0]:n,n))if(r){for(a=ni?n.querySelectorAll(dt):t(dt,n).get(),s=a.length,h=0;h<s;h++)for(b=a[h],e=l(b,i,fr),c=0,w=e.length;c<w;c++)if(f=e[c],(f=v[f.id])&&(f=f&&u?f.get(!0,u):f,f))return f}else while(n){if(e=l(n,i,su))for(s=e.length;s--;)if(f=e[s],f.open){if(p<1)return f=v[f.id],f&&u?f.get(u):f||y;p--}else p++;n=n.previousSibling||n.parentNode}return r?i:y},link:r.link=ei,unlink:r.unlink=li,cleanData:function(n){n.length&&(lt(n),nu.call(t,n))}});k(t.fn,{link:function(n,t,i,r,u,f,e){return ei(n,this,t,i,r,u,f,e)},unlink:function(n){return li(n,this)},view:function(n){return p(this[0],n)}});k(y,{tmpl:{links:{},tags:{}}});k(y,vt);y._.onRender=ui;f({wrapMap:e={option:[1,"<select multiple='multiple'>","<\/select>"],legend:[1,"<fieldset>","<\/fieldset>"],area:[1,"<map>","<\/map>"],param:[1,"<object>","<\/object>"],thead:[1,"<table>","<\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],svg_ns:[1,"<svg>","<\/svg>"],div:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","<\/div>"]},linkAttr:a="data-link",merge:{input:{from:bu,to:"value"},textarea:nr,select:nr,optgroup:{to:"label"}},jsrDbgMode:f.debugMode,debugMode:function(t){f.jsrDbgMode(t);t?n._jsv={views:v,bindings:h}:delete n._jsv},jsv:function(){f.debugMode(f._dbgMode);a=f.linkAttr;tt=dt+",["+a+"]";wi=f.noDomLevel0;e.optgroup=e.option;e.tbody=e.tfoot=e.colgroup=e.caption=e.thead;e.th=e.td}})}}(this,this.jQuery);
/*
//# sourceMappingURL=jsviews.min.js.map
*/